if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(a){var b=a.getMonth();var c=[31,28,31,30,31,30,31,31,30,31,30,31];if(b==1&&dojo.date.isLeapYear(a)){return 29}return c[b]};dojo.date.isLeapYear=function(b){var a=b.getFullYear();return !(a%400)||(!(a%4)&&!!(a%100))};dojo.date.getTimezoneName=function(c){var d=c.toString();var f="";var b;var e=d.indexOf("(");if(e>-1){f=d.substring(++e,d.indexOf(")"))}else{var a=/([A-Z\/]+) \d{4}$/;if((b=d.match(a))){f=b[1]}else{d=c.toLocaleString();a=/ ([A-Z\/]+)$/;if((b=d.match(a))){f=b[1]}}}return(f=="AM"||f=="PM")?"":f};dojo.date.compare=function(c,b,a){c=new Date(Number(c));b=new Date(Number(b||new Date()));if(typeof a!=="undefined"){if(a=="date"){c.setHours(0,0,0,0);b.setHours(0,0,0,0)}else{if(a=="time"){c.setFullYear(0,0,0);b.setFullYear(0,0,0)}}}if(c>b){return 1}if(c<b){return -1}return 0};dojo.date.add=function(d,c,e){var g=new Date(Number(d));var b=false;var k="Date";switch(c){case"day":break;case"weekday":var l,a;var i=0;var j=e%5;if(!j){l=(e>0)?5:-5;a=(e>0)?((e-5)/5):((e+5)/5)}else{l=j;a=parseInt(e/5)}var f=d.getDay();if(f==6&&e>0){i=1}else{if(f==0&&e<0){i=-1}}var h=f+l;if(h==0||h==6){i=(e>0)?2:-2}e=7*a+l+i;break;case"year":k="FullYear";b=true;break;case"week":e*=7;break;case"quarter":e*=3;case"month":b=true;k="Month";break;case"hour":case"minute":case"second":case"millisecond":k="UTC"+c.charAt(0).toUpperCase()+c.substring(1)+"s"}if(k){g["set"+k](g["get"+k]()+e)}if(b&&(g.getDate()<d.getDate())){g.setDate(0)}return g};dojo.date.difference=function(p,n,d){n=n||new Date();d=d||"day";var c=n.getFullYear()-p.getFullYear();var l=1;switch(d){case"quarter":var q=p.getMonth();var o=n.getMonth();var i=Math.floor(q/3)+1;var h=Math.floor(o/3)+1;h+=(c*4);l=h-i;break;case"weekday":var m=Math.round(dojo.date.difference(p,n,"day"));var a=parseInt(dojo.date.difference(p,n,"week"));var k=m%7;if(k==0){m=a*5}else{var j=0;var g=p.getDay();var e=n.getDay();a=parseInt(m/7);k=m%7;var f=new Date(p);f.setDate(f.getDate()+(a*7));var b=f.getDay();if(m>0){switch(true){case g==6:j=-1;break;case g==0:j=0;break;case e==6:j=-1;break;case e==0:j=-2;break;case (b+k)>5:j=-2}}else{if(m<0){switch(true){case g==6:j=0;break;case g==0:j=1;break;case e==6:j=2;break;case e==0:j=1;break;case (b+k)<0:j=2}}}m+=j;m-=(a*2)}l=m;break;case"year":l=c;break;case"month":l=(n.getMonth()-p.getMonth())+(c*12);break;case"week":l=parseInt(dojo.date.difference(p,n,"day")/7);break;case"day":l/=24;case"hour":l/=60;case"minute":l/=60;case"second":l/=1000;case"millisecond":l*=n.getTime()-p.getTime()}return Math.round(l)}}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");dojo.provide("dojo.fx.Toggler");dojo.fx.chain=function(c){var b=c.shift();var a=b;dojo.forEach(c,function(d){dojo.connect(a,"onEnd",d,"play");a=d});return b};dojo.fx.combine=function(b){var a=new dojo._Animation({curve:[0,1]});if(!b.length){return a}a.duration=b[0].duration;dojo.forEach(b,function(c){dojo.forEach(["play","pause","stop"],function(d){if(c[d]){dojo.connect(a,d,c,d)}})});return a};dojo.declare("dojo.fx.Toggler",null,{constructor:function(a){var b=this;dojo.mixin(b,a);b.node=a.node;b._showArgs=dojo.mixin({},a);b._showArgs.node=b.node;b._showArgs.duration=b.showDuration;b.showAnim=b.showFunc(b._showArgs);b._hideArgs=dojo.mixin({},a);b._hideArgs.node=b.node;b._hideArgs.duration=b.hideDuration;b.hideAnim=b.hideFunc(b._hideArgs);dojo.connect(b.showAnim,"beforeBegin",dojo.hitch(b.hideAnim,"stop",true));dojo.connect(b.hideAnim,"beforeBegin",dojo.hitch(b.showAnim,"stop",true))},node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,show:function(a){return this.showAnim.play(a||0)},hide:function(a){return this.hideAnim.play(a||0)}});dojo.fx.wipeIn=function(a){a.node=dojo.byId(a.node);var c=a.node,b=c.style;var d=dojo.animateProperty(dojo.mixin({properties:{height:{start:function(){b.overflow="hidden";if(b.visibility=="hidden"||b.display=="none"){b.height="1px";b.display="";b.visibility="";return 1}else{var e=dojo.style(c,"height");return Math.max(e,1)}},end:function(){return c.scrollHeight}}}},a));dojo.connect(d,"onEnd",function(){b.height="auto"});return d};dojo.fx.wipeOut=function(a){var c=a.node=dojo.byId(a.node);var b=c.style;var d=dojo.animateProperty(dojo.mixin({properties:{height:{end:1}}},a));dojo.connect(d,"beforeBegin",function(){b.overflow="hidden";b.display=""});dojo.connect(d,"onEnd",function(){b.height="auto";b.display="none"});return d};dojo.fx.slideTo=function(a){var b=(a.node=dojo.byId(a.node));var e=null;var d=null;var f=(function(g){return function(){var i=dojo.getComputedStyle(g);var j=i.position;e=(j=="absolute"?g.offsetTop:parseInt(i.top)||0);d=(j=="absolute"?g.offsetLeft:parseInt(i.left)||0);if(j!="absolute"&&j!="relative"){var h=dojo.coords(g,true);e=h.y;d=h.x;g.style.position="absolute";g.style.top=e+"px";g.style.left=d+"px"}}})(b);f();var c=dojo.animateProperty(dojo.mixin({properties:{top:{end:a.top||0},left:{end:a.left||0}}},a));dojo.connect(c,"beforeBegin",c,f);return c}}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(b,c,g){g=dojo.i18n.normalizeLocale(g);var a=g.split("-");var d=[b,"nls",c].join(".");var i=dojo._loadedModules[d];if(i){var h;var f=a[0].match(/ja|en/i)?a[0]:null;if(f&&i[f]){h=i[f]}if(!h){h=i.ROOT}if(h){var e=function(){};e.prototype=h;return new e()}}throw new Error("Bundle not found: "+c+" in "+b+" , locale="+g)};dojo.i18n.normalizeLocale=function(b){var a=b?b.toLowerCase():dojo.locale;if(a=="root"){a="ROOT"}return a};dojo.i18n._requireLocalization=function(a,b,p,l){var h=dojo.i18n.normalizeLocale(p);var e=[a,"nls",b].join(".");var d="";if(l){var o=l.split(",");for(var j=0;j<o.length;j++){if(h.indexOf(o[j])==0){if(o[j].length>d.length){d=o[j]}}}if(!d){d="ROOT"}}var m=l?d:h;var r=dojo._loadedModules[e];var c=null;if(r){if(djConfig.localizationComplete&&r._built){return}var g=m.replace(/-/g,"_");var n=e+"."+g;c=dojo._loadedModules[n]}if(!c){r=dojo.provide(e);var f=dojo._getModuleSymbols(a);var k=f.concat("nls").join("/");var q;dojo.i18n._searchLocalePath(m,l,function(v){var w=v.replace(/-/g,"_");var u=e+"."+w;var s=false;if(!dojo._loadedModules[u]){dojo.provide(u);var t=[k];if(v!="ROOT"){t.push(v)}t.push(b);var i=t.join("/")+".js";s=dojo._loadPath(i,null,function(z){var y=function(){};y.prototype=q;r[w]=new y();for(var x in z){r[w][x]=z[x]}})}else{s=true}if(s&&r[w]){q=r[w];return true}else{r[w]=q}if(l){return true}})}if(l&&h!=d){r[h.replace(/-/g,"_")]=r[d.replace(/-/g,"_")]}};(function(){var a=djConfig.extraLocale;if(a){if(!a instanceof Array){a=[a]}var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(e,d,c,g){b(e,d,c,g);if(c){return}for(var f=0;f<a.length;f++){b(e,d,a[f],g)}}}})();dojo.i18n._searchLocalePath=function(a,g,d){a=dojo.i18n.normalizeLocale(a);var e=[];if(a.match(/ja|en/i)){e.push(a.split("-")[0])}else{e.push(false)}for(var b=e.length-1;b>=0;b--){var f=e[b]||"ROOT";var c=d(f);if(c){break}}};dojo.i18n._preloadLocalizations=function(e,b){function c(f){f=dojo.i18n.normalizeLocale(f);dojo.i18n._searchLocalePath(f,true,function(h){for(var g=0;g<b.length;g++){if(b[g]==h){dojo.require(e+"_"+h);return true}}return false})}c();var a=djConfig.extraLocale||[];for(var d=0;d<a.length;d++){c(a[d])}}}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(a){var b={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,gb:0,sy:4};var c=dojo.cldr.supplemental._region(a);var d=b[c];return(typeof d=="undefined")?1:d};dojo.cldr.supplemental._region=function(a){a=dojo.i18n.normalizeLocale(a);var b=a.split("-");var c=b[1];if(!c){c={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[b[0]]}else{if(c.length==4){c=b[2]}}return c};dojo.cldr.supplemental.getWeekend=function(b){var d={eg:5,il:5,sy:5,"in":0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4};var a={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6};var e=dojo.cldr.supplemental._region(b);var f=d[e];var c=a[e];if(typeof f=="undefined"){f=6}if(typeof c=="undefined"){c=0}return{start:f,end:c}}}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(b,a){return b.replace(/([\.$?*!=:|{}\(\)\[\]\\\/^])/g,function(c){if(a&&a.indexOf(c)!=-1){return c}return"\\"+c})};dojo.regexp.buildGroupRE=function(c,f,e){if(!(c instanceof Array)){return f(c)}var a=[];for(var d=0;d<c.length;d++){a.push(f(c[d]))}return dojo.regexp.group(a.join("|"),e)};dojo.regexp.group=function(b,a){return"("+(a?"?:":"")+b+")"}}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.pad=function(e,c,d,a){var b=String(e);if(!d){d="0"}while(b.length<c){if(a){b+=d}else{b=d+b}}return b};dojo.string.substitute=function(c,d,b,a){return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,f,h){var g=dojo.getObject(f,false,d);if(h){g=dojo.getObject(h,false,a)(g)}if(b){g=b(g,f)}return g.toString()})};dojo.string.trim=function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(e,b){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/}var c=dojo.date.stamp._isoRegExp.exec(e);var a=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1000);if(b){b=new Date(b);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(g){return b["get"+g]()}).forEach(function(h,g){if(c[g]===undefined){c[g]=h}})}a=new Date(c[0]||1970,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0);var f=0;var d=c[7]&&c[7].charAt(0);if(d!="Z"){f=((c[8]||0)*60)+(Number(c[9])||0);if(d!="-"){f*=-1}}if(d){f-=a.getTimezoneOffset()}if(f){a.setTime(a.getTime()+f*60000)}}return a};dojo.date.stamp.toISOString=function(f,j){var i=function(k){return(k<10)?"0"+k:k};j=j||{};var e=[];var g=j.zulu?"getUTC":"get";var c="";if(j.selector!="time"){c=[f[g+"FullYear"](),i(f[g+"Month"]()+1),i(f[g+"Date"]())].join("-")}e.push(c);if(j.selector!="date"){var b=[i(f[g+"Hours"]()),i(f[g+"Minutes"]()),i(f[g+"Seconds"]())].join(":");var a=f[g+"Milliseconds"]();if(j.milliseconds){b+="."+(a<100?"0":"")+i(a)}if(j.zulu){b+="Z"}else{if(j.selector!="time"){var h=f.getTimezoneOffset();var d=Math.abs(h);b+=(h>0?"-":"+")+i(Math.floor(d/60))+":"+i(d%60)}}e.push(b)}return e.join("T")}}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var f=dojo;function a(d){if(f.isString(d)){return"string"}if(typeof d=="number"){return"number"}if(typeof d=="boolean"){return"boolean"}if(f.isFunction(d)){return"function"}if(f.isArray(d)){return"array"}if(d instanceof Date){return"date"}if(d instanceof f._Url){return"url"}return"object"}function b(g,d){switch(d){case"string":return g;case"number":return g.length?Number(g):NaN;case"boolean":return typeof g=="boolean"?g:!(g.toLowerCase()=="false");case"function":if(f.isFunction(g)){g=g.toString();g=f.trim(g.substring(g.indexOf("{")+1,g.length-1))}try{if(g.search(/[^\w\.]+/i)!=-1){g=f.parser._nameAnonFunc(new Function(g),this)}return f.getObject(g,false)}catch(h){return new Function()}case"array":return g.split(/\s*,\s*/);case"date":switch(g){case"":return new Date("");case"now":return new Date();default:return f.date.stamp.fromISOString(g)}case"url":return f.baseUrl+g;default:return f.fromJson(g)}}var e={};function c(h){if(!e[h]){var d=f.getObject(h);if(!f.isFunction(d)){throw new Error("Could not load class '"+h+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?")}var i=d.prototype;var k={};for(var g in i){if(g.charAt(0)=="_"){continue}var j=i[g];k[g]=a(j)}e[h]={cls:d,params:k}}return e[h]}this._functionFromScript=function(g){var h="";var j="";var d=g.getAttribute("args");if(d){f.forEach(d.split(/\s*,\s*/),function(l,k){h+="var "+l+" = arguments["+k+"]; "})}var i=g.getAttribute("with");if(i&&i.length){f.forEach(i.split(/\s*,\s*/),function(k){h+="with("+k+"){";j+="}"})}return new Function(h+g.innerHTML+j)};this.instantiate=function(d){var g=[];f.forEach(d,function(j){if(!j){return}var r=j.getAttribute("dojoType");if((!r)||(!r.length)){return}var o=c(r);var p=o.cls;var h=p._noScript||p.prototype._noScript;var k={};var m=j.attributes;for(var i in o.params){var v=m.getNamedItem(i);if(!v||(!v.specified&&(!dojo.isIE||i.toLowerCase()!="value"))){continue}var t=v.value;switch(i){case"class":t=j.className;break;case"style":t=j.style&&j.style.cssText}var n=o.params[i];k[i]=b(t,n)}if(!h){var l=[],w=[];f.query("> script[type^='dojo/']",j).orphan().forEach(function(x){var z=x.getAttribute("event"),y=x.getAttribute("type"),A=f.parser._functionFromScript(x);if(z){if(y=="dojo/connect"){l.push({event:z,func:A})}else{k[z]=A}}else{w.push(A)}})}var s=p.markupFactory;if(!s&&p.prototype){s=p.prototype.markupFactory}var u=s?s(k,j,p):new p(k,j);g.push(u);var q=j.getAttribute("jsId");if(q){f.setObject(q,u)}if(!h){dojo.forEach(l,function(x){dojo.connect(u,x.event,null,x.func)});dojo.forEach(w,function(x){x.call(u)})}});f.forEach(g,function(h){if(h&&(h.startup)&&((!h.getParent)||(!h.getParent()))){h.startup()}});return g};this.parse=function(d){var g=f.query("[dojoType]",d);var h=this.instantiate(g);return h}}();(function(){var a=function(){if(djConfig.parseOnLoad==true){dojo.parser.parse()}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,a)}else{dojo._loaders.unshift(a)}})();dojo.parser._anonCtr=0;dojo.parser._anon={};dojo.parser._nameAnonFunc=function(a,e){var d="$joinpoint";var c=(e||dojo.parser._anon);if(dojo.isIE){var f=a.__dojoNameCache;if(f&&c[f]===a){return a.__dojoNameCache}}var b="__"+dojo.parser._anonCtr++;while(typeof c[b]!="undefined"){b="__"+dojo.parser._anonCtr++}c[b]=a;return b}}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.requireLocalization("dojo.cldr","gregorian",null,"ko,zh-cn,zh,ja,en,it-it,en-ca,en-au,it,en-gb,es-es,fr,pt,ROOT,ko-kr,es,de,pt-br");(function(){function b(e,d,f){return f.replace(/([a-z])\1*/ig,function(w){var A;var z=w.charAt(0);var q=w.length;var n;var o=["abbr","wide","narrow"];switch(z){case"G":A=d[(q<4)?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":A=e.getFullYear();switch(q){case 1:break;case 2:A=String(A);A=A.substr(A.length-2);break;default:n=true}break;case"Q":case"q":A=Math.ceil((e.getMonth()+1)/3);n=true;break;case"M":case"L":var p=e.getMonth();var j;switch(q){case 1:case 2:A=p+1;n=true;break;case 3:case 4:case 5:j=o[q-3];break}if(j){var y=(z=="L")?"standalone":"format";var i=["months",y,j].join("-");A=d[i][p]}break;case"w":var g=0;A=dojo.date.locale._getWeekOfYear(e,g);n=true;break;case"d":A=e.getDate();n=true;break;case"D":A=dojo.date.locale._getDayOfYear(e);n=true;break;case"E":case"e":case"c":var x=e.getDay();var j;switch(q){case 1:case 2:if(z=="e"){var v=dojo.cldr.supplemental.getFirstDayOfWeek(options.locale);x=(x-v+7)%7}if(z!="c"){A=x+1;n=true;break}case 3:case 4:case 5:j=o[q-3];break}if(j){var y=(z=="c")?"standalone":"format";var i=["days",y,j].join("-");A=d[i][x]}break;case"a":var k=(e.getHours()<12)?"am":"pm";A=d[k];break;case"h":case"H":case"K":case"k":var u=e.getHours();switch(z){case"h":A=(u%12)||12;break;case"H":A=u;break;case"K":A=(u%12);break;case"k":A=u||24;break}n=true;break;case"m":A=e.getMinutes();n=true;break;case"s":A=e.getSeconds();n=true;break;case"S":A=Math.round(e.getMilliseconds()*Math.pow(10,q-3));break;case"v":case"z":A=dojo.date.getTimezoneName(e);if(A){break}q=4;case"Z":var t=e.getTimezoneOffset();var r=[(t<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(t)/60),2),dojo.string.pad(Math.abs(t)%60,2)];if(q==4){r.splice(0,0,"GMT");r.splice(3,0,":")}A=r.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+f)}if(n){A=dojo.string.pad(A,q)}return A})}dojo.date.locale.format=function(f,l){l=l||{};var i=dojo.i18n.normalizeLocale(l.locale);var m=l.formatLength||"short";var n=dojo.date.locale._getGregorianBundle(i);var g=[];var e=dojo.hitch(this,b,f,n);if(l.selector=="year"){var h=f.getFullYear();if(i.match(/^zh|^ja/)){h+="\u5E74"}return h}if(l.selector!="time"){var d=l.datePattern||n["dateFormat-"+m];if(d){g.push(c(d,e))}}if(l.selector!="date"){var k=l.timePattern||n["timeFormat-"+m];if(k){g.push(c(k,e))}}var j=g.join(" ");return j};dojo.date.locale.regexp=function(d){return dojo.date.locale._parseInfo(d).regexp};dojo.date.locale._parseInfo=function(i){i=i||{};var g=dojo.i18n.normalizeLocale(i.locale);var k=dojo.date.locale._getGregorianBundle(g);var j=i.formatLength||"short";var d=i.datePattern||k["dateFormat-"+j];var l=i.timePattern||k["timeFormat-"+j];var e;if(i.selector=="date"){e=d}else{if(i.selector=="time"){e=l}else{e=d+" "+l}}var f=[];var h=c(e,dojo.hitch(this,a,f,k,i));return{regexp:h,tokens:f,bundle:k}};dojo.date.locale.parse=function(k,n){var d=dojo.date.locale._parseInfo(n);var h=d.tokens,o=d.bundle;var l=new RegExp("^"+d.regexp+"$");var f=l.exec(k);if(!f){return null}var e=["abbr","wide","narrow"];var m=new Date(1972,0);var g={};var j="";dojo.forEach(f,function(C,w){if(!w){return}var s=h[w-1];var t=s.length;switch(s.charAt(0)){case"y":if(t!=2){m.setFullYear(C);g.year=C}else{if(C<100){C=Number(C);var B=""+new Date().getFullYear();var u=B.substring(0,2)*100;var y=Number(B.substring(2,4));var q=Math.min(y+20,99);var x=(C<q)?u+C:u-100+C;m.setFullYear(x);g.year=x}else{if(n.strict){return null}m.setFullYear(C);g.year=C}}break;case"M":if(t>2){var p=o["months-format-"+e[t-3]].concat();if(!n.strict){C=C.replace(".","").toLowerCase();p=dojo.map(p,function(v){return v.replace(".","").toLowerCase()})}C=dojo.indexOf(p,C);if(C==-1){return null}}else{C--}m.setMonth(C);g.month=C;break;case"E":case"e":var D=o["days-format-"+e[t-3]].concat();if(!n.strict){C=C.toLowerCase();D=dojo.map(D,"".toLowerCase)}C=dojo.indexOf(D,C);if(C==-1){return null}break;case"d":m.setDate(C);g.date=C;break;case"D":m.setMonth(0);m.setDate(C);break;case"a":var z=n.am||o.am;var r=n.pm||o.pm;if(!n.strict){var A=/\./g;C=C.replace(A,"").toLowerCase();z=z.replace(A,"").toLowerCase();r=r.replace(A,"").toLowerCase()}if(n.strict&&C!=z&&C!=r){return null}j=(C==r)?"p":(C==z)?"a":"";break;case"K":if(C==24){C=0}case"h":case"H":case"k":if(C>23){return null}m.setHours(C);break;case"m":m.setMinutes(C);break;case"s":m.setSeconds(C);break;case"S":m.setMilliseconds(C)}});var i=m.getHours();if(j==="p"&&i<12){m.setHours(i+12)}else{if(j==="a"&&i==12){m.setHours(0)}}if(g.year&&m.getFullYear()!=g.year){return null}if(g.month&&m.getMonth()!=g.month){return null}if(g.date&&m.getDate()!=g.date){return null}return m};function c(h,d,j,g){var e=function(k){return k};d=d||e;j=j||e;g=g||e;var i=h.match(/(''|[^'])+/g);var f=false;dojo.forEach(i,function(k,l){if(!k){i[l]=""}else{i[l]=(f?j:d)(k);f=!f}});return g(i.join(""))}function a(g,d,e,f){f=dojo.regexp.escapeString(f);if(!e.strict){f=f.replace(" a"," ?a")}return f.replace(/([a-z])\1*/ig,function(i){var k;var p=i.charAt(0);var h=i.length;var o="",n="";if(e.strict){if(h>1){o="0{"+(h-1)+"}"}if(h>2){n="0{"+(h-2)+"}"}}else{o="0?";n="0{0,2}"}switch(p){case"y":k="\\d{2,4}";break;case"M":k=(h>2)?"\\S+":o+"[1-9]|1[0-2]";break;case"D":k=o+"[1-9]|"+n+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case"d":k=o+"[1-9]|[12]\\d|3[01]";break;case"w":k=o+"[1-9]|[1-4][0-9]|5[0-3]";break;case"E":k="\\S+";break;case"h":k=o+"[1-9]|1[0-2]";break;case"k":k=o+"\\d|1[01]";break;case"H":k=o+"\\d|1\\d|2[0-3]";break;case"K":k=o+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":k="[0-5]\\d";break;case"S":k="\\d{"+h+"}";break;case"a":var m=e.am||d.am||"AM";var j=e.pm||d.pm||"PM";if(e.strict){k=m+"|"+j}else{k=m+"|"+j;if(m!=m.toLowerCase()){k+="|"+m.toLowerCase()}if(j!=j.toLowerCase()){k+="|"+j.toLowerCase()}}break;default:k=".*"}if(g){g.push(i)}return"("+k+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}})();(function(){var a=[];dojo.date.locale.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};dojo.date.locale._getGregorianBundle=function(b){var c={};dojo.forEach(a,function(e){var d=dojo.i18n.getLocalization(e.pkg,e.name,b);c=dojo.mixin(c,d)},this);return c}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(f,e,b,a){var c;var g=dojo.date.locale._getGregorianBundle(a);var d=[f,b,e];if(b=="standAlone"){c=g[d.join("-")]}d[1]="format";return(c||g[d.join("-")]).concat()};dojo.date.locale.isWeekend=function(d,a){var c=dojo.cldr.supplemental.getWeekend(a);var b=(d||new Date()).getDay();if(c.end<c.start){c.end+=7;if(b<c.start){b+=7}}return b>=c.start&&b<=c.end};dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1),a)+1};dojo.date.locale._getWeekOfYear=function(e,b){if(arguments.length==1){b=0}var c=new Date(e.getFullYear(),0,1).getDay();var a=(c-b+7)%7;var d=Math.floor((dojo.date.locale._getDayOfYear(e)+a-1)/7);if(c==b){d++}return d}}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.dnd.getViewport=function(){var f=dojo.doc,c=f.documentElement,e=window,a=dojo.body();if(dojo.isMozilla){return{w:c.clientWidth,h:e.innerHeight}}else{if(!dojo.isOpera&&e.innerWidth){return{w:e.innerWidth,h:e.innerHeight}}else{if(!dojo.isOpera&&c&&c.clientWidth){return{w:c.clientWidth,h:c.clientHeight}}else{if(a.clientWidth){return{w:a.clientWidth,h:a.clientHeight}}}}}return null};dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(d){var c=dojo.dnd.getViewport(),b=0,a=0;if(d.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){b=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(d.clientX>c.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){b=dojo.dnd.H_AUTOSCROLL_VALUE}}if(d.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){a=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(d.clientY>c.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){a=dojo.dnd.V_AUTOSCROLL_VALUE}}window.scrollBy(b,a)};dojo.dnd._validNodes={div:1,p:1,td:1};dojo.dnd._validOverflow={auto:1,scroll:1};dojo.dnd.autoScrollNodes=function(j){for(var d=j.target;d;){if(d.nodeType==1&&(d.tagName.toLowerCase() in dojo.dnd._validNodes)){var r=dojo.getComputedStyle(d);if(r.overflow.toLowerCase() in dojo.dnd._validOverflow){var k=dojo._getContentBox(d,r),p=dojo._abs(d,true);k.l+=p.x+d.scrollLeft;k.t+=p.y+d.scrollTop;var m=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,k.w/2),i=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,k.h/2),c=j.pageX-k.l,a=j.pageY-k.t,q=0,o=0;if(c>0&&c<k.w){if(c<m){q=-dojo.dnd.H_AUTOSCROLL_VALUE}else{if(c>k.w-m){q=dojo.dnd.H_AUTOSCROLL_VALUE}}}if(a>0&&a<k.h){if(a<i){o=-dojo.dnd.V_AUTOSCROLL_VALUE}else{if(a>k.h-i){o=dojo.dnd.V_AUTOSCROLL_VALUE}}}var f=d.scrollLeft,g=d.scrollTop;d.scrollLeft=d.scrollLeft+q;d.scrollTop=d.scrollTop+o;if(f!=d.scrollLeft||g!=d.scrollTop){return}}}try{d=d.parentNode}catch(l){d=null}}dojo.dnd.autoScroll(j)}}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.dnd._copyKey=navigator.appVersion.indexOf("Macintosh")<0?"ctrlKey":"metaKey";dojo.dnd.getCopyKeyState=function(a){return a[dojo.dnd._copyKey]};dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var a;do{a="dojoUnique"+(++dojo.dnd._uniqueId)}while(dojo.byId(a));return a};dojo.dnd._empty={};dojo.dnd.isFormElement=function(b){var a=b.target;if(a.nodeType==3){a=a.parentNode}return" button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")>=0}}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(a,b){this.node=dojo.byId(a);if(!b){b={}}this.creator=b.creator||null;this.skipForm=b.skipForm;this.defaultCreator=dojo.dnd._defaultCreator(this.node);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(b&&b._skipStartup)){this.startup()}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")]},creator:function(){},getItem:function(a){return this.map[a]},setItem:function(a,b){this.map[a]=b},delItem:function(a){delete this.map[a]},forInItems:function(c,g){g=g||dojo.global;var a=this.map,d=dojo.dnd._empty;for(var b in this.map){if(b in d){continue}c.call(g,a[b],b,a)}},clearItems:function(){this.map={}},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent)},insertNodes:function(e,d,a){if(!this.parent.firstChild){a=null}else{if(d){if(!a){a=this.parent.firstChild}}else{if(a){a=a.nextSibling}}}if(a){for(var c=0;c<e.length;++c){var b=this._normalizedCreator(e[c]);this.setItem(b.node.id,{data:b.data,type:b.type});this.parent.insertBefore(b.node,a)}}else{for(var c=0;c<e.length;++c){var b=this._normalizedCreator(e[c]);this.setItem(b.node.id,{data:b.data,type:b.type});this.parent.appendChild(b.node)}}return this},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.Container(a,b)},startup:function(){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var a=this.parent.getElementsByTagName("tbody");if(a&&a.length){this.parent=a[0]}}dojo.query("> .dojoDndItem",this.parent).forEach(function(c){if(!c.id){c.id=dojo.dnd.getUniqueId()}var b=c.getAttribute("dndType"),d=c.getAttribute("dndData");this.setItem(c.id,{data:d?d:c.innerHTML,type:b?b.split(/\s*,\s*/):["text"]})},this)},onMouseOver:function(b){var c=b.relatedTarget;while(c){if(c==this.node){break}try{c=c.parentNode}catch(a){c=null}}if(!c){this._changeState("Container","Over");this.onOverEvent()}c=this._getChildByEvent(b);if(this.current==c){return}if(this.current){this._removeItemClass(this.current,"Over")}if(c){this._addItemClass(c,"Over")}this.current=c},onMouseOut:function(b){for(var c=b.relatedTarget;c;){if(c==this.node){return}try{c=c.parentNode}catch(a){c=null}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null}this._changeState("Container","");this.onOutEvent()},onSelectStart:function(a){if(!this.skipForm||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(a,d){var c="dojoDnd"+a;var b=a.toLowerCase()+"State";dojo.removeClass(this.node,c+this[b]);dojo.addClass(this.node,c+d);this[b]=d},_addItemClass:function(b,a){dojo.addClass(b,"dojoDndItem"+a)},_removeItemClass:function(b,a){dojo.removeClass(b,"dojoDndItem"+a)},_getChildByEvent:function(c){var b=c.target;if(b){for(var a=b.parentNode;a;b=a,a=b.parentNode){if(a==this.parent&&dojo.hasClass(b,"dojoDndItem")){return b}}}return null},_normalizedCreator:function(b,c){var a=(this.creator?this.creator:this.defaultCreator)(b,c);if(!dojo.isArray(a.type)){a.type=["text"]}if(!a.node.id){a.node.id=dojo.dnd.getUniqueId()}dojo.addClass(a.node,"dojoDndItem");return a}});dojo.dnd._createNode=function(a){if(!a){return dojo.dnd._createSpan}return function(b){var c=dojo.doc.createElement(a);c.innerHTML=b;return c}};dojo.dnd._createTrTd=function(b){var a=dojo.doc.createElement("tr");var c=dojo.doc.createElement("td");c.innerHTML=b;a.appendChild(c);return a};dojo.dnd._createSpan=function(a){var b=dojo.doc.createElement("span");b.innerHTML=a;return b};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(b){var a=b.tagName.toLowerCase();var d=a=="table"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[a]);return function(g,i){var c=dojo.isObject(g)&&g;var h=(c&&g.data)?g.data:g;var f=(c&&g.type)?g.type:["text"];var e=String(h),j=(i=="avatar"?dojo.dnd._createSpan:d)(e);j.id=dojo.dnd.getUniqueId();return{node:j,data:h,type:f}}}}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(a,b){if(!b){b={}}this.singular=b.singular;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"))},singular:false,getSelectedNodes:function(){var b=new dojo.NodeList();var c=dojo.dnd._empty;for(var a in this.selection){if(a in c){continue}b.push(dojo.byId(a))}return b},selectNone:function(){return this._removeSelection()._removeAnchor()},selectAll:function(){this.forInItems(function(a,b){this._addItemClass(dojo.byId(b),"Selected");this.selection[b]=1},this);return this._removeAnchor()},deleteSelectedNodes:function(){var b=dojo.dnd._empty;for(var a in this.selection){if(a in b){continue}var c=dojo.byId(a);this.delItem(a);dojo._destroyElement(c)}this.anchor=null;this.selection={};return this},insertNodes:function(a,e,d,b){var c=this._normalizedCreator;this._normalizedCreator=function(g,h){var f=c.call(this,g,h);if(a){if(!this.anchor){this.anchor=f.node;this._removeItemClass(f.node,"Selected");this._addItemClass(this.anchor,"Anchor")}else{if(this.anchor!=f.node){this._removeItemClass(f.node,"Anchor");this._addItemClass(f.node,"Selected")}}this.selection[f.node.id]=1}else{this._removeItemClass(f.node,"Selected");this._removeItemClass(f.node,"Anchor")}return f};dojo.dnd.Selector.superclass.insertNodes.call(this,e,d,b);this._normalizedCreator=c;return this},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.Selector(a,b)},onMouseDown:function(d){if(!this.current){return}if(!this.singular&&!dojo.dnd.getCopyKeyState(d)&&!d.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;dojo.stopEvent(d);return}if(!this.singular&&d.shiftKey){if(!dojo.dnd.getCopyKeyState(d)){this._removeSelection()}var f=dojo.query("> .dojoDndItem",this.parent);if(f.length){if(!this.anchor){this.anchor=f[0];this._addItemClass(this.anchor,"Anchor")}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var a=0;for(;a<f.length;++a){var b=f[a];if(b==this.anchor||b==this.current){break}}for(++a;a<f.length;++a){var b=f[a];if(b==this.anchor||b==this.current){break}this._addItemClass(b,"Selected");this.selection[b.id]=1}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.dnd.getCopyKeyState(d)){this.selectNone()}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}}else{if(dojo.dnd.getCopyKeyState(d)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor()}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id]}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected")}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1}}}}dojo.stopEvent(d)},onMouseUp:function(a){if(!this.simpleSelection){return}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1}},onMouseMove:function(a){this.simpleSelection=false},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove")},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent},_removeSelection:function(){var c=dojo.dnd._empty;for(var a in this.selection){if(a in c){continue}var b=dojo.byId(a);if(b){this._removeItemClass(b,"Selected")}}this.selection={};return this},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null}return this}})}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.dnd.Avatar=function(a){this.manager=a;this.construct()};dojo.extend(dojo.dnd.Avatar,{construct:function(){var d=dojo.doc.createElement("table");d.className="dojoDndAvatar";d.style.position="absolute";d.style.zIndex=1999;d.style.margin="0px";var c=dojo.doc.createElement("tbody");var j=dojo.doc.createElement("tr");j.className="dojoDndAvatarHeader";var l=dojo.doc.createElement("td");l.innerHTML=this._generateText();j.appendChild(l);dojo.style(j,"opacity",0.9);c.appendChild(j);var e=Math.min(5,this.manager.nodes.length);var h=this.manager.source;for(var f=0;f<e;++f){j=dojo.doc.createElement("tr");j.className="dojoDndAvatarItem";l=dojo.doc.createElement("td");var g=h.creator?g=h._normalizedCreator(h.getItem(this.manager.nodes[f].id).data,"avatar").node:g=this.manager.nodes[f].cloneNode(true);g.id="";g.style.width=(this.manager.nodes[f].clientWidth||this.manager.nodes[f].offsetWidth)+"px";g.style.height="auto";l.appendChild(g);j.appendChild(l);dojo.style(j,"opacity",(9-f)/10);c.appendChild(j)}d.appendChild(c);this.node=d},destroy:function(){dojo._destroyElement(this.node);this.node=false},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");var b=this.node.getElementsByTagName("td");for(var a=0;a<b.length;++a){var c=b[a];if(dojo.hasClass(c.parentNode,"dojoDndAvatarHeader")){c.innerHTML=this._generateText();break}}},_generateText:function(){return this.manager.nodes.length.toString()}})}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.dnd.Manager=function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[]};dojo.extend(dojo.dnd.Manager,{OFFSET_X:-10,OFFSET_Y:5,overSource:function(a){if(this.avatar){this.target=(a&&a.targetState!="Disabled")?a:null;this.avatar.update()}dojo.publish("/dnd/source/over",[a])},outSource:function(a){if(this.avatar){if(this.target==a){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null])}}else{dojo.publish("/dnd/source/over",[null])}},startDrag:function(b,a,e){this.source=b;this.nodes=a;this.copy=Boolean(e);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[b,a,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp")];var d="dojoDnd"+(e?"Copy":"Move");dojo.addClass(dojo.body(),d)},canDrop:function(a){var b=this.target&&a;if(this.canDropFlag!=b){this.canDropFlag=b;this.avatar.update()}},stopDrag:function(){dojo.removeClass(dojo.body(),"dojoDndCopy");dojo.removeClass(dojo.body(),"dojoDndMove");dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=null;this.nodes=[]},makeAvatar:function(){return new dojo.dnd.Avatar(this)},updateAvatar:function(){this.avatar.update()},onMouseMove:function(c){var b=this.avatar;if(b){dojo.dnd.autoScroll(c);dojo.marginBox(b.node,{l:c.pageX+this.OFFSET_X,t:c.pageY+this.OFFSET_Y});var d=Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(c)));if(this.copy!=d){this._setCopyStatus(d)}}},onMouseUp:function(a){if(this.avatar&&(!("mouseButton" in this.source)||this.source.mouseButton==a.button)){if(this.target&&this.canDropFlag){var b=[this.source,this.nodes,Boolean(this.source.copyState(dojo.dnd.getCopyKeyState(a))),this.target];dojo.publish("/dnd/drop/before",b);dojo.publish("/dnd/drop",b)}else{dojo.publish("/dnd/cancel")}this.stopDrag()}},onKeyDown:function(a){if(this.avatar){switch(a.keyCode){case dojo.keys.CTRL:var b=Boolean(this.source.copyState(true));if(this.copy!=b){this._setCopyStatus(b)}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break}}},onKeyUp:function(a){if(this.avatar&&a.keyCode==dojo.keys.CTRL){var b=Boolean(this.source.copyState(false));if(this.copy!=b){this._setCopyStatus(b)}}},_setCopyStatus:function(a){this.copy=a;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.removeClass(dojo.body(),"dojoDnd"+(this.copy?"Move":"Copy"));dojo.addClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"))}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager()}return dojo.dnd._manager}}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,skipForm:false,withHandles:false,accept:["text"],constructor:function(c,d){if(!d){d={}}this.isSource=typeof d.isSource=="undefined"?true:d.isSource;var b=d.accept instanceof Array?d.accept:["text"];this.accept=null;if(b.length){this.accept={};for(var a=0;a<b.length;++a){this.accept[b[a]]=1}}this.horizontal=d.horizontal;this.copyOnly=d.copyOnly;this.withHandles=d.withHandles;this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource")}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget")}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal")}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")]},checkAcceptance:function(f,b){if(this==f){return true}for(var d=0;d<b.length;++d){var e=f.getItem(b[d].id).type;var a=false;for(var c=0;c<e.length;++c){if(e[c] in this.accept){a=true;break}}if(!a){return false}}return true},copyState:function(a){return this.copyOnly||a},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.Source(a,b)},onMouseMove:function(d){if(this.isDragging&&this.targetState=="Disabled"){return}dojo.dnd.Source.superclass.onMouseMove.call(this,d);var a=dojo.dnd.manager();if(this.isDragging){var c=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox={xy:dojo.coords(this.current,true),w:this.current.offsetWidth,h:this.current.offsetHeight}}if(this.horizontal){c=(d.pageX-this.targetBox.xy.x)<(this.targetBox.w/2)}else{c=(d.pageY-this.targetBox.xy.y)<(this.targetBox.h/2)}}if(this.current!=this.targetAnchor||c!=this.before){this._markTargetAnchor(c);a.canDrop(!this.current||a.source!=this||!(this.current.id in this.selection))}}else{if(this.mouseDown&&this.isSource){var b=this.getSelectedNodes();if(b.length){a.startDrag(this,b,this.copyState(dojo.dnd.getCopyKeyState(d)))}}}},onMouseDown:function(a){if(this._legalMouseDown(a)&&(!this.skipForm||!dojo.dnd.isFormElement(a))){this.mouseDown=true;this.mouseButton=a.button;dojo.dnd.Source.superclass.onMouseDown.call(this,a)}},onMouseUp:function(a){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,a)}},onDndSourceOver:function(b){if(this!=b){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor()}}else{if(this.isDragging){var a=dojo.dnd.manager();a.canDrop(this.targetState!="Disabled"&&(!this.current||a.source!=this||!(this.current.id in this.selection)))}}},onDndStart:function(b,a,d){if(this.isSource){this._changeState("Source",this==b?(d?"Copied":"Moved"):"")}var c=this.accept&&this.checkAcceptance(b,a);this._changeState("Target",c?"":"Disabled");if(c&&this==b){dojo.dnd.manager().overSource(this)}this.isDragging=true},onDndDrop:function(c,a,d){do{if(this.containerState!="Over"){break}var b=this._normalizedCreator;if(this!=c){if(this.creator){this._normalizedCreator=function(e,f){return b.call(this,c.getItem(e.id).data,f)}}else{if(d){this._normalizedCreator=function(f,g){var e=c.getItem(f.id);var h=f.cloneNode(true);h.id=dojo.dnd.getUniqueId();return{node:h,data:e.data,type:e.type}}}else{this._normalizedCreator=function(f,g){var e=c.getItem(f.id);c.delItem(f.id);return{node:f,data:e.data,type:e.type}}}}}else{if(this.current&&this.current.id in this.selection){break}if(this.creator){if(d){this._normalizedCreator=function(e,f){return b.call(this,c.getItem(e.id).data,f)}}else{if(!this.current){break}this._normalizedCreator=function(f,g){var e=c.getItem(f.id);return{node:f,data:e.data,type:e.type}}}}else{if(d){this._normalizedCreator=function(f,g){var e=c.getItem(f.id);var h=f.cloneNode(true);h.id=dojo.dnd.getUniqueId();return{node:h,data:e.data,type:e.type}}}else{if(!this.current){break}this._normalizedCreator=function(f,g){var e=c.getItem(f.id);return{node:f,data:e.data,type:e.type}}}}}this._removeSelection();if(this!=c){this._removeAnchor()}if(this!=c&&!d&&!this.creator){c.selectNone()}this.insertNodes(true,a,this.before,this.current);if(this!=c&&!d&&this.creator){c.deleteSelectedNodes()}this._normalizedCreator=b}while(false);this.onDndCancel()},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null}this.before=true;this.isDragging=false;this.mouseDown=false;delete this.mouseButton;this._changeState("Source","");this._changeState("Target","")},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this)},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this)},_markTargetAnchor:function(a){if(this.current==this.targetAnchor&&this.before==a){return}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After")}this.targetAnchor=this.current;this.targetBox=null;this.before=a;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After")}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true},_markDndStatus:function(a){this._changeState("Source",a?"Copied":"Moved")},_legalMouseDown:function(d){if(!this.withHandles){return true}for(var c=d.target;c&&!dojo.hasClass(c,"dojoDndItem");c=c.parentNode){if(dojo.hasClass(c,"dojoDndHandle")){var b=d;if(!b){b=window.event}var f={x:b.clientX,y:b.clientY};var a=false;dojo.query("a",c).forEach(function(g){if(!a){var e=g.getBoundingClientRect();a=(e.left<=f.x&&f.x<=e.right&&e.top<=f.y&&f.y<=e.bottom)}});if(a){return false}return true}}return false}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(a,b){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource")},markupFactory:function(b,a){b._skipStartup=true;return new dojo.dnd.Target(a,b)}})}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(f,g,c){this.node=dojo.byId(f);this.marginBox={l:g.pageX,t:g.pageY};this.mouseButton=g.button;var b=this.host=c,i=f.ownerDocument,a=dojo.connect(i,"onmousemove",this,"onFirstMove");this.events=[dojo.connect(i,"onmousemove",this,"onMouseMove"),dojo.connect(i,"onmouseup",this,"onMouseUp"),dojo.connect(i,"ondragstart",dojo,"stopEvent"),dojo.connect(i,"onselectstart",dojo,"stopEvent"),a];if(b&&b.onMoveStart){b.onMoveStart(this)}},onMouseMove:function(b){dojo.dnd.autoScroll(b);var a=this.marginBox;this.host.onMove(this,{l:a.l+b.pageX,t:a.t+b.pageY})},onMouseUp:function(a){if(this.mouseButton==a.button){this.destroy()}},onFirstMove:function(){this.node.style.position="absolute";var a=dojo.marginBox(this.node);a.l-=this.marginBox.l;a.t-=this.marginBox.t;this.marginBox=a;this.host.onFirstMove(this);dojo.disconnect(this.events.pop())},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var a=this.host;if(a&&a.onMoveStop){a.onMoveStop(this)}this.events=this.node=null}})}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(a,b){this.node=dojo.byId(a);if(!b){b={}}this.handle=b.handle?dojo.byId(b.handle):null;if(!this.handle){this.handle=this.node}this.delay=b.delay>0?b.delay:0;this.skip=b.skip;this.mover=b.mover?b.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")]},markupFactory:function(b,a){return new dojo.dnd.Moveable(a,b)},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null},onMouseDown:function(a){if(this.skip&&dojo.dnd.isFormElement(a)){return}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"));this.events.push(dojo.connect(this.handle,"onmouseup",this,"onMouseUp"));this._lastX=a.pageX;this._lastY=a.pageY}else{new this.mover(this.node,a,this)}dojo.stopEvent(a)},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay){this.onMouseUp(a);new this.mover(this.node,a,this)}dojo.stopEvent(a)},onMouseUp:function(a){dojo.disconnect(this.events.pop());dojo.disconnect(this.events.pop())},onSelectStart:function(a){if(!this.skip||!dojo.dnd.isFormElement(a)){dojo.stopEvent(a)}},onMoveStart:function(a){dojo.publish("/dnd/move/start",[a]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem")},onMoveStop:function(a){dojo.publish("/dnd/move/stop",[a]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem")},onFirstMove:function(a){},onMove:function(b,a){this.onMoving(b,a);dojo.marginBox(b.node,a);this.onMoved(b,a)},onMoving:function(b,a){},onMoved:function(b,a){}})}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(b,a){return new dojo.dnd.move.constrainedMoveable(a,b)},constructor:function(a,b){if(!b){b={}}this.constraints=b.constraints;this.within=b.within},onFirstMove:function(b){var d=this.constraintBox=this.constraints.call(this,b),a=b.marginBox;d.r=d.l+d.w-(this.within?a.w:0);d.b=d.t+d.h-(this.within?a.h:0)},onMove:function(b,a){var d=this.constraintBox;a.l=a.l<d.l?d.l:d.r<a.l?d.r:a.l;a.t=a.t<d.t?d.t:d.b<a.t?d.b:a.t;dojo.marginBox(b.node,a)}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(b,a){return new dojo.dnd.move.boxConstrainedMoveable(a,b)},constructor:function(b,c){var a=c&&c.box;this.constraints=function(){return a}}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(b,a){return new dojo.dnd.move.parentConstrainedMoveable(a,b)},constructor:function(b,c){var a=c&&c.area;this.constraints=function(){var g=this.node.parentNode,e=dojo.getComputedStyle(g),f=dojo._getMarginBox(g,e);if(a=="margin"){return f}var d=dojo._getMarginExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;if(a=="border"){return f}d=dojo._getBorderExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;if(a=="padding"){return f}d=dojo._getPadExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;return f}}});dojo.dnd.move.constrainedMover=function(a,c){var b=function(f,g,d){dojo.dnd.Mover.call(this,f,g,d)};dojo.extend(b,dojo.dnd.Mover.prototype);dojo.extend(b,{onMouseMove:function(h){dojo.dnd.autoScroll(h);var d=this.marginBox,i=this.constraintBox,f=d.l+h.pageX,g=d.t+h.pageY;f=f<i.l?i.l:i.r<f?i.r:f;g=g<i.t?i.t:i.b<g?i.b:g;this.host.onMove(this,{l:f,t:g})},onFirstMove:function(){dojo.dnd.Mover.prototype.onFirstMove.call(this);var e=this.constraintBox=a.call(this),d=this.marginBox;e.r=e.l+e.w-(c?d.w:0);e.b=e.t+e.h-(c?d.h:0)}});return b};dojo.dnd.move.boxConstrainedMover=function(b,a){return dojo.dnd.move.constrainedMover(function(){return b},a)};dojo.dnd.move.parentConstrainedMover=function(c,b){var a=function(){var g=this.node.parentNode,e=dojo.getComputedStyle(g),f=dojo._getMarginBox(g,e);if(c=="margin"){return f}var d=dojo._getMarginExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;if(c=="border"){return f}d=dojo._getBorderExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;if(c=="padding"){return f}d=dojo._getPadExtents(g,e);f.l+=d.l,f.t+=d.t,f.w-=d.w,f.h-=d.h;return f};return dojo.dnd.move.constrainedMover(a,b)};dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.io.iframe={create:function(fname,onloadstr,uri){if(window[fname]){return window[fname]}if(window.frames[fname]){return window.frames[fname]}var cframe=null;var turi=uri;if(!turi){if(djConfig.useXDomain&&!djConfig.dojoBlankHtmlUrl){console.debug("dojo.io.iframe.create: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl to the path on your domain to blank.html")}turi=(djConfig.dojoBlankHtmlUrl||dojo.moduleUrl("dojo","resources/blank.html"))}var ifrstr=dojo.isIE?'<iframe name="'+fname+'" src="'+turi+'" onload="'+onloadstr+'">':"iframe";cframe=dojo.doc.createElement(ifrstr);with(cframe){name=fname;setAttribute("name",fname);id=fname}dojo.body().appendChild(cframe);window[fname]=cframe;with(cframe.style){if(dojo.isSafari<3){position="absolute"}left=top="1px";height=width="1px";visibility="hidden"}if(!dojo.isIE){this.setSrc(cframe,turi,true);cframe.onload=new Function(onloadstr)}return cframe},setSrc:function(c,f,b){try{if(!b){if(dojo.isSafari){c.location=f}else{frames[c.name].location=f}}else{var a;if(dojo.isIE||dojo.isSafari>2){a=c.contentWindow.document}else{if(dojo.isSafari){a=c.document}else{a=c.contentWindow}}if(!a){c.location=f;return}else{a.location.replace(f)}}}catch(d){console.debug("dojo.io.iframe.setSrc: ",d)}},doc:function(a){var b=a.contentDocument||((a.contentWindow)&&(a.contentWindow.document))||((a.name)&&(document.frames[a.name])&&(document.frames[a.name].document))||null;return b},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,"dojo.io.iframe._iframeOnload();")}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext()},function(dfd){var value=null;try{var ioArgs=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var handleAs=ioArgs.handleAs;value=ifd;if(handleAs!="html"){value=ifd.getElementsByTagName("textarea")[0].value;if(handleAs=="json"){value=dojo.fromJson(value)}else{if(handleAs=="javascript"){value=dojo.eval(value)}}}}catch(e){value=e}finally{ioArgs._callNext()}return value},function(error,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return error});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest()}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs._hasError},function(dfd){return(!!dfd.ioArgs._finished)},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd)}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"))}});return dfd},_currentDfd:null,_dfdQueue:[],_iframeName:"dojoIoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return}var k=this._currentDfd=this._dfdQueue.shift();var c=k.ioArgs;var g=c.args;c._contentToClean=[];var h=g.form;var f=g.content||{};if(h){if(f){for(var i in f){if(!h[i]){var j;if(dojo.isIE){j=dojo.doc.createElement("<input type='hidden' name='"+i+"'>")}else{j=dojo.doc.createElement("input");j.type="hidden";j.name=i}j.value=f[i];h.appendChild(j);c._contentToClean.push(i)}else{h[i].value=f[i]}}}var m=h.getAttributeNode("action");var b=h.getAttributeNode("method");var a=h.getAttributeNode("target");if(g.url){c._originalAction=m?m.value:null;if(m){m.value=g.url}else{h.setAttribute("action",g.url)}}if(!b||!b.value){if(b){b.value=(g.method)?g.method:"post"}else{h.setAttribute("method",(g.method)?g.method:"post")}}c._originalTarget=a?a.value:null;if(a){a.value=this._iframeName}else{h.setAttribute("target",this._iframeName)}h.target=this._iframeName;h.submit()}else{var l=g.url+(g.url.indexOf("?")>-1?"&":"?")+c.query;this.setSrc(this._frame,l,true)}}catch(d){k.errback(d)}},_iframeOnload:function(){var h=this._currentDfd;if(!h){this._fireNextRequest();return}var d=h.ioArgs;var e=d.args;var f=e.form;if(f){var b=d._contentToClean;for(var c=0;c<b.length;c++){var g=b[c];if(dojo.isSafari<3){for(var a=0;a<f.childNodes.length;a++){var k=f.childNodes[a];if(k.name==g){dojo._destroyElement(k);break}}}else{dojo._destroyElement(f[g]);f[g]=null}}if(d._originalAction){f.setAttribute("action",d._originalAction)}if(d._originalTarget){f.setAttribute("target",d._originalTarget);f.target=d._originalTarget}}d._finished=true}}}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.data.util.filter.patternToRegExp=function(e,b){var a="^";var f=null;for(var d=0;d<e.length;d++){f=e.charAt(d);switch(f){case"\\":a+=f;d++;a+=e.charAt(d);break;case"*":a+=".*";break;case"?":a+=".";break;case"$":case"^":case"/":case"+":case".":case"|":case"(":case")":case"{":case"}":case"[":case"]":a+="\\";default:a+=f}}a+="$";if(b){return new RegExp(a,"i")}else{return new RegExp(a)}}}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.data.util.sorter.basicComparator=function(d,c){var e=0;if(d>c||typeof d==="undefined"||d===null){e=1}else{if(d<c||typeof c==="undefined"||c===null){e=-1}}return e};dojo.data.util.sorter.createSortFunction=function(d,b){var f=[];function a(g,h){return function(m,l){var k=b.getValue(m,g);var i=b.getValue(l,g);var j=null;if(b.comparatorMap){if(typeof g!=="string"){g=b.getIdentity(g)}j=b.comparatorMap[g]||dojo.data.util.sorter.basicComparator}j=j||dojo.data.util.sorter.basicComparator;return h*j(k,i)}}for(var c=0;c<d.length;c++){sortAttribute=d[c];if(sortAttribute.attribute){var e=(sortAttribute.descending)?-1:1;f.push(a(sortAttribute.attribute,e))}}return function(h,g){var k=0;while(k<f.length){var j=f[k++](h,g);if(j!==0){return j}}return 0}}}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.data.util.simpleFetch.fetch=function(d){d=d||{};if(!d.store){d.store=this}var b=this;var c=function(g,e){if(e.onError){var f=e.scope||dojo.global;e.onError.call(f,g,e)}};var a=function(j,k){var n=k.abort||null;var e=false;var l=k.start?k.start:0;var h=k.count?(l+k.count):j.length;k.abort=function(){e=true;if(n){n.call(k)}};var o=k.scope||dojo.global;if(!k.store){k.store=b}if(k.onBegin){k.onBegin.call(o,j.length,k)}if(k.sort){j.sort(dojo.data.util.sorter.createSortFunction(k.sort,b))}if(k.onItem){for(var g=l;(g<j.length)&&(g<h);++g){var m=j[g];if(!e){k.onItem.call(o,m,k)}}}if(k.onComplete&&!e){var f=null;if(!k.onItem){f=j.slice(l,h)}k.onComplete.call(o,f,k)}};this._fetchItems(d,a,c);return d}}if(!dojo._hasResource["dojo.data.ItemFileReadStore"]){dojo._hasResource["dojo.data.ItemFileReadStore"]=true;dojo.provide("dojo.data.ItemFileReadStore");dojo.declare("dojo.data.ItemFileReadStore",null,{constructor:function(a){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=a.url;this._jsonData=a.data;this._datatypeMap=a.typeMap||{};if(!this._datatypeMap.Date){this._datatypeMap.Date={type:Date,deserialize:function(b){return dojo.date.stamp.fromISOString(b)}}}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._loadInProgress=false;this._queuedFetches=[]},url:"",_assertIsItem:function(a){if(!this.isItem(a)){throw new Error("dojo.data.ItemFileReadStore: Invalid item argument.")}},_assertIsAttribute:function(a){if(typeof a!=="string"){throw new Error("dojo.data.ItemFileReadStore: Invalid attribute argument.")}},getValue:function(d,c,a){var b=this.getValues(d,c);return(b.length>0)?b[0]:a},getValues:function(b,a){this._assertIsItem(b);this._assertIsAttribute(a);return b[a]||[]},getAttributes:function(c){this._assertIsItem(c);var a=[];for(var b in c){if((b!==this._storeRefPropName)&&(b!==this._itemNumPropName)&&(b!==this._rootItemPropName)){a.push(b)}}return a},hasAttribute:function(b,a){return this.getValues(b,a).length>0},containsValue:function(b,a,d){var c=undefined;if(typeof d==="string"){c=dojo.data.util.filter.patternToRegExp(d,false)}return this._containsValue(b,a,d,c)},_containsValue:function(b,a,d,c){return dojo.some(this.getValues(b,a),function(e){if(e!==null&&!dojo.isObject(e)&&c){if(e.toString().match(c)){return true}}else{if(d===e){return true}}})},isItem:function(a){if(a&&a[this._storeRefPropName]===this){if(this._arrayOfAllItems[a[this._itemNumPropName]]===a){return true}}return false},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(a){this._assertIsItem(a.item)},getFeatures:function(){return this._features},getLabel:function(a){if(this._labelAttr&&this.isItem(a)){return this.getValue(a,this._labelAttr)}return undefined},getLabelAttributes:function(a){if(this._labelAttr){return[this._labelAttr]}return null},_fetchItems:function(c,i,b){var a=this;var d=function(l,o){var n=[];if(l.query){var m=l.queryOptions?l.queryOptions.ignoreCase:false;var q={};for(var r in l.query){var p=l.query[r];if(typeof p==="string"){q[r]=dojo.data.util.filter.patternToRegExp(p,m)}}for(var j=0;j<o.length;++j){var k=true;var e=o[j];if(e===null){k=false}else{for(var r in l.query){var p=l.query[r];if(!a._containsValue(e,r,p,q[r])){k=false}}}if(k){n.push(e)}}i(n,l)}else{for(var j=0;j<o.length;++j){var s=o[j];if(s!==null){n.push(s)}}i(n,l)}};if(this._loadFinished){d(c,this._getItemsArray(c.queryOptions))}else{if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:c,filter:d})}else{this._loadInProgress=true;var g={url:a._jsonFileUrl,handleAs:"json-comment-optional"};var f=dojo.xhrGet(g);f.addCallback(function(j){try{a._getItemsFromLoadedData(j);a._loadFinished=true;a._loadInProgress=false;d(c,a._getItemsArray(c.queryOptions));a._handleQueuedFetches()}catch(k){a._loadFinished=true;a._loadInProgress=false;b(k,c)}});f.addErrback(function(e){a._loadInProgress=false;b(e,c)})}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;d(c,this._getItemsArray(c.queryOptions))}catch(h){b(h,c)}}else{b(new Error("dojo.data.ItemFileReadStore: No JSON source data was provided as either URL or a nested Javascript object."),c)}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var c=0;c<this._queuedFetches.length;c++){var a=this._queuedFetches[c];var b=a.args;var d=a.filter;if(d){d(b,this._getItemsArray(b.queryOptions))}else{this.fetchItemByIdentity(b)}}this._queuedFetches=[]}},_getItemsArray:function(a){if(a&&a.deep){return this._arrayOfAllItems}return this._arrayOfTopLevelItems},close:function(a){},_getItemsFromLoadedData:function(e){function b(i){var j=((i!=null)&&(typeof i=="object")&&(!dojo.isArray(i))&&(!dojo.isFunction(i))&&(i.constructor==Object)&&(typeof i._reference=="undefined")&&(typeof i._type=="undefined")&&(typeof i._value=="undefined"));return j}var m=this;function u(A){m._arrayOfAllItems.push(A);for(var z in A){var y=A[z];if(y){if(dojo.isArray(y)){var x=y;for(var j=0;j<x.length;++j){var i=x[j];if(b(i)){u(i)}}}else{if(b(y)){u(y)}}}}}this._labelAttr=e.label;var r;var t;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=e.items;for(r=0;r<this._arrayOfTopLevelItems.length;++r){t=this._arrayOfTopLevelItems[r];u(t);t[this._rootItemPropName]=true}var o={};var v;for(r=0;r<this._arrayOfAllItems.length;++r){t=this._arrayOfAllItems[r];for(v in t){if(v!==this._rootItemPropName){var n=t[v];if(n!==null){if(!dojo.isArray(n)){t[v]=[n]}}else{t[v]=[null]}}o[v]=v}}while(o[this._storeRefPropName]){this._storeRefPropName+="_"}while(o[this._itemNumPropName]){this._itemNumPropName+="_"}var h;var d=e.identifier;if(d){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=d;for(r=0;r<this._arrayOfAllItems.length;++r){t=this._arrayOfAllItems[r];h=t[d];var w=h[0];if(!this._itemsByIdentity[w]){this._itemsByIdentity[w]=t}else{if(this._jsonFileUrl){throw new Error("dojo.data.ItemFileReadStore:  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+d+"].  Value collided: ["+w+"]")}else{if(this._jsonData){throw new Error("dojo.data.ItemFileReadStore:  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+d+"].  Value collided: ["+w+"]")}}}}}else{this._features["dojo.data.api.Identity"]=Number}for(r=0;r<this._arrayOfAllItems.length;++r){t=this._arrayOfAllItems[r];t[this._storeRefPropName]=this;t[this._itemNumPropName]=r}for(r=0;r<this._arrayOfAllItems.length;++r){t=this._arrayOfAllItems[r];for(v in t){h=t[v];for(var q=0;q<h.length;++q){n=h[q];if(n!==null&&typeof n=="object"){if(n._type&&n._value){var f=n._type;var g=this._datatypeMap[f];if(!g){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+f+"'")}else{if(dojo.isFunction(g)){h[q]=new g(n._value)}else{if(dojo.isFunction(g.deserialize)){h[q]=g.deserialize(n._value)}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function")}}}}if(n._reference){var a=n._reference;if(dojo.isString(a)){h[q]=this._itemsByIdentity[a]}else{for(var p=0;p<this._arrayOfAllItems.length;++p){var c=this._arrayOfAllItems[p];var l=true;for(var s in a){if(c[s]!=a[s]){l=false}}if(l){h[q]=c}}}}}}}}},getIdentity:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return b[this._itemNumPropName]}else{var c=b[a];if(c){return c[0]}}return null},fetchItemByIdentity:function(b){if(!this._loadFinished){var a=this;if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:b})}else{this._loadInProgress=true;var f={url:a._jsonFileUrl,handleAs:"json-comment-optional"};var e=dojo.xhrGet(f);e.addCallback(function(j){var h=b.scope?b.scope:dojo.global;try{a._getItemsFromLoadedData(j);a._loadFinished=true;a._loadInProgress=false;var i=a._getItemByIdentity(b.identity);if(b.onItem){b.onItem.call(h,i)}a._handleQueuedFetches()}catch(g){a._loadInProgress=false;if(b.onError){b.onError.call(h,g)}}});e.addErrback(function(g){a._loadInProgress=false;if(b.onError){var h=b.scope?b.scope:dojo.global;b.onError.call(h,g)}})}}else{if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true;var d=a._getItemByIdentity(b.identity);if(b.onItem){var c=b.scope?b.scope:dojo.global;b.onItem.call(c,d)}}}}else{var d=this._getItemByIdentity(b.identity);if(b.onItem){var c=b.scope?b.scope:dojo.global;b.onItem.call(c,d)}}},_getItemByIdentity:function(a){var b=null;if(this._itemsByIdentity){b=this._itemsByIdentity[a]}else{b=this._arrayOfAllItems[a]}if(b===undefined){b=null}return b},getIdentityAttributes:function(b){var a=this._features["dojo.data.api.Identity"];if(a===Number){return null}else{return[a]}},_forceLoad:function(){var a=this;if(this._jsonFileUrl){var c={url:a._jsonFileUrl,handleAs:"json-comment-optional",sync:true};var b=dojo.xhrGet(c);b.addCallback(function(d){try{if(a._loadInProgress!==true&&!a._loadFinished){a._getItemsFromLoadedData(d);a._loadFinished=true}}catch(f){console.log(f);throw f}});b.addErrback(function(d){throw d})}else{if(this._jsonData){a._getItemsFromLoadedData(a._jsonData);a._jsonData=null;a._loadFinished=true}}}});dojo.extend(dojo.data.ItemFileReadStore,dojo.data.util.simpleFetch)}if(!dojo._hasResource["dojo.data.ItemFileWriteStore"]){dojo._hasResource["dojo.data.ItemFileWriteStore"]=true;dojo.provide("dojo.data.ItemFileWriteStore");dojo.declare("dojo.data.ItemFileWriteStore",dojo.data.ItemFileReadStore,{constructor:function(a){this._features["dojo.data.api.Write"]=true;this._features["dojo.data.api.Notification"]=true;this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};if(!this._datatypeMap.Date.serialize){this._datatypeMap.Date.serialize=function(b){return dojo.date.stamp.toISOString(b,{zulu:true})}}this._saveInProgress=false},_assert:function(a){if(!a){throw new Error("assertion failed in ItemFileWriteStore")}},_getIdentifierAttribute:function(){var a=this.getFeatures()["dojo.data.api.Identity"];return a},newItem:function(j,a){this._assert(!this._saveInProgress);if(!this._loadFinished){this._forceLoad()}if(typeof j!="object"&&typeof j!="undefined"){throw new Error("newItem() was passed something other than an object")}var e=null;var b=this._getIdentifierAttribute();if(b===Number){e=this._arrayOfAllItems.length}else{e=j[b];if(typeof e==="undefined"){throw new Error("newItem() was not passed an identity for the new item")}if(dojo.isArray(e)){throw new Error("newItem() was not passed an single-valued identity")}}if(this._itemsByIdentity){this._assert(typeof this._itemsByIdentity[e]==="undefined")}this._assert(typeof this._pending._newItems[e]==="undefined");this._assert(typeof this._pending._deletedItems[e]==="undefined");var c={};c[this._storeRefPropName]=this;c[this._itemNumPropName]=this._arrayOfAllItems.length;if(this._itemsByIdentity){this._itemsByIdentity[e]=c}this._arrayOfAllItems.push(c);var g=null;if(a&&a.parent&&a.attribute){g={item:a.parent,attribute:a.attribute,oldValue:undefined};var i=this.getValues(a.parent,a.attribute);if(i&&i.length>0){var d=i.slice(0,i.length);if(i.length===1){g.oldValue=i[0]}else{g.oldValue=i.slice(0,i.length)}d.push(c);this._setValueOrValues(a.parent,a.attribute,d,false);g.newValue=this.getValues(a.parent,a.attribute)}else{this._setValueOrValues(a.parent,a.attribute,c,false);g.newValue=c}}else{c[this._rootItemPropName]=true;this._arrayOfTopLevelItems.push(c)}this._pending._newItems[e]=c;for(var h in j){if(h===this._storeRefPropName||h===this._itemNumPropName){throw new Error("encountered bug in ItemFileWriteStore.newItem")}var f=j[h];if(!dojo.isArray(f)){f=[f]}c[h]=f}this.onNew(c,g);return c},_removeArrayElement:function(c,b){var a=dojo.indexOf(c,b);if(a!=-1){c.splice(a,1);return true}return false},deleteItem:function(b){this._assert(!this._saveInProgress);this._assertIsItem(b);var c=b[this._itemNumPropName];this._arrayOfAllItems[c]=null;var a=this.getIdentity(b);b[this._storeRefPropName]=null;if(this._itemsByIdentity){delete this._itemsByIdentity[a]}this._pending._deletedItems[a]=b;if(b[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,b)}this.onDelete(b);return true},setValue:function(b,a,c){return this._setValueOrValues(b,a,c,true)},setValues:function(c,b,a){return this._setValueOrValues(c,b,a,true)},unsetAttribute:function(b,a){return this._setValueOrValues(b,a,[],true)},_setValueOrValues:function(r,c,l,f){this._assert(!this._saveInProgress);this._assertIsItem(r);this._assert(dojo.isString(c));this._assert(typeof l!=="undefined");var h=this._getIdentifierAttribute();if(c==h){throw new Error("ItemFileWriteStore does not have support for changing the value of an item's identifier.")}var g=this._getValueOrValues(r,c);var m=this.getIdentity(r);if(!this._pending._modifiedItems[m]){var a={};for(var p in r){if((p===this._storeRefPropName)||(p===this._itemNumPropName)||(p===this._rootItemPropName)){a[p]=r[p]}else{var o=r[p];var k=[];for(var e=0;e<o.length;++e){k.push(o[e])}a[p]=k}}this._pending._modifiedItems[m]=a}var q=false;if(dojo.isArray(l)&&l.length===0){q=delete r[c];l=undefined}else{var n=[];if(dojo.isArray(l)){var s=l;for(var d=0;d<s.length;++d){n.push(s[d])}}else{var b=l;n.push(b)}r[c]=n;q=true}if(f){this.onSet(r,c,g,l)}return q},_getValueOrValues:function(d,c){var a=undefined;if(this.hasAttribute(d,c)){var b=this.getValues(d,c);if(b.length==1){a=b[0]}else{a=b}}return a},_flatten:function(d){if(this.isItem(d)){var c=d;var a=this.getIdentity(c);var b={_reference:a};return b}else{if(typeof d==="object"){for(type in this._datatypeMap){var e=this._datatypeMap[type];if(dojo.isObject(e)&&!dojo.isFunction(e)){if(d instanceof e.type){if(!e.serialize){throw new Error("ItemFileWriteStore:  No serializer defined for type mapping: ["+type+"]")}return{_type:type,_value:e.serialize(d)}}}else{if(d instanceof e){return{_type:type,_value:d.toString()}}}}}return d}},_getNewFileContentString:function(){var l={};var e=this._getIdentifierAttribute();if(e!==Number){l.identifier=e}if(this._labelAttr){l.label=this._labelAttr}l.items=[];for(var d=0;d<this._arrayOfAllItems.length;++d){var k=this._arrayOfAllItems[d];if(k!==null){serializableItem={};for(var h in k){if(h!==this._storeRefPropName&&h!==this._itemNumPropName){var a=h;var g=this.getValues(k,a);if(g.length==1){serializableItem[a]=this._flatten(g[0])}else{var f=[];for(var c=0;c<g.length;++c){f.push(this._flatten(g[c]));serializableItem[a]=f}}}}l.items.push(serializableItem)}}var b=true;return dojo.toJson(l,b)},save:function(b){this._assert(!this._saveInProgress);this._saveInProgress=true;var a=this;var d=function(){a._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};a._saveInProgress=false;if(b&&b.onComplete){var f=b.scope||dojo.global;b.onComplete.call(f)}};var e=function(){a._saveInProgress=false;if(b&&b.onError){var f=b.scope||dojo.global;b.onError.call(f)}};if(this._saveEverything){var c=this._getNewFileContentString();this._saveEverything(d,e,c)}if(this._saveCustom){this._saveCustom(d,e)}if(!this._saveEverything&&!this._saveCustom){d()}},revert:function(){this._assert(!this._saveInProgress);var c;for(c in this._pending._newItems){var e=this._pending._newItems[c];e[this._storeRefPropName]=null;this._arrayOfAllItems[e[this._itemNumPropName]]=null;if(e[this._rootItemPropName]){this._removeArrayElement(this._arrayOfTopLevelItems,e)}if(this._itemsByIdentity){delete this._itemsByIdentity[c]}}for(c in this._pending._modifiedItems){var g=this._pending._modifiedItems[c];var f=null;if(this._itemsByIdentity){f=this._itemsByIdentity[c]}else{f=this._arrayOfAllItems[c]}g[this._storeRefPropName]=this;f[this._storeRefPropName]=null;var b=f[this._itemNumPropName];this._arrayOfAllItems[b]=g;if(f[this._rootItemPropName]){b=f[this._itemNumPropName];this._arrayOfTopLevelItems[b]=g}if(this._itemsByIdentity){this._itemsByIdentity[c]=g}}for(c in this._pending._deletedItems){var a=this._pending._deletedItems[c];a[this._storeRefPropName]=this;var d=a[this._itemNumPropName];this._arrayOfAllItems[d]=a;if(this._itemsByIdentity){this._itemsByIdentity[c]=a}if(a[this._rootItemPropName]){this._arrayOfTopLevelItems.push(a)}}this._pending={_newItems:{},_modifiedItems:{},_deletedItems:{}};return true},isDirty:function(c){if(c){var a=this.getIdentity(c);return new Boolean(this._pending._newItems[a]||this._pending._modifiedItems[a]||this._pending._deletedItems[a])}else{var b;for(b in this._pending._newItems){return true}for(b in this._pending._modifiedItems){return true}for(b in this._pending._deletedItems){return true}return false}},onSet:function(c,b,a,d){},onNew:function(b,a){},onDelete:function(a){}})};
if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){var c=dojo.global;var a=dojo.doc;if(a.selection){return !a.selection.createRange().text}else{if(c.getSelection){var b=c.getSelection();if(dojo.isString(b)){return !b}else{return b.isCollapsed||!b.toString()}}}},getBookmark:function(){var c,b=dojo.doc.selection;if(b){var a=b.createRange();if(b.type.toUpperCase()=="CONTROL"){c=a.length?dojo._toArray(a):null}else{c=a.getBookmark()}}else{if(dojo.global.getSelection){b=dojo.global.getSelection();if(b){var a=b.getRangeAt(0);c=a.cloneRange()}}else{console.debug("No idea how to store the current selection for this browser!")}}return c},moveToBookmark:function(d){var a=dojo.doc;if(a.selection){var b;if(dojo.isArray(d)){b=a.body.createControlRange();dojo.forEach(d,b.addElement)}else{b=a.selection.createRange();b.moveToBookmark(d)}b.select()}else{var c=dojo.global.getSelection&&dojo.global.getSelection();if(c&&c.removeAllRanges){c.removeAllRanges();c.addRange(d)}else{console.debug("No idea how to restore selection for this browser!")}}},getFocus:function(b,a){return{node:b&&dojo.isDescendant(dijit._curFocus,b.domNode)?dijit._prevFocus:dijit._curFocus,bookmark:!dojo.withGlobal(a||dojo.global,dijit.isCollapsed)?dojo.withGlobal(a||dojo.global,dijit.getBookmark):null,openedForWindow:a}},focus:function(d){if(!d){return}var c="node" in d?d.node:d,b=d.bookmark,a=d.openedForWindow;if(c){var g=(c.tagName.toLowerCase()=="iframe")?c.contentWindow:c;if(g&&g.focus){try{g.focus()}catch(f){}}dijit._onFocusNode(c)}if(b&&dojo.withGlobal(a||dojo.global,dijit.isCollapsed)){if(a){a.focus()}try{dojo.withGlobal(a||dojo.global,moveToBookmark,null,[b])}catch(f){}}},_activeStack:[],registerWin:function(b){if(!b){b=window}dojo.connect(b.document,"onmousedown",null,function(c){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false},0);dijit._onTouchNode(c.target||c.srcElement)});var a=b.document.body||b.document.getElementsByTagName("body")[0];if(a){if(dojo.isIE&&dojo.isIE<11){a.attachEvent("onactivate",function(c){if(c.srcElement.tagName.toLowerCase()!="body"){dijit._onFocusNode(c.srcElement)}});a.attachEvent("ondeactivate",function(c){dijit._onBlurNode(c.srcElement)})}else{a.addEventListener("focus",function(c){dijit._onFocusNode(c.target)},true);a.addEventListener("blur",function(c){dijit._onBlurNode(c.target)},true)}}a=null},_onBlurNode:function(b){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;var a=dijit.getEnclosingWidget(b);if(a&&a._setStateClass){a._focused=false;a._setStateClass()}if(dijit._justMouseDowned){return}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer)}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([])},100)},_onTouchNode:function(b){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer}var a=[];try{while(b){if(b.dijitPopupParent){b=dijit.byId(b.dijitPopupParent).domNode}else{if(b.tagName&&b.tagName.toLowerCase()=="body"){if(b===dojo.body()){break}b=dojo.query("iframe").filter(function(e){return e.contentDocument.body===b})[0]}else{var d=b.getAttribute&&b.getAttribute("widgetId");if(d){a.unshift(d)}b=b.parentNode}}}}catch(c){}dijit._setStack(a)},_onFocusNode:function(b){if(b&&b.tagName&&b.tagName.toLowerCase()=="body"){return}dijit._onTouchNode(b);if(b==dijit._curFocus){return}dijit._prevFocus=dijit._curFocus;dijit._curFocus=b;dojo.publish("focusNode",[b]);var a=dijit.getEnclosingWidget(b);if(a&&a._setStateClass){a._focused=true;a._setStateClass()}},_setStack:function(a){var e=dijit._activeStack;dijit._activeStack=a;for(var c=0;c<Math.min(e.length,a.length);c++){if(e[c]!=a[c]){break}}for(var b=e.length-1;b>=c;b--){var d=dijit.byId(e[b]);if(d){dojo.publish("widgetBlur",[d]);if(d._onBlur){d._onBlur()}}}for(var b=c;b<a.length;b++){var d=dijit.byId(a[b]);if(d){dojo.publish("widgetFocus",[d]);if(d._onFocus){d._onFocus()}}}}});dojo.addOnLoad(dijit.registerWin)}if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={}},add:function(a){if(this._hash[a.id]){throw new Error("Tried to register widget with id=="+a.id+" but that id is already registered")}this._hash[a.id]=a},remove:function(a){delete this._hash[a]},forEach:function(a){for(var b in this._hash){a(this._hash[b])}},filter:function(b){var a=new dijit.WidgetSet();this.forEach(function(c){if(b(c)){a.add(c)}});return a},byId:function(a){return this._hash[a]},byClass:function(a){return this.filter(function(b){return b.declaredClass==a})}});dijit.registry=new dijit.WidgetSet();dijit._widgetTypeCtr={};dijit.getUniqueId=function(a){var b;do{b=a+"_"+(dijit._widgetTypeCtr[a]!==undefined?++dijit._widgetTypeCtr[a]:dijit._widgetTypeCtr[a]=0)}while(dijit.byId(b));return b};if(dojo.isIE){dojo.addOnUnload(function(){dijit.registry.forEach(function(a){a.destroy()})})}dijit.byId=function(a){return(dojo.isString(a))?dijit.registry.byId(a):a};dijit.byNode=function(a){return dijit.registry.byId(a.getAttribute("widgetId"))};dijit.getEnclosingWidget=function(a){while(a){if(a.getAttribute&&a.getAttribute("widgetId")){return dijit.registry.byId(a.getAttribute("widgetId"))}a=a.parentNode}return null}}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){var a=dojo.global;var g=dojo.doc;var i=0,c=0;if(dojo.isMozilla){var j,d,e,b;if(g.body.clientWidth>g.documentElement.clientWidth){j=g.documentElement.clientWidth;e=g.body.clientWidth}else{e=g.documentElement.clientWidth;j=g.body.clientWidth}if(g.body.clientHeight>g.documentElement.clientHeight){d=g.documentElement.clientHeight;b=g.body.clientHeight}else{b=g.documentElement.clientHeight;d=g.body.clientHeight}i=(e>a.innerWidth)?j:e;c=(b>a.innerHeight)?d:b}else{if(!dojo.isOpera&&a.innerWidth){i=a.innerWidth;c=a.innerHeight}else{if(dojo.isIE&&g.documentElement&&g.documentElement.clientHeight){i=g.documentElement.clientWidth;c=g.documentElement.clientHeight}else{if(dojo.body().clientWidth){i=dojo.body().clientWidth;c=dojo.body().clientHeight}}}}var f=dojo._docScroll();return{w:i,h:c,l:f.x,t:f.y}};dijit.placeOnScreen=function(b,e,a,c){var d=dojo.map(a,function(f){return{corner:f,pos:e}});return dijit._place(b,d)};dijit._place=function(p,m,h){var j=dijit.getViewport();if(!p.parentNode||String(p.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(p)}var e=null;for(var q=0;q<m.length;q++){var g=m[q].corner;var f=m[q].pos;if(h){h(g)}var l=p.style.display;var b=p.style.visibility;p.style.visibility="hidden";p.style.display="";var a=dojo.marginBox(p);p.style.display=l;p.style.visibility=b;var s=(g.charAt(1)=="L"?f.x:Math.max(j.l,f.x-a.w)),r=(g.charAt(0)=="T"?f.y:Math.max(j.t,f.y-a.h)),d=(g.charAt(1)=="L"?Math.min(j.l+j.w,s+a.w):f.x),c=(g.charAt(0)=="T"?Math.min(j.t+j.h,r+a.h):f.y),n=d-s,k=c-r,o=(a.w-n)+(a.h-k);if(e==null||o<e.overflow){e={corner:g,aroundCorner:m[q].aroundCorner,x:s,y:r,w:n,h:k,overflow:o}}if(o==0){break}}p.style.left=e.x+"px";p.style.top=e.y+"px";return e};dijit.placeOnScreenAroundElement=function(b,e,f,c){e=dojo.byId(e);var h=e.style.display;e.style.display="";var i=e.offsetWidth;var d=e.offsetHeight;var g=dojo.coords(e,true);e.style.display=h;var j=[];for(var a in f){j.push({aroundCorner:a,corner:f[a],pos:{x:g.x+(a.charAt(1)=="L"?0:i),y:g.y+(a.charAt(0)=="T"?0:d)}})}return dijit._place(b,j,c)}}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(c){if(dojo.isSafari&&!c._parentWindow){var a=function(e){e.document._parentWindow=e;for(var d=0;d<e.frames.length;d++){a(e.frames[d])}};a(window.top)}if(dojo.isIE&&window!==document.parentWindow&&!c._parentWindow){c.parentWindow.execScript("document._parentWindow = window;","Javascript");var b=c._parentWindow;c._parentWindow=null;return b}return c._parentWindow||c.parentWindow||c.defaultView}}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup=new function(){var a=[],b=1000,c=1;this.open=function(l){var k=l.popup,j=l.orient||{BL:"TL",TL:"BL"},m=l.around,f=(l.around&&l.around.id)?(l.around.id+"_dropdown"):("popup_"+c++);var e=dojo.doc.createElement("div");e.id=f;e.className="dijitPopup";e.style.zIndex=b+a.length;e.style.visibility="hidden";if(l.parent){e.dijitPopupParent=l.parent.id}dojo.body().appendChild(e);k.domNode.style.display="";e.appendChild(k.domNode);var i=new dijit.BackgroundIframe(e);var h=m?dijit.placeOnScreenAroundElement(e,m,j,k.orient?dojo.hitch(k,"orient"):null):dijit.placeOnScreen(e,l,j=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"]);e.style.visibility="visible";var g=[];function d(){for(var n=a.length-1;n>0&&a[n].parent===a[n-1].widget;n--){}return a[n]}g.push(dojo.connect(e,"onkeypress",this,function(n){if(n.keyCode==dojo.keys.ESCAPE&&l.onCancel){l.onCancel()}else{if(n.keyCode==dojo.keys.TAB){dojo.stopEvent(n);var o=d();if(o&&o.onCancel){o.onCancel()}}}}));if(k.onCancel){g.push(dojo.connect(k,"onCancel",null,l.onCancel))}g.push(dojo.connect(k,k.onExecute?"onExecute":"onChange",null,function(){var n=d();if(n&&n.onExecute){n.onExecute()}}));a.push({wrapper:e,iframe:i,widget:k,parent:l.parent,onExecute:l.onExecute,onCancel:l.onCancel,onClose:l.onClose,handlers:g});if(k.onOpen){k.onOpen(h)}return h};this.close=function(e){while(dojo.some(a,function(j){return j.widget==e})){var h=a.pop(),i=h.wrapper,f=h.iframe,g=h.widget,d=h.onClose;if(g.onClose){g.onClose()}dojo.forEach(h.handlers,dojo.disconnect);if(!g||!g.domNode){return}dojo.style(g.domNode,"display","none");dojo.body().appendChild(g.domNode);f.destroy();dojo._destroyElement(i);if(d){d()}}}}();dijit._frames=new function(){var a=[];this.pop=function(){var c;if(a.length){c=a.pop();c.style.display=""}else{if(dojo.isIE){var b="<iframe src='javascript:\"\"' style='position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity=\"0\");'>";c=dojo.doc.createElement(b)}else{var c=dojo.doc.createElement("iframe");c.src='javascript:""';c.className="dijitBackgroundIframe"}c.tabIndex=-1;dojo.body().appendChild(c)}return c};this.push=function(b){b.style.display="";if(dojo.isIE){b.style.removeExpression("width");b.style.removeExpression("height")}a.push(b)}}();if(dojo.isIE&&dojo.isIE<7){dojo.addOnLoad(function(){var a=dijit._frames;dojo.forEach([a.pop()],a.push)})}dijit.BackgroundIframe=function(b){if(!b.id){throw new Error("no id")}if((dojo.isIE&&dojo.isIE<7)||(dojo.isFF&&dojo.isFF<3&&dojo.hasClass(dojo.body(),"dijit_a11y"))){var a=dijit._frames.pop();b.appendChild(a);if(dojo.isIE){a.style.setExpression("width","document.getElementById('"+b.id+"').offsetWidth");a.style.setExpression("height","document.getElementById('"+b.id+"').offsetHeight")}this.iframe=a}};dojo.extend(dijit.BackgroundIframe,{destroy:function(){if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe}}})}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(c){if(dojo.isIE){if(dojo.marginBox(c.parentNode).h<=c.parentNode.scrollHeight){c.scrollIntoView(false)}}else{if(dojo.isMozilla){c.scrollIntoView(false)}else{var a=c.parentNode;var b=a.scrollTop+dojo.marginBox(a).h;var d=c.offsetTop+dojo.marginBox(c).h;if(b<d){a.scrollTop+=(d-b)}else{if(a.scrollTop>c.offsetTop){a.scrollTop-=(a.scrollTop-c.offsetTop)}}}}}}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");(function(){var h=dojo;var g=h.isIE;var a=h.isOpera;var b=Math.floor;var e={dj_ie:g,dj_ie6:b(g)==6,dj_ie7:b(g)==7,dj_iequirks:g&&h.isQuirks,dj_opera:a,dj_opera8:b(a)==8,dj_opera9:b(a)==9,dj_khtml:h.isKhtml,dj_safari:h.isSafari,dj_gecko:h.isMozilla};for(var f in e){if(e[f]){var c=dojo.doc.documentElement;if(c.className){c.className+=" "+f}else{c.className=f}}}})()}if(!dojo._hasResource["dijit._base.bidi"]){dojo._hasResource["dijit._base.bidi"]=true;dojo.provide("dijit._base.bidi");dojo.addOnLoad(function(){if(!dojo._isBodyLtr()){dojo.addClass(dojo.body(),"dijitRtl")}})}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=(this._currentTimeout<0)?this._initialDelay:((this._subsequentDelay>1)?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay));this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout)},trigger:function(a,g,c,f,e,b,d){if(e!=this._obj){this.stop();this._initialDelay=d||500;this._subsequentDelay=b||0.9;this._obj=e;this._evt=a;this._node=c;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(g,f);this._fireEventAndReload()}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null}},addKeyListener:function(c,a,f,e,b,d){return[dojo.connect(c,"onkeypress",this,function(g){if(g.keyCode==a.keyCode&&(!a.charCode||a.charCode==g.charCode)&&(a.ctrlKey===undefined||a.ctrlKey==g.ctrlKey)&&(a.altKey===undefined||a.altKey==g.ctrlKey)&&(a.shiftKey===undefined||a.shiftKey==g.ctrlKey)){dojo.stopEvent(g);dijit.typematic.trigger(a,f,c,e,a,b,d)}else{if(dijit.typematic._obj==a){dijit.typematic.stop()}}}),dojo.connect(c,"onkeyup",this,function(g){if(dijit.typematic._obj==a){dijit.typematic.stop()}})]},addMouseListener:function(c,f,e,b,d){var a=dojo.connect;return[a(c,"mousedown",this,function(g){dojo.stopEvent(g);dijit.typematic.trigger(g,f,c,e,c,b,d)}),a(c,"mouseup",this,function(g){dojo.stopEvent(g);dijit.typematic.stop()}),a(c,"mouseout",this,function(g){dojo.stopEvent(g);dijit.typematic.stop()}),a(c,"mousemove",this,function(g){dojo.stopEvent(g)}),a(c,"dblclick",this,function(g){dojo.stopEvent(g);if(dojo.isIE){dijit.typematic.trigger(g,f,c,e,c,b,d);setTimeout(dijit.typematic.stop,50)}})]},addListener:function(d,e,a,g,f,b,c){return this.addKeyListener(e,a,g,f,b,c).concat(this.addMouseListener(d,g,f,b,c))}}}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var b=document.createElement("div");b.id="a11yTestNode";b.style.cssText='border: 1px solid;border-color:red green;position: absolute;height: 5px;top: -999px;background-image: url("'+dojo.moduleUrl("dijit","form/templates/blank.gif")+'");';dojo.body().appendChild(b);function a(){var d=dojo.getComputedStyle(b);if(d){var c=d.backgroundImage;var e=(d.borderTopColor==d.borderRightColor)||(c!=null&&(c=="none"||c=="url(invalid-url:)"));dojo[e?"addClass":"removeClass"](dojo.body(),"dijit_a11y")}}a();if(dojo.isIE){setInterval(a,4000)}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload)}dojo.mixin(dijit,{hasWaiRole:function(a){if(a.hasAttribute){return a.hasAttribute("role")}else{return a.getAttribute("role")?true:false}},getWaiRole:function(b){var c=b.getAttribute("role");if(c){var a=c.indexOf(":");return a==-1?c:c.substring(a+1)}else{return""}},setWaiRole:function(a,b){if(dojo.isFF&&dojo.isFF<3){a.setAttribute("role","wairole:"+b)}else{a.setAttribute("role",b)}},removeWaiRole:function(a){a.removeAttribute("role")},hasWaiState:function(a,b){if(dojo.isFF&&dojo.isFF<3){return a.hasAttributeNS("http://www.w3.org/2005/07/aaa",b)}else{if(a.hasAttribute){return a.hasAttribute("aria-"+b)}else{return a.getAttribute("aria-"+b)?true:false}}},getWaiState:function(a,c){if(dojo.isFF&&dojo.isFF<3){return a.getAttributeNS("http://www.w3.org/2005/07/aaa",c)}else{var b=a.getAttribute("aria-"+c);return b?b:""}},setWaiState:function(a,c,b){if(dojo.isFF&&dojo.isFF<3){a.setAttributeNS("http://www.w3.org/2005/07/aaa","aaa:"+c,b)}else{a.setAttribute("aria-"+c,b)}},removeWaiState:function(a,b){if(dojo.isFF&&dojo.isFF<3){a.removeAttributeNS("http://www.w3.org/2005/07/aaa",b)}else{a.removeAttribute("aria-"+b)}}})}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base")}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.date.stamp.fromISOString=function(e,b){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/}var c=dojo.date.stamp._isoRegExp.exec(e);var a=null;if(c){c.shift();c[1]&&c[1]--;c[6]&&(c[6]*=1000);if(b){b=new Date(b);dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(g){return b["get"+g]()}).forEach(function(h,g){if(c[g]===undefined){c[g]=h}})}a=new Date(c[0]||1970,c[1]||0,c[2]||0,c[3]||0,c[4]||0,c[5]||0,c[6]||0);var f=0;var d=c[7]&&c[7].charAt(0);if(d!="Z"){f=((c[8]||0)*60)+(Number(c[9])||0);if(d!="-"){f*=-1}}if(d){f-=a.getTimezoneOffset()}if(f){a.setTime(a.getTime()+f*60000)}}return a};dojo.date.stamp.toISOString=function(f,j){var i=function(k){return(k<10)?"0"+k:k};j=j||{};var e=[];var g=j.zulu?"getUTC":"get";var c="";if(j.selector!="time"){c=[f[g+"FullYear"](),i(f[g+"Month"]()+1),i(f[g+"Date"]())].join("-")}e.push(c);if(j.selector!="date"){var b=[i(f[g+"Hours"]()),i(f[g+"Minutes"]()),i(f[g+"Seconds"]())].join(":");var a=f[g+"Milliseconds"]();if(j.milliseconds){b+="."+(a<100?"0":"")+i(a)}if(j.zulu){b+="Z"}else{if(j.selector!="time"){var h=f.getTimezoneOffset();var d=Math.abs(h);b+=(h>0?"-":"+")+i(Math.floor(d/60))+":"+i(d%60)}}e.push(b)}return e.join("T")}}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");dojo.parser=new function(){var f=dojo;function a(d){if(f.isString(d)){return"string"}if(typeof d=="number"){return"number"}if(typeof d=="boolean"){return"boolean"}if(f.isFunction(d)){return"function"}if(f.isArray(d)){return"array"}if(d instanceof Date){return"date"}if(d instanceof f._Url){return"url"}return"object"}function b(g,d){switch(d){case"string":return g;case"number":return g.length?Number(g):NaN;case"boolean":return typeof g=="boolean"?g:!(g.toLowerCase()=="false");case"function":if(f.isFunction(g)){g=g.toString();g=f.trim(g.substring(g.indexOf("{")+1,g.length-1))}try{if(g.search(/[^\w\.]+/i)!=-1){g=f.parser._nameAnonFunc(new Function(g),this)}return f.getObject(g,false)}catch(h){return new Function()}case"array":return g.split(/\s*,\s*/);case"date":switch(g){case"":return new Date("");case"now":return new Date();default:return f.date.stamp.fromISOString(g)}case"url":return f.baseUrl+g;default:return f.fromJson(g)}}var e={};function c(h){if(!e[h]){var d=f.getObject(h);if(!f.isFunction(d)){throw new Error("Could not load class '"+h+"'. Did you spell the name correctly and use a full path, like 'dijit.form.Button'?")}var i=d.prototype;var k={};for(var g in i){if(g.charAt(0)=="_"){continue}var j=i[g];k[g]=a(j)}e[h]={cls:d,params:k}}return e[h]}this._functionFromScript=function(g){var h="";var j="";var d=g.getAttribute("args");if(d){f.forEach(d.split(/\s*,\s*/),function(l,k){h+="var "+l+" = arguments["+k+"]; "})}var i=g.getAttribute("with");if(i&&i.length){f.forEach(i.split(/\s*,\s*/),function(k){h+="with("+k+"){";j+="}"})}return new Function(h+g.innerHTML+j)};this.instantiate=function(d){var g=[];f.forEach(d,function(j){if(!j){return}var r=j.getAttribute("dojoType");if((!r)||(!r.length)){return}var o=c(r);var p=o.cls;var h=p._noScript||p.prototype._noScript;var k={};var m=j.attributes;for(var i in o.params){var v=m.getNamedItem(i);if(!v||(!v.specified&&(!dojo.isIE||i.toLowerCase()!="value"))){continue}var t=v.value;switch(i){case"class":t=j.className;break;case"style":t=j.style&&j.style.cssText}var n=o.params[i];k[i]=b(t,n)}if(!h){var l=[],w=[];f.query("> script[type^='dojo/']",j).orphan().forEach(function(x){var z=x.getAttribute("event"),y=x.getAttribute("type"),A=f.parser._functionFromScript(x);if(z){if(y=="dojo/connect"){l.push({event:z,func:A})}else{k[z]=A}}else{w.push(A)}})}var s=p.markupFactory;if(!s&&p.prototype){s=p.prototype.markupFactory}var u=s?s(k,j,p):new p(k,j);g.push(u);var q=j.getAttribute("jsId");if(q){f.setObject(q,u)}if(!h){dojo.forEach(l,function(x){dojo.connect(u,x.event,null,x.func)});dojo.forEach(w,function(x){x.call(u)})}});f.forEach(g,function(h){if(h&&(h.startup)&&((!h.getParent)||(!h.getParent()))){h.startup()}});return g};this.parse=function(d){var g=f.query("[dojoType]",d);var h=this.instantiate(g);return h}}();(function(){var a=function(){if(djConfig.parseOnLoad==true){dojo.parser.parse()}};if(dojo.exists("dijit.wai.onload")&&(dijit.wai.onload===dojo._loaders[0])){dojo._loaders.splice(1,0,a)}else{dojo._loaders.unshift(a)}})();dojo.parser._anonCtr=0;dojo.parser._anon={};dojo.parser._nameAnonFunc=function(a,e){var d="$joinpoint";var c=(e||dojo.parser._anon);if(dojo.isIE){var f=a.__dojoNameCache;if(f&&c[f]===a){return a.__dojoNameCache}}var b="__"+dojo.parser._anonCtr++;while(typeof c[b]!="undefined"){b="__"+dojo.parser._anonCtr++}c[b]=a;return b}}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.declare("dijit._Widget",null,{id:"",lang:"",dir:"","class":"",style:"",title:"",srcNodeRef:null,domNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},postscript:function(b,a){this.create(b,a)},create:function(e,b){this.srcNodeRef=dojo.byId(b);this._connects=[];this._attaches=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id}if(e){dojo.mixin(this,e)}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"))}dijit.registry.add(this);this.buildRendering();if(this.domNode){for(var a in this.attributeMap){var d=this[this.attributeMap[a]||"domNode"];var c=this[a];if(typeof c!="object"&&(c!==""||(e&&e[a]))){switch(a){case"class":dojo.addClass(d,c);break;case"style":if(d.style.cssText){d.style.cssText+="; "+c}else{d.style.cssText=c}break;default:d.setAttribute(a,c)}}}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id)}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef}},postMixInProperties:function(){},buildRendering:function(){this.domNode=this.srcNodeRef||dojo.doc.createElement("div")},postCreate:function(){},startup:function(){},destroyRecursive:function(a){this.destroyDescendants();this.destroy()},destroy:function(a){this.uninitialize();dojo.forEach(this._connects,function(b){dojo.forEach(b,dojo.disconnect)});this.destroyRendering(a);dijit.registry.remove(this.id)},destroyRendering:function(a){if(this.bgIframe){this.bgIframe.destroy();delete this.bgIframe}if(this.domNode){dojo._destroyElement(this.domNode);delete this.domNode}if(this.srcNodeRef){dojo._destroyElement(this.srcNodeRef);delete this.srcNodeRef}},destroyDescendants:function(){dojo.forEach(this.getDescendants(),function(a){a.destroy()})},uninitialize:function(){return false},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getDescendants:function(){var a=dojo.query("[widgetId]",this.domNode);return a.map(dijit.byNode)},nodesWithKeyClick:["input","button"],connect:function(d,c,e){var b=[];if(c=="ondijitclick"){var a=this;if(!this.nodesWithKeyClick[d.nodeName]){b.push(dojo.connect(d,"onkeydown",this,function(f){if(f.keyCode==dojo.keys.ENTER){return(dojo.isString(e))?a[e](f):e.call(a,f)}else{if(f.keyCode==dojo.keys.SPACE){dojo.stopEvent(f)}}}));b.push(dojo.connect(d,"onkeyup",this,function(f){if(f.keyCode==dojo.keys.SPACE){return dojo.isString(e)?a[e](f):e.call(a,f)}}))}c="onclick"}b.push(dojo.connect(d,c,this,e));this._connects.push(b);return b},disconnect:function(b){for(var a=0;a<this._connects.length;a++){if(this._connects[a]==b){dojo.forEach(b,dojo.disconnect);this._connects.splice(a,1);return}}},isLeftToRight:function(){if(typeof this._ltr=="undefined"){this._ltr=dojo.getComputedStyle(this.domNode).direction!="rtl"}return this._ltr},isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none")}})}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.string.pad=function(e,c,d,a){var b=String(e);if(!d){d="0"}while(b.length<c){if(a){b+=d}else{b=d+b}}return b};dojo.string.substitute=function(c,d,b,a){return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(e,f,h){var g=dojo.getObject(f,false,d);if(h){g=dojo.getObject(h,false,a)(g)}if(b){g=b(g,f)}return g.toString()})};dojo.string.trim=function(b){b=b.replace(/^\s+/,"");for(var a=b.length-1;a>0;a--){if(/\S/.test(b.charAt(a))){b=b.substring(0,a+1);break}}return b}}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateNode:null,templateString:null,templatePath:null,widgetsInTemplate:false,containerNode:null,_skipNodeCache:false,buildRendering:function(){var d=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var e;if(dojo.isString(d)){var c=this.declaredClass,g=this;var a=dojo.string.substitute(d,this,function(i,h){if(h.charAt(0)=="!"){i=g[h.substr(1)]}if(typeof i=="undefined"){throw new Error(c+" template:"+h)}if(!i){return""}return h.charAt(0)=="!"?i:i.toString().replace(/"/g,"&quot;")},this);e=dijit._Templated._createNodesFromText(a)[0]}else{e=d.cloneNode(true)}this._attachTemplateNodes(e);var f=this.srcNodeRef;if(f&&f.parentNode){f.parentNode.replaceChild(e,f)}this.domNode=e;if(this.widgetsInTemplate){var b=dojo.parser.parse(e);this._attachTemplateNodes(b,function(i,h){return i[h]})}this._fillContent(f)},_fillContent:function(b){var a=this.containerNode;if(b&&a){while(b.hasChildNodes()){a.appendChild(b.firstChild)}}},_attachTemplateNodes:function(d,g){g=g||function(r,q){return r.getAttribute(q)};var b=dojo.isArray(d)?d:(d.all||d.getElementsByTagName("*"));var k=dojo.isArray(d)?0:-1;for(;k<b.length;k++){var c=(k==-1)?d:b[k];if(this.widgetsInTemplate&&g(c,"dojoType")){continue}var e=g(c,"dojoAttachPoint");if(e){var l,n=e.split(/\s*,\s*/);while(l=n.shift()){if(dojo.isArray(this[l])){this[l].push(c)}else{this[l]=c}}}var j=g(c,"dojoAttachEvent");if(j){var a,o=j.split(/\s*,\s*/);var f=dojo.trim;while(a=o.shift()){if(a){var h=null;if(a.indexOf(":")!=-1){var p=a.split(":");a=f(p[0]);h=f(p[1])}else{a=f(a)}if(!h){h=a}this.connect(c,a,h)}}}var i=g(c,"waiRole");if(i){dijit.setWaiRole(c,i)}var m=g(c,"waiState");if(m){dojo.forEach(m.split(/\s*,\s*/),function(r){if(r.indexOf("-")!=-1){var q=r.split("-");dijit.setWaiState(c,q[0],q[1])}})}}}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(c,d,f){var e=dijit._Templated._templateCache;var a=d||c;var b=e[a];if(b){return b}if(!d){d=dijit._Templated._sanitizeTemplateString(dojo._getText(c))}d=dojo.string.trim(d);if(d.match(/\$\{([^\}]+)\}/g)||f){return(e[a]=d)}else{return(e[a]=dijit._Templated._createNodesFromText(d)[0])}};dijit._Templated._sanitizeTemplateString=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(b){a=b[1]}}else{a=""}return a};if(dojo.isIE){dojo.addOnUnload(function(){var a=dijit._Templated._templateCache;for(var b in a){var c=a[b];if(!isNaN(c.nodeType)){dojo._destroyElement(c)}delete a[b]}})}(function(){var b={cell:{re:/^<t[dh][\s\r\n>]/i,pre:"<table><tbody><tr>",post:"</tr></tbody></table>"},row:{re:/^<tr[\s\r\n>]/i,pre:"<table><tbody>",post:"</tbody></table>"},section:{re:/^<(thead|tbody|tfoot)[\s\r\n>]/i,pre:"<table>",post:"</table>"}};var a;dijit._Templated._createNodesFromText=function(j){if(!a){a=dojo.doc.createElement("div");a.style.display="none";dojo.body().appendChild(a)}var f="none";var d=j.replace(/^\s+/,"");for(var g in b){var h=b[g];if(h.re.test(d)){f=g;j=h.pre+j+h.post;break}}a.innerHTML=j;if(a.normalize){a.normalize()}var c={cell:"tr",row:"tbody",section:"table"}[f];var i=(typeof c!="undefined")?a.getElementsByTagName(c)[0]:a;var e=[];while(i.firstChild){e.push(i.removeChild(i.firstChild))}a.innerHTML="";return e}})();dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""})}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Contained",null,{getParent:function(){for(var b=this.domNode.parentNode;b;b=b.parentNode){var c=b.getAttribute&&b.getAttribute("widgetId");if(c){var a=dijit.byId(c);return a.isContainer?a:null}}return null},_getSibling:function(b){var a=this.domNode;do{a=a[b+"Sibling"]}while(a&&a.nodeType!=1);if(!a){return null}var c=a.getAttribute("widgetId");return dijit.byId(c)},getPreviousSibling:function(){return this._getSibling("previous")},getNextSibling:function(){return this._getSibling("next")}});dojo.declare("dijit._Container",null,{isContainer:true,addChild:function(d,a){if(a===undefined){a="last"}var b=this.containerNode||this.domNode;if(a&&typeof a=="number"){var c=dojo.query("> [widgetid]",b);if(c&&c.length>=a){b=c[a-1];a="after"}}dojo.place(d.domNode,b,a);if(this._started&&!d._started){d.startup()}},removeChild:function(b){var a=b.domNode;a.parentNode.removeChild(a)},_nextElement:function(a){do{a=a.nextSibling}while(a&&a.nodeType!=1);return a},_firstElement:function(a){a=a.firstChild;if(a&&a.nodeType!=1){a=this._nextElement(a)}return a},getChildren:function(){return dojo.query("> [widgetId]",this.containerNode||this.domNode).map(dijit.byNode)},hasChildren:function(){var a=this.containerNode||this.domNode;return !!this._firstElement(a)},_getSiblingOfChild:function(d,a){var b=d.domNode;var c=(a>0?"nextSibling":"previousSibling");do{b=b[c]}while(b&&(b.nodeType!=1||!dijit.byNode(b)));return b?dijit.byNode(b):null}});dojo.declare("dijit._KeyNavContainer",[dijit._Container],{_keyNavCodes:{},connectKeyNavHandlers:function(a,e){var b=this._keyNavCodes={};var d=dojo.hitch(this,this.focusPrev);var c=dojo.hitch(this,this.focusNext);dojo.forEach(a,function(f){b[f]=d});dojo.forEach(e,function(f){b[f]=c});this.connect(this.domNode,"onkeypress","_onContainerKeypress");if(dojo.isIE){this.connect(this.domNode,"onactivate","_onContainerFocus");this.connect(this.domNode,"ondeactivate","_onContainerBlur")}else{this.connect(this.domNode,"onfocus","_onContainerFocus");this.connect(this.domNode,"onblur","_onContainerBlur")}},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_setTabIndexMinusOne"))},addChild:function(b,a){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._setTabIndexMinusOne(b)},focus:function(){this.focusFirstChild()},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild())},focusNext:function(){if(this.focusedChild&&this.focusedChild.hasNextFocalNode&&this.focusedChild.hasNextFocalNode()){this.focusedChild.focusNext();return}var a=this._getNextFocusableChild(this.focusedChild,1);if(a.getFocalNodes){this.focusChild(a,a.getFocalNodes()[0])}else{this.focusChild(a)}},focusPrev:function(){if(this.focusedChild&&this.focusedChild.hasPrevFocalNode&&this.focusedChild.hasPrevFocalNode()){this.focusedChild.focusPrev();return}var b=this._getNextFocusableChild(this.focusedChild,-1);if(b.getFocalNodes){var a=b.getFocalNodes();this.focusChild(b,a[a.length-1])}else{this.focusChild(b)}},focusChild:function(b,a){if(b){if(this.focusedChild&&b!==this.focusedChild){this._onChildBlur(this.focusedChild)}this.focusedChild=b;if(a&&b.focusFocalNode){b.focusFocalNode(a)}else{b.focus()}}},_setTabIndexMinusOne:function(a){if(a.getFocalNodes){dojo.forEach(a.getFocalNodes(),function(b){b.setAttribute("tabIndex",-1)})}else{(a.focusNode||a.domNode).setAttribute("tabIndex",-1)}},_onContainerFocus:function(a){this.domNode.setAttribute("tabIndex",-1);if(a.target===this.domNode){this.focusFirstChild()}else{var b=dijit.getEnclosingWidget(a.target);if(b&&b.isFocusable()){this.focusedChild=b}}},_onContainerBlur:function(a){if(this.tabIndex){this.domNode.setAttribute("tabIndex",this.tabIndex)}},_onContainerKeypress:function(a){if(a.ctrlKey||a.altKey){return}var b=this._keyNavCodes[a.keyCode];if(b){b();dojo.stopEvent(a)}},_onChildBlur:function(a){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1)},_getNextFocusableChild:function(d,a){if(d){d=this._getSiblingOfChild(d,a)}var c=this.getChildren();for(var b=0;b<c.length;b++){if(!d){d=c[(a>0)?0:(c.length-1)]}if(d.isFocusable()){return d}d=this._getSiblingOfChild(d,a)}}})}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{isLayoutContainer:true,postCreate:function(){dojo.addClass(this.domNode,"dijitContainer")},startup:function(){if(this._started){return}this._started=true;if(this.getChildren){dojo.forEach(this.getChildren(),function(a){a.startup()})}if(!this.getParent||!this.getParent()){this.resize();this.connect(window,"onresize",function(){this.resize()})}},resize:function(a){var b=this.domNode;if(a){dojo.marginBox(b,a);if(a.t){b.style.top=a.t+"px"}if(a.l){b.style.left=a.l+"px"}}var c=dojo.mixin(dojo.marginBox(b),a||{});this._contentBox=dijit.layout.marginBox2contentBox(b,c);this.layout()},layout:function(){}});dijit.layout.marginBox2contentBox=function(d,e){var b=dojo.getComputedStyle(d);var c=dojo._getMarginExtents(d,b);var a=dojo._getPadBorderExtents(d,b);return{l:dojo._toPixelValue(d,b.paddingLeft),t:dojo._toPixelValue(d,b.paddingTop),w:e.w-(c.w+a.w),h:e.h-(c.h+a.h)}};(function(){var b=function(c){return c.substring(0,1).toUpperCase()+c.substring(1)};var a=function(c,d){c.resize?c.resize(d):dojo.marginBox(c.domNode,d);dojo.mixin(c,dojo.marginBox(c.domNode));dojo.mixin(c,d)};dijit.layout.layoutChildren=function(c,e,d){e=dojo.mixin({},e);dojo.addClass(c,"dijitLayoutContainer");d=dojo.filter(d,function(f){return f.layoutAlign!="client"}).concat(dojo.filter(d,function(f){return f.layoutAlign=="client"}));dojo.forEach(d,function(i){var h=i.domNode,g=i.layoutAlign;var f=h.style;f.left=e.l+"px";f.top=e.t+"px";f.bottom=f.right="auto";dojo.addClass(h,"dijitAlign"+b(g));if(g=="top"||g=="bottom"){a(i,{w:e.w});e.h-=i.h;if(g=="top"){e.t+=i.h}else{f.top=e.t+e.h+"px"}}else{if(g=="left"||g=="right"){a(i,{h:e.h});e.w-=i.w;if(g=="left"){e.l+=i.w}else{f.left=e.l+e.w+"px"}}else{if(g=="client"){a(i,e)}}}})}})()}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated],{baseClass:"",value:"",name:"",id:"",alt:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{id:"focusNode",tabIndex:"focusNode",alt:"focusNode"}),setDisabled:function(a){this.domNode.disabled=this.disabled=a;if(this.focusNode){this.focusNode.disabled=a}if(a){this._hovering=false;this._active=false}dijit.setWaiState(this.focusNode||this.domNode,"disabled",a);this._setStateClass()},_onMouse:function(c){var d=c.target;if(d&&d.getAttribute){this.stateModifier=d.getAttribute("stateModifier")||""}if(!this.disabled){switch(c.type){case"mouseenter":case"mouseover":this._hovering=true;break;case"mouseout":case"mouseleave":this._hovering=false;break;case"mousedown":this._active=true;var a=this;var b=this.connect(dojo.body(),"onmouseup",function(){a._active=false;a._setStateClass();a.disconnect(b)});break}this._setStateClass()}},isFocusable:function(){return !this.disabled&&(dojo.style(this.domNode,"display")!="none")},focus:function(){dijit.focus(this.focusNode)},_setStateClass:function(){if(!("staticClass" in this)){this.staticClass=(this.stateNode||this.domNode).className}var b=[this.baseClass];function a(c){b=b.concat(dojo.map(b,function(d){return d+c}))}if(this.checked){a("Checked")}if(this.state){a(this.state)}if(this.selected){a("Selected")}if(this.disabled){a("Disabled")}else{if(this._active){a(this.stateModifier+"Active")}else{if(this._focused){a("Focused")}if((this.stateModifier||!this._focused)&&this._hovering){a(this.stateModifier+"Hover")}}}(this.stateNode||this.domNode).className=this.staticClass+" "+b.join(" ")},onChange:function(a){},postCreate:function(){this.setValue(this.value,null);this.setDisabled(this.disabled);this._setStateClass()},setValue:function(b,a){this._lastValue=b;dijit.setWaiState(this.focusNode||this.domNode,"valuenow",this.forWaiValuenow());if(a===undefined){a=true}if(this._lastValueReported==undefined&&a===null){this._lastValueReported=b}if((this.intermediateChanges||a)&&((b&&b.toString)?b.toString():b)!==((this._lastValueReported&&this._lastValueReported.toString)?this._lastValueReported.toString():this._lastValueReported)){this._lastValueReported=b;this.onChange(b)}},getValue:function(){return this._lastValue},undo:function(){this.setValue(this._lastValueReported,false)},_onKeyPress:function(b){if(b.keyCode==dojo.keys.ESCAPE&&!b.shiftKey&&!b.ctrlKey&&!b.altKey){var a=this.getValue();var c=this._lastValueReported;if((typeof c!="undefined")&&((a!==null&&a.toString)?a.toString():null)!==c.toString()){this.undo();dojo.stopEvent(b);return false}}return true},forWaiValuenow:function(){return this.getValue()}})}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit")}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.i18n.getLocalization=function(b,c,h){h=dojo.i18n.normalizeLocale(h);var a=h.split("-");var d=[b,"nls",c].join(".");var k=dojo._loadedModules[d];if(k){var j;for(var e=a.length;e>0;e--){var g=a.slice(0,e).join("_");if(k[g]){j=k[g];break}}if(!j){j=k.ROOT}if(j){var f=function(){};f.prototype=j;return new f()}}throw new Error("Bundle not found: "+c+" in "+b+" , locale="+h)};dojo.i18n.normalizeLocale=function(b){var a=b?b.toLowerCase():dojo.locale;if(a=="root"){a="ROOT"}return a};dojo.i18n._requireLocalization=function(a,b,p,l){var h=dojo.i18n.normalizeLocale(p);var e=[a,"nls",b].join(".");var d="";if(l){var o=l.split(",");for(var j=0;j<o.length;j++){if(h.indexOf(o[j])==0){if(o[j].length>d.length){d=o[j]}}}if(!d){d="ROOT"}}var m=l?d:h;var r=dojo._loadedModules[e];var c=null;if(r){if(djConfig.localizationComplete&&r._built){return}var g=m.replace(/-/g,"_");var n=e+"."+g;c=dojo._loadedModules[n]}if(!c){r=dojo.provide(e);var f=dojo._getModuleSymbols(a);var k=f.concat("nls").join("/");var q;dojo.i18n._searchLocalePath(m,l,function(v){var w=v.replace(/-/g,"_");var u=e+"."+w;var s=false;if(!dojo._loadedModules[u]){dojo.provide(u);var t=[k];if(v!="ROOT"){t.push(v)}t.push(b);var i=t.join("/")+".js";s=dojo._loadPath(i,null,function(z){var y=function(){};y.prototype=q;r[w]=new y();for(var x in z){r[w][x]=z[x]}})}else{s=true}if(s&&r[w]){q=r[w]}else{r[w]=q}if(l){return true}})}if(l&&h!=d){r[h.replace(/-/g,"_")]=r[d.replace(/-/g,"_")]}};(function(){var a=djConfig.extraLocale;if(a){if(!a instanceof Array){a=[a]}var b=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(e,d,c,g){b(e,d,c,g);if(c){return}for(var f=0;f<a.length;f++){b(e,d,a[f],g)}}}})();dojo.i18n._searchLocalePath=function(h,k,c){h=dojo.i18n.normalizeLocale(h);var a=h.split("-");var b=[];for(var e=a.length;e>0;e--){b.push(a.slice(0,e).join("-"))}b.push(false);if(k){b.reverse()}for(var d=b.length-1;d>=0;d--){var f=b[d]||"ROOT";var g=c(f);if(g){break}}};dojo.i18n._preloadLocalizations=function(e,b){function c(f){f=dojo.i18n.normalizeLocale(f);dojo.i18n._searchLocalePath(f,true,function(h){for(var g=0;g<b.length;g++){if(b[g]==h){dojo.require(e+"_"+h);return true}}return false})}c();var a=djConfig.extraLocale||[];for(var d=0;d<a.length;d++){c(a[d])}}}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.cldr.supplemental.getFirstDayOfWeek=function(a){var b={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,lb:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,tn:6,ye:6,as:0,au:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,ie:0,il:0,is:0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,za:0,zw:0,et:0,mw:0,ng:0,tj:0,gb:0,sy:4};var c=dojo.cldr.supplemental._region(a);var d=b[c];return(typeof d=="undefined")?1:d};dojo.cldr.supplemental._region=function(a){a=dojo.i18n.normalizeLocale(a);var b=a.split("-");var c=b[1];if(!c){c={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[b[0]]}else{if(c.length==4){c=b[2]}}return c};dojo.cldr.supplemental.getWeekend=function(b){var d={eg:5,il:5,sy:5,"in":0,ae:4,bh:4,dz:4,iq:4,jo:4,kw:4,lb:4,ly:4,ma:4,om:4,qa:4,sa:4,sd:4,tn:4,ye:4};var a={ae:5,bh:5,dz:5,iq:5,jo:5,kw:5,lb:5,ly:5,ma:5,om:5,qa:5,sa:5,sd:5,tn:5,ye:5,af:5,ir:5,eg:6,il:6,sy:6};var e=dojo.cldr.supplemental._region(b);var f=d[e];var c=a[e];if(typeof f=="undefined"){f=6}if(typeof c=="undefined"){c=0}return{start:f,end:c}}}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.date.getDaysInMonth=function(a){var b=a.getMonth();var c=[31,28,31,30,31,30,31,31,30,31,30,31];if(b==1&&dojo.date.isLeapYear(a)){return 29}return c[b]};dojo.date.isLeapYear=function(b){var a=b.getFullYear();return !(a%400)||(!(a%4)&&!!(a%100))};dojo.date.getTimezoneName=function(c){var d=c.toString();var f="";var b;var e=d.indexOf("(");if(e>-1){f=d.substring(++e,d.indexOf(")"))}else{var a=/([A-Z\/]+) \d{4}$/;if((b=d.match(a))){f=b[1]}else{d=c.toLocaleString();a=/ ([A-Z\/]+)$/;if((b=d.match(a))){f=b[1]}}}return(f=="AM"||f=="PM")?"":f};dojo.date.compare=function(c,b,a){c=new Date(Number(c));b=new Date(Number(b||new Date()));if(typeof a!=="undefined"){if(a=="date"){c.setHours(0,0,0,0);b.setHours(0,0,0,0)}else{if(a=="time"){c.setFullYear(0,0,0);b.setFullYear(0,0,0)}}}if(c>b){return 1}if(c<b){return -1}return 0};dojo.date.add=function(d,c,e){var g=new Date(Number(d));var b=false;var k="Date";switch(c){case"day":break;case"weekday":var l,a;var i=0;var j=e%5;if(!j){l=(e>0)?5:-5;a=(e>0)?((e-5)/5):((e+5)/5)}else{l=j;a=parseInt(e/5)}var f=d.getDay();if(f==6&&e>0){i=1}else{if(f==0&&e<0){i=-1}}var h=f+l;if(h==0||h==6){i=(e>0)?2:-2}e=7*a+l+i;break;case"year":k="FullYear";b=true;break;case"week":e*=7;break;case"quarter":e*=3;case"month":b=true;k="Month";break;case"hour":case"minute":case"second":case"millisecond":k=c.charAt(0).toUpperCase()+c.substring(1)+"s"}if(k){g["setUTC"+k](g["getUTC"+k]()+e)}if(b&&(g.getDate()<d.getDate())){g.setDate(0)}return g};dojo.date.difference=function(p,n,d){n=n||new Date();d=d||"day";var c=n.getFullYear()-p.getFullYear();var l=1;switch(d){case"quarter":var q=p.getMonth();var o=n.getMonth();var i=Math.floor(q/3)+1;var h=Math.floor(o/3)+1;h+=(c*4);l=h-i;break;case"weekday":var m=Math.round(dojo.date.difference(p,n,"day"));var a=parseInt(dojo.date.difference(p,n,"week"));var k=m%7;if(k==0){m=a*5}else{var j=0;var g=p.getDay();var e=n.getDay();a=parseInt(m/7);k=m%7;var f=new Date(p);f.setDate(f.getDate()+(a*7));var b=f.getDay();if(m>0){switch(true){case g==6:j=-1;break;case g==0:j=0;break;case e==6:j=-1;break;case e==0:j=-2;break;case (b+k)>5:j=-2}}else{if(m<0){switch(true){case g==6:j=0;break;case g==0:j=1;break;case e==6:j=2;break;case e==0:j=1;break;case (b+k)<0:j=2}}}m+=j;m-=(a*2)}l=m;break;case"year":l=c;break;case"month":l=(n.getMonth()-p.getMonth())+(c*12);break;case"week":l=parseInt(dojo.date.difference(p,n,"day")/7);break;case"day":l/=24;case"hour":l/=60;case"minute":l/=60;case"second":l/=1000;case"millisecond":l*=n.getTime()-p.getTime()}return Math.round(l)}}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.regexp.escapeString=function(b,a){return b.replace(/([\.$?*!=:|{}\(\)\[\]\\\/^])/g,function(c){if(a&&a.indexOf(c)!=-1){return c}return"\\"+c})};dojo.regexp.buildGroupRE=function(c,f,e){if(!(c instanceof Array)){return f(c)}var a=[];for(var d=0;d<c.length;d++){a.push(f(c[d]))}return dojo.regexp.group(a.join("|"),e)};dojo.regexp.group=function(b,a){return"("+(a?"?:":"")+b+")"}}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");(function(){function b(e,d,f){return f.replace(/([a-z])\1*/ig,function(w){var A;var z=w.charAt(0);var q=w.length;var n;var o=["abbr","wide","narrow"];switch(z){case"G":A=d[(q<4)?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":A=e.getFullYear();switch(q){case 1:break;case 2:A=String(A);A=A.substr(A.length-2);break;default:n=true}break;case"Q":case"q":A=Math.ceil((e.getMonth()+1)/3);n=true;break;case"M":case"L":var p=e.getMonth();var j;switch(q){case 1:case 2:A=p+1;n=true;break;case 3:case 4:case 5:j=o[q-3];break}if(j){var y=(z=="L")?"standalone":"format";var i=["months",y,j].join("-");A=d[i][p]}break;case"w":var g=0;A=dojo.date.locale._getWeekOfYear(e,g);n=true;break;case"d":A=e.getDate();n=true;break;case"D":A=dojo.date.locale._getDayOfYear(e);n=true;break;case"E":case"e":case"c":var x=e.getDay();var j;switch(q){case 1:case 2:if(z=="e"){var v=dojo.cldr.supplemental.getFirstDayOfWeek(options.locale);x=(x-v+7)%7}if(z!="c"){A=x+1;n=true;break}case 3:case 4:case 5:j=o[q-3];break}if(j){var y=(z=="c")?"standalone":"format";var i=["days",y,j].join("-");A=d[i][x]}break;case"a":var k=(e.getHours()<12)?"am":"pm";A=d[k];break;case"h":case"H":case"K":case"k":var u=e.getHours();switch(z){case"h":A=(u%12)||12;break;case"H":A=u;break;case"K":A=(u%12);break;case"k":A=u||24;break}n=true;break;case"m":A=e.getMinutes();n=true;break;case"s":A=e.getSeconds();n=true;break;case"S":A=Math.round(e.getMilliseconds()*Math.pow(10,q-3));break;case"v":case"z":A=dojo.date.getTimezoneName(e);if(A){break}q=4;case"Z":var t=e.getTimezoneOffset();var r=[(t<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(t)/60),2),dojo.string.pad(Math.abs(t)%60,2)];if(q==4){r.splice(0,0,"GMT");r.splice(3,0,":")}A=r.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+f)}if(n){A=dojo.string.pad(A,q)}return A})}dojo.date.locale.format=function(f,l){l=l||{};var i=dojo.i18n.normalizeLocale(l.locale);var m=l.formatLength||"short";var n=dojo.date.locale._getGregorianBundle(i);var g=[];var e=dojo.hitch(this,b,f,n);if(l.selector=="year"){var h=f.getFullYear();if(i.match(/^zh|^ja/)){h+="\u5E74"}return h}if(l.selector!="time"){var d=l.datePattern||n["dateFormat-"+m];if(d){g.push(c(d,e))}}if(l.selector!="date"){var k=l.timePattern||n["timeFormat-"+m];if(k){g.push(c(k,e))}}var j=g.join(" ");return j};dojo.date.locale.regexp=function(d){return dojo.date.locale._parseInfo(d).regexp};dojo.date.locale._parseInfo=function(i){i=i||{};var g=dojo.i18n.normalizeLocale(i.locale);var k=dojo.date.locale._getGregorianBundle(g);var j=i.formatLength||"short";var d=i.datePattern||k["dateFormat-"+j];var l=i.timePattern||k["timeFormat-"+j];var e;if(i.selector=="date"){e=d}else{if(i.selector=="time"){e=l}else{e=d+" "+l}}var f=[];var h=c(e,dojo.hitch(this,a,f,k,i));return{regexp:h,tokens:f,bundle:k}};dojo.date.locale.parse=function(k,n){var d=dojo.date.locale._parseInfo(n);var h=d.tokens,o=d.bundle;var l=new RegExp("^"+d.regexp+"$");var f=l.exec(k);if(!f){return null}var e=["abbr","wide","narrow"];var m=new Date(1972,0);var g={};var j="";dojo.forEach(f,function(C,w){if(!w){return}var s=h[w-1];var t=s.length;switch(s.charAt(0)){case"y":if(t!=2){m.setFullYear(C);g.year=C}else{if(C<100){C=Number(C);var B=""+new Date().getFullYear();var u=B.substring(0,2)*100;var y=Number(B.substring(2,4));var q=Math.min(y+20,99);var x=(C<q)?u+C:u-100+C;m.setFullYear(x);g.year=x}else{if(n.strict){return null}m.setFullYear(C);g.year=C}}break;case"M":if(t>2){var p=o["months-format-"+e[t-3]].concat();if(!n.strict){C=C.replace(".","").toLowerCase();p=dojo.map(p,function(v){return v.replace(".","").toLowerCase()})}C=dojo.indexOf(p,C);if(C==-1){return null}}else{C--}m.setMonth(C);g.month=C;break;case"E":case"e":var D=o["days-format-"+e[t-3]].concat();if(!n.strict){C=C.toLowerCase();D=dojo.map(D,"".toLowerCase)}C=dojo.indexOf(D,C);if(C==-1){return null}break;case"d":m.setDate(C);g.date=C;break;case"D":m.setMonth(0);m.setDate(C);break;case"a":var z=n.am||o.am;var r=n.pm||o.pm;if(!n.strict){var A=/\./g;C=C.replace(A,"").toLowerCase();z=z.replace(A,"").toLowerCase();r=r.replace(A,"").toLowerCase()}if(n.strict&&C!=z&&C!=r){return null}j=(C==r)?"p":(C==z)?"a":"";break;case"K":if(C==24){C=0}case"h":case"H":case"k":if(C>23){return null}m.setHours(C);break;case"m":m.setMinutes(C);break;case"s":m.setSeconds(C);break;case"S":m.setMilliseconds(C)}});var i=m.getHours();if(j==="p"&&i<12){m.setHours(i+12)}else{if(j==="a"&&i==12){m.setHours(0)}}if(g.year&&m.getFullYear()!=g.year){return null}if(g.month&&m.getMonth()!=g.month){return null}if(g.date&&m.getDate()!=g.date){return null}return m};function c(h,d,j,g){var e=function(k){return k};d=d||e;j=j||e;g=g||e;var i=h.match(/(''|[^'])+/g);var f=false;dojo.forEach(i,function(k,l){if(!k){i[l]=""}else{i[l]=(f?j:d)(k);f=!f}});return g(i.join(""))}function a(g,d,e,f){f=dojo.regexp.escapeString(f);if(!e.strict){f=f.replace(" a"," ?a")}return f.replace(/([a-z])\1*/ig,function(i){var k;var p=i.charAt(0);var h=i.length;var o="",n="";if(e.strict){if(h>1){o="0{"+(h-1)+"}"}if(h>2){n="0{"+(h-2)+"}"}}else{o="0?";n="0{0,2}"}switch(p){case"y":k="\\d{2,4}";break;case"M":k=(h>2)?"\\S+":o+"[1-9]|1[0-2]";break;case"D":k=o+"[1-9]|"+n+"[1-9][0-9]|[12][0-9][0-9]|3[0-5][0-9]|36[0-6]";break;case"d":k=o+"[1-9]|[12]\\d|3[01]";break;case"w":k=o+"[1-9]|[1-4][0-9]|5[0-3]";break;case"E":k="\\S+";break;case"h":k=o+"[1-9]|1[0-2]";break;case"k":k=o+"\\d|1[01]";break;case"H":k=o+"\\d|1\\d|2[0-3]";break;case"K":k=o+"[1-9]|1\\d|2[0-4]";break;case"m":case"s":k="[0-5]\\d";break;case"S":k="\\d{"+h+"}";break;case"a":var m=e.am||d.am||"AM";var j=e.pm||d.pm||"PM";if(e.strict){k=m+"|"+j}else{k=m+"|"+j;if(m!=m.toLowerCase()){k+="|"+m.toLowerCase()}if(j!=j.toLowerCase()){k+="|"+j.toLowerCase()}}break;default:k=".*"}if(g){g.push(i)}return"("+k+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}})();(function(){var a=[];dojo.date.locale.addCustomFormats=function(b,c){a.push({pkg:b,name:c})};dojo.date.locale._getGregorianBundle=function(b){var c={};dojo.forEach(a,function(e){var d=dojo.i18n.getLocalization(e.pkg,e.name,b);c=dojo.mixin(c,d)},this);return c}})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(f,e,b,a){var c;var g=dojo.date.locale._getGregorianBundle(a);var d=[f,b,e];if(b=="standAlone"){c=g[d.join("-")]}d[1]="format";return(c||g[d.join("-")]).concat()};dojo.date.locale.isWeekend=function(d,a){var c=dojo.cldr.supplemental.getWeekend(a);var b=(d||new Date()).getDay();if(c.end<c.start){c.end+=7;if(b<c.start){b+=7}}return b>=c.start&&b<=c.end};dojo.date.locale._getDayOfYear=function(a){return dojo.date.difference(new Date(a.getFullYear(),0,1),a)+1};dojo.date.locale._getWeekOfYear=function(e,b){if(arguments.length==1){b=0}var c=new Date(e.getFullYear(),0,1).getDay();var a=(c-b+7)%7;var d=Math.floor((dojo.date.locale._getDayOfYear(e)+a-1)/7);if(c==b){d++}return d}}if(!dojo._hasResource["dijit._Calendar"]){dojo._hasResource["dijit._Calendar"]=true;dojo.provide("dijit._Calendar");dojo.declare("dijit._Calendar",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("dijit","templates/Calendar.html"),value:new Date(),dayWidth:"narrow",setValue:function(a){if(!this.value||dojo.date.compare(a,this.value)){a=new Date(a);this.displayMonth=new Date(a);if(!this.isDisabledDate(a,this.lang)){this.value=a;this.value.setHours(0,0,0,0);this.onChange(this.value)}this._populateGrid()}},_setText:function(a,b){while(a.firstChild){a.removeChild(a.firstChild)}a.appendChild(document.createTextNode(b))},_populateGrid:function(){var f=this.displayMonth;f.setDate(1);var a=f.getDay();var b=dojo.date.getDaysInMonth(f);var i=dojo.date.getDaysInMonth(dojo.date.add(f,"month",-1));var g=new Date();var c=this.value;var k=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(k>a){k-=7}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(q,p){p+=k;var o=new Date(f);var r,n="dijitCalendar",l=0;if(p<a){r=i-a+p+1;l=-1;n+="Previous"}else{if(p>=(a+b)){r=p-a-b+1;l=1;n+="Next"}else{r=p-a+1;n+="Current"}}if(l){o=dojo.date.add(o,"month",l)}o.setDate(r);if(!dojo.date.compare(o,g,"date")){n="dijitCalendarCurrentDate "+n}if(!dojo.date.compare(o,c,"date")){n="dijitCalendarSelectedDate "+n}if(this.isDisabledDate(o,this.lang)){n="dijitCalendarDisabledDate "+n}q.className=n+"Month dijitCalendarDateTemplate";q.dijitDateValue=o.valueOf();var m=dojo.query(".dijitCalendarDateLabel",q)[0];this._setText(m,o.getDate())},this);var d=dojo.date.locale.getNames("months","wide","standAlone",this.lang);this._setText(this.monthLabelNode,d[f.getMonth()]);var h=f.getFullYear()-1;dojo.forEach(["previous","current","next"],function(l){this._setText(this[l+"YearLabelNode"],dojo.date.locale.format(new Date(h++,0),{selector:"year",locale:this.lang}))},this);var e=this;var j=function(m,n,l){dijit.typematic.addMouseListener(e[m],e,function(o){if(o>=0){e._adjustDisplay(n,l)}},0.8,500)};j("incrementMonth","month",1);j("decrementMonth","month",-1);j("nextYearLabelNode","year",1);j("previousYearLabelNode","year",-1)},postCreate:function(){dijit._Calendar.superclass.postCreate.apply(this);var b=dojo.hitch(this,function(e,h){var g=dojo.query(e,this.domNode)[0];for(var f=0;f<h;f++){g.parentNode.appendChild(g.cloneNode(true))}});b(".dijitCalendarDayLabelTemplate",6);b(".dijitCalendarDateTemplate",6);b(".dijitCalendarWeekTemplate",5);var d=dojo.date.locale.getNames("days",this.dayWidth,"standAlone",this.lang);var a=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(e,f){this._setText(e,d[(f+a)%7])},this);var c=dojo.date.locale.getNames("months","wide","standAlone",this.lang);dojo.forEach(c,function(f){var e=dojo.doc.createElement("div");this._setText(e,f);this.monthLabelSpacer.appendChild(e)},this);this.value=null;this.setValue(new Date())},_adjustDisplay:function(a,b){this.displayMonth=dojo.date.add(this.displayMonth,a,b);this._populateGrid()},_onDayClick:function(a){var b=a.target;dojo.stopEvent(a);while(!b.dijitDateValue){b=b.parentNode}if(!dojo.hasClass(b,"dijitCalendarDisabledDate")){this.setValue(b.dijitDateValue);this.onValueSelected(this.value)}},onValueSelected:function(a){},onChange:function(a){},isDisabledDate:function(b,a){return false}})}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",dijit._Widget,{href:"",extractContent:false,parseOnLoad:true,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,"class":"dijitContentPane",postCreate:function(){this.domNode.title="";if(this.preload){this._loadCheck()}var a=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,a);this.errorMessage=dojo.string.substitute(this.errorMessage,a);dojo.addClass(this.domNode,this["class"])},startup:function(){if(this._started){return}this._checkIfSingleChild();if(this._singleChild){this._singleChild.startup()}this._loadCheck();this._started=true},_checkIfSingleChild:function(){var b=dojo.query(">",this.containerNode||this.domNode),a=b.filter("[widgetId]");if(b.length==1&&a.length==1){this.isContainer=true;this._singleChild=dijit.byNode(a[0])}else{delete this.isContainer;delete this._singleChild}},refresh:function(){return this._prepareLoad(true)},setHref:function(a){this.href=a;return this._prepareLoad()},setContent:function(a){if(!this._isDownloaded){this.href="";this._onUnloadHandler()}this._setContent(a||"");this._isDownloaded=false;if(this.parseOnLoad){this._createSubWidgets()}this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(this._contentBox)}this._onLoadHandler()},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel()}delete this._xhrDfd},destroy:function(){if(this._beingDestroyed){return}this._onUnloadHandler();this._beingDestroyed=true;this.inherited("destroy",arguments)},resize:function(a){dojo.marginBox(this.domNode,a);var b=this.containerNode||this.domNode,c=dojo.mixin(dojo.marginBox(b),a||{});this._contentBox=dijit.layout.marginBox2contentBox(b,c);if(this._singleChild&&this._singleChild.resize){this._singleChild.resize(this._contentBox)}},_prepareLoad:function(a){this.cancel();this.isLoaded=false;this._loadCheck(a)},_loadCheck:function(b){var a=((this.open!==false)&&(this.domNode.style.display!="none"));if(this.href&&(b||(this.preload&&!this._xhrDfd)||(this.refreshOnShow&&a&&!this._xhrDfd)||(!this.isLoaded&&a&&!this._xhrDfd))){this._downloadExternalContent()}},_downloadExternalContent:function(){this._onUnloadHandler();this._setContent(this.onDownloadStart.call(this));var b=this;var c={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(c,this.ioArgs)}var a=this._xhrDfd=(this.ioMethod||dojo.xhrGet)(c);a.addCallback(function(d){try{b.onDownloadEnd.call(b);b._isDownloaded=true;b.setContent.call(b,d)}catch(e){b._onError.call(b,"Content",e)}delete b._xhrDfd;return d});a.addErrback(function(d){if(!a.cancelled){b._onError.call(b,"Download",d)}delete b._xhrDfd;return d})},_onLoadHandler:function(){this.isLoaded=true;try{this.onLoad.call(this)}catch(a){console.error("Error "+this.widgetId+" running custom onLoad code")}},_onUnloadHandler:function(){this.isLoaded=false;this.cancel();try{this.onUnload.call(this)}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code")}},_setContent:function(a){this.destroyDescendants();try{var b=this.containerNode||this.domNode;while(b.firstChild){dojo._destroyElement(b.firstChild)}if(typeof a=="string"){if(this.extractContent){match=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(match){a=match[1]}}b.innerHTML=a}else{if(a.nodeType){b.appendChild(a)}else{dojo.forEach(a,function(e){b.appendChild(e.cloneNode(true))})}}}catch(d){var c=this.onContentError(d);try{b.innerHTML=c}catch(d){console.error("Fatal "+this.id+" could not change content due to "+d.message,d)}}},_onError:function(b,d,a){var c=this["on"+b+"Error"].call(this,d);if(a){console.error(a,d)}else{if(c){this._setContent.call(this,c)}}},_createSubWidgets:function(){var a=this.containerNode||this.domNode;try{dojo.parser.parse(a,true)}catch(b){this._onError("Content",b,"Couldn't create widgets in "+this.id+(this.href?" from "+this.href:""))}},onLoad:function(a){},onUnload:function(a){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(a){},onDownloadError:function(a){return this.errorMessage},onDownloadEnd:function(){}})}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form._FormMixin",null,{action:"",method:"",enctype:"",name:"","accept-charset":"",accept:"",target:"",attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{action:"",method:"",enctype:"","accept-charset":"",accept:"",target:""}),execute:function(a){},onCancel:function(){},onExecute:function(){},templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onsubmit:_onSubmit' name='${name}' enctype='multipart/form-data'></form>",_onSubmit:function(a){dojo.stopEvent(a);this.onExecute();this.execute(this.getValues())},submit:function(){this.containerNode.submit()},setValues:function(e){var d={};dojo.forEach(this.getDescendants(),function(g){if(!g.name){return}var f=d[g.name]||(d[g.name]=[]);f.push(g)});for(var b in d){var c=d[b],a=dojo.getObject(b,false,e);if(!dojo.isArray(a)){a=[a]}if(c[0].setChecked){dojo.forEach(c,function(f,g){f.setChecked(dojo.indexOf(a,f.value)!=-1)})}else{dojo.forEach(c,function(f,g){f.setValue(a[g])})}}},getValues:function(){var a={};dojo.forEach(this.getDescendants(),function(e){var d=e.getValue?e.getValue():e.value;var b=e.name;if(!b){return}if(e.setChecked){if(/Radio/.test(e.declaredClass)){if(e.checked){dojo.setObject(b,d,a)}}else{var c=dojo.getObject(b,false,a);if(!c){c=[];dojo.setObject(b,c,a)}if(e.checked){c.push(d)}}}else{dojo.setObject(b,d,a)}});return a},isValid:function(){return dojo.every(this.getDescendants(),function(a){return !a.isValid||a.isValid()})}});dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin],null)}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class=dijitDialogUnderlayWrapper id='${id}_underlay'><div class=dijitDialogUnderlay dojoAttachPoint='node'></div></div>",postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode)},layout:function(){var a=dijit.getViewport();var c=this.node.style,d=this.domNode.style;d.top=a.t+"px";d.left=a.l+"px";c.width=a.w+"px";c.height=a.h+"px";var b=dijit.getViewport();if(a.w!=b.w){c.width=b.w+"px"}if(a.h!=b.h){c.height=b.h+"px"}},show:function(){this.domNode.style.display="block";this.layout();if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="block"}this._resizeHandler=this.connect(window,"onresize","layout")},hide:function(){this.domNode.style.display="none";if(this.bgIframe.iframe){this.bgIframe.iframe.style.display="none"}this.disconnect(this._resizeHandler)},uninitialize:function(){if(this.bgIframe){this.bgIframe.destroy()}}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin],{templateString:null,templatePath:dojo.moduleUrl("dijit","templates/Dialog.html"),open:false,duration:400,_lastFocusItem:null,attributeMap:dojo.mixin(dojo.clone(dijit._Widget.prototype.attributeMap),{title:"titleBar"}),postCreate:function(){dojo.body().appendChild(this.domNode);this.inherited("postCreate",arguments);this.domNode.style.display="none";this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide")},onLoad:function(){this._position();this.inherited("onLoad",arguments)},_setup:function(){this._modalconnects=[];if(this.titleBar){this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar})}this._underlay=new dijit.DialogUnderlay();var a=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:a,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]);this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:a,duration:this.duration,onEnd:function(){a.style.display="none"}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])},uninitialize:function(){if(this._underlay){this._underlay.destroy()}},_position:function(){if(dojo.hasClass(dojo.body(),"dojoMove")){return}var a=dijit.getViewport();var c=dojo.marginBox(this.domNode);var b=this.domNode.style;b.left=Math.floor((a.l+(a.w-c.w)/2))+"px";b.top=Math.floor((a.t+(a.h-c.h)/2))+"px"},_findLastFocus:function(a){this._lastFocused=a.target},_cycleFocus:function(a){if(!this._lastFocusItem){this._lastFocusItem=this._lastFocused}this.titleBar.focus()},_onKey:function(a){if(a.keyCode){var b=a.target;if(b==this.titleBar&&a.shiftKey&&a.keyCode==dojo.keys.TAB){if(this._lastFocusItem){this._lastFocusItem.focus()}dojo.stopEvent(a)}else{while(b){if(b==this.domNode){if(a.keyCode==dojo.keys.ESCAPE){this.hide()}else{return}}b=b.parentNode}if(a.keyCode!=dojo.keys.TAB){dojo.stopEvent(a)}else{if(!dojo.isOpera){try{this.titleBar.focus()}catch(c){}}}}}},show:function(){if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true}if(this._fadeOut.status()=="playing"){this._fadeOut.stop()}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(document.documentElement,"onkeypress",this,"_onKey"));var a=typeof(document.ondeactivate)=="object"?"ondeactivate":"onblur";this._modalconnects.push(dojo.connect(this.containerNode,a,this,"_findLastFocus"));dojo.style(this.domNode,"opacity",0);this.domNode.style.display="block";this.open=true;this._loadCheck();this._position();this._fadeIn.play();this._savedFocus=dijit.getFocus(this);setTimeout(dojo.hitch(this,function(){dijit.focus(this.titleBar)}),50)},hide:function(){if(!this._alreadyInitialized){return}if(this._fadeIn.status()=="playing"){this._fadeIn.stop()}this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];this.connect(this._fadeOut,"onEnd",dojo.hitch(this,function(){dijit.focus(this._savedFocus)}));this.open=false},layout:function(){if(this.domNode.style.display=="block"){this._underlay.layout();this._position()}}});dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin],{title:"",_lastFocusItem:null,templateString:null,templatePath:dojo.moduleUrl("dijit.layout","templates/TooltipDialog.html"),postCreate:function(){this.inherited("postCreate",arguments);this.connect(this.containerNode,"onkeypress","_onKey");var a=typeof(document.ondeactivate)=="object"?"ondeactivate":"onblur";this.connect(this.containerNode,a,"_findLastFocus");this.containerNode.title=this.title},orient:function(a){this.domNode.className="dijitTooltipDialog  dijitTooltipAB"+(a.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(a.charAt(0)=="T"?"Below":"Above")},onOpen:function(a){this.orient(a.corner);this._loadCheck();this.containerNode.focus()},_onKey:function(a){if(a.keyCode==dojo.keys.ESCAPE){this.onCancel()}else{if(a.target==this.containerNode&&a.shiftKey&&a.keyCode==dojo.keys.TAB){if(this._lastFocusItem){this._lastFocusItem.focus()}dojo.stopEvent(a)}else{if(a.keyCode==dojo.keys.TAB){a.stopPropagation()}}}},_findLastFocus:function(a){this._lastFocused=a.target},_cycleFocus:function(a){if(!this._lastFocusItem){this._lastFocusItem=this._lastFocused}this.containerNode.focus()}})}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:'<div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div>',tabIndex:"0",postCreate:function(){this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW])},startup:function(){this.startupKeyNavChildren()}});dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:'<div class="dijitToolbarSeparator dijitInline"></div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:'<div class="dijit dijitLeft dijitInline dijitButton"\n\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"\n\t><div class=\'dijitRight\'\n\t\t><button class="dijitStretch dijitButtonNode dijitButtonContents" dojoAttachPoint="focusNode,titleNode"\n\t\t\ttype="${type}" waiRole="button" waiState="labelledby-${id}_label"\n\t\t\t><span class="dijitInline ${iconClass}" dojoAttachPoint="iconNode" \n \t\t\t\t><span class="dijitToggleButtonIconChar">&#10003</span \n\t\t\t></span\n\t\t\t><span class="dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}</span\n\t\t></button\n\t></div\n></div>\n',_onClick:function(a){if(this.disabled){return false}this._clicked();return this.onClick(a)},_onButtonClick:function(d){dojo.stopEvent(d);var c=this._onClick(d)!==false;if(this.type=="submit"&&c){for(var a=this.domNode;a;a=a.parentNode){var b=dijit.byNode(a);if(b&&b._onSubmit){b._onSubmit(d);break}if(a.tagName.toLowerCase()=="form"){if(!a.onsubmit||a.onsubmit()){a.submit()}break}}}},postCreate:function(){if(this.showLabel==false){var a="";this.label=this.containerNode.innerHTML;a=dojo.trim(this.containerNode.innerText||this.containerNode.textContent);this.titleNode.title=a;dojo.addClass(this.containerNode,"dijitDisplayNone")}this.inherited(arguments)},onClick:function(a){return true},_clicked:function(a){},setLabel:function(a){this.containerNode.innerHTML=this.label=a;if(dojo.isMozilla){var b=dojo.getComputedStyle(this.domNode).display;this.domNode.style.display="none";var c=this;setTimeout(function(){c.domNode.style.display=b},1)}if(this.showLabel==false){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent)}}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container],{baseClass:"dijitDropDownButton",templateString:'<div class="dijit dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class=\'dijitRight\'>\n\t<button class="dijitStretch dijitButtonNode dijitButtonContents" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><div class="dijitInline ${iconClass}" dojoAttachPoint="iconNode"></div\n\t\t><span class="dijitButtonText" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label">${label}</span\n\t\t><span class=\'dijitA11yDownArrow\'>&#9660;</span>\n\t</button>\n</div></div>\n',_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this.dropDown){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(a);delete this.dropDownContainer}dojo.body().appendChild(this.dropDown.domNode);this.dropDown.domNode.style.display="none"},_onArrowClick:function(a){if(this.disabled){return}this._toggleDropDown()},_onDropDownClick:function(b){var a=dojo.isFF&&dojo.isFF<3&&navigator.appVersion.indexOf("Macintosh")!=-1;if(!a||b.detail!=0||this._seenKeydown){this._onArrowClick(b)}this._seenKeydown=false},_onDropDownKeydown:function(a){this._seenKeydown=true},_onDropDownBlur:function(a){this._seenKeydown=false},_onKey:function(a){if(this.disabled){return}if(a.keyCode==dojo.keys.DOWN_ARROW){if(!this.dropDown||this.dropDown.domNode.style.display=="none"){dojo.stopEvent(a);return this._toggleDropDown()}}},_onBlur:function(){this._closeDropDown()},_toggleDropDown:function(){if(this.disabled){return}dijit.focus(this.popupStateNode);var c=this.dropDown;if(!c){return false}if(!c.isShowingNow){if(c.href&&!c.isLoaded){var a=this;var b=dojo.connect(c,"onLoad",function(){dojo.disconnect(b);a._openDropDown()});c._loadCheck(true);return}else{this._openDropDown()}}else{this._closeDropDown()}},_openDropDown:function(){var e=this.dropDown;var b=e.domNode.style.width;var c=this;dijit.popup.open({parent:this,popup:e,around:this.domNode,orient:this.isLeftToRight()?{BL:"TL",BR:"TR",TL:"BL",TR:"BR"}:{BR:"TR",BL:"TL",TR:"BR",TL:"BL"},onExecute:function(){c._closeDropDown(true)},onCancel:function(){c._closeDropDown(true)},onClose:function(){e.domNode.style.width=b;c.popupStateNode.removeAttribute("popupActive");this._opened=false}});if(this.domNode.offsetWidth>e.domNode.offsetWidth){var d=null;if(!this.isLeftToRight()){d=e.domNode.parentNode;var a=d.offsetLeft+d.offsetWidth}dojo.marginBox(e.domNode,{w:this.domNode.offsetWidth});if(d){d.style.left=a-this.domNode.offsetWidth+"px"}}this.popupStateNode.setAttribute("popupActive","true");this._opened=true;if(e.focus){e.focus()}},_closeDropDown:function(a){if(this._opened){dijit.popup.close(this.dropDown);if(a){this.focus()}this._opened=false}}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:'<table class=\'dijit dijitReset dijitInline dijitLeft\'\n\tcellspacing=\'0\' cellpadding=\'0\'\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse">\n\t<tr>\n\t\t<td\tclass="dijitStretch dijitButtonContents dijitButtonNode"\n\t\t\ttabIndex="${tabIndex}"\n\t\t\tdojoAttachEvent="ondijitclick:_onButtonClick"  dojoAttachPoint="titleNode"\n\t\t\twaiRole="button" waiState="labelledby-${id}_label">\n\t\t\t<div class="dijitInline ${iconClass}" dojoAttachPoint="iconNode"></div>\n\t\t\t<span class="dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}</span>\n\t\t</td>\n\t\t<td class=\'dijitReset dijitRight dijitButtonNode dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="popupStateNode,focusNode"\n\t\t\tdojoAttachEvent="ondijitclick:_onArrowClick, onkeypress:_onKey"\n\t\t\tstateModifier="DownArrow"\n\t\t\ttitle="${optionsTitle}" name="${name}"\n\t\t\twaiRole="button" waiState="haspopup-true"\n\t\t><div waiRole="presentation">&#9660;</div>\n\t</td></tr>\n</table>\n',attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{id:"",name:""}),optionsTitle:"",baseClass:"dijitComboButton",_focusedNode:null,postCreate:function(){this.inherited(arguments);this._focalNodes=[this.titleNode,this.popupStateNode];dojo.forEach(this._focalNodes,dojo.hitch(this,function(a){if(dojo.isIE){this.connect(a,"onactivate",this._onNodeFocus)}else{this.connect(a,"onfocus",this._onNodeFocus)}}))},focusFocalNode:function(a){this._focusedNode=a;dijit.focus(a)},hasNextFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[1]},focusNext:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?1:0];dijit.focus(this._focusedNode)},hasPrevFocalNode:function(){return this._focusedNode!==this.getFocalNodes()[0]},focusPrev:function(){this._focusedNode=this.getFocalNodes()[this._focusedNode?0:1];dijit.focus(this._focusedNode)},getFocalNodes:function(){return this._focalNodes},_onNodeFocus:function(a){this._focusedNode=a.currentTarget},_onBlur:function(a){this.inherited(arguments);this._focusedNode=null}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,_clicked:function(a){this.setChecked(!this.checked)},setChecked:function(a){this.checked=a;dijit.setWaiState(this.focusNode||this.domNode,"pressed",this.checked);this._setStateClass();this.onChange(a)}})}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit.Menu",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{constructor:function(){this._bindings=[]},templateString:'<table class="dijit dijitMenu dijitReset dijitMenuTable" waiRole="menu" dojoAttachEvent="onkeypress:_onKeyPress"><tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody></table>',targetNodeIds:[],contextMenuForWindow:false,parentMenu:null,popupDelay:500,_contextMenuWithMouse:false,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body())}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this)}this.connectKeyNavHandlers([dojo.keys.UP_ARROW],[dojo.keys.DOWN_ARROW])},startup:function(){dojo.forEach(this.getChildren(),function(a){a.startup()});this.startupKeyNavChildren()},onExecute:function(){},onCancel:function(a){},_moveToPopup:function(a){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(a)}},_onKeyPress:function(a){if(a.ctrlKey||a.altKey){return}switch(a.keyCode){case dojo.keys.RIGHT_ARROW:this._moveToPopup(a);dojo.stopEvent(a);break;case dojo.keys.LEFT_ARROW:if(this.parentMenu){this.onCancel(false)}else{dojo.stopEvent(a)}break}},onItemHover:function(a){this.focusChild(a);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay)}},_onChildBlur:function(a){dijit.popup.close(a.popup);a._blur();this._stopPopupTimer()},onItemUnhover:function(a){},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null}},_getTopMenu:function(){for(var a=this;a.parentMenu;a=a.parentMenu){}return a},onItemClick:function(a){if(a.disabled){return false}if(a.popup){if(!this.is_open){this._openPopup()}}else{this.onExecute();a.onClick()}},_iframeContentWindow:function(a){var b=dijit.getDocumentWindow(dijit.Menu._iframeContentDocument(a))||dijit.Menu._iframeContentDocument(a)["__parent__"]||(a.name&&document.frames[a.name])||null;return b},_iframeContentDocument:function(a){var b=a.contentDocument||(a.contentWindow&&a.contentWindow.document)||(a.name&&document.frames[a.name]&&document.frames[a.name].document)||null;return b},bindDomNode:function(a){a=dojo.byId(a);var b=dijit.getDocumentWindow(a.ownerDocument);if(a.tagName.toLowerCase()=="iframe"){b=this._iframeContentWindow(a);a=dojo.withGlobal(b,dojo.body)}var c=(a==dojo.body()?dojo.doc:a);a[this.id]=this._bindings.push([dojo.connect(c,"oncontextmenu",this,"_openMyself"),dojo.connect(c,"onkeydown",this,"_contextKey"),dojo.connect(c,"onmousedown",this,"_contextMouse")])},unBindDomNode:function(e){var d=dojo.byId(e);var c=d[this.id]-1,a=this._bindings[c];dojo.forEach(a,dojo.disconnect);delete this._bindings[c]},_contextKey:function(b){this._contextMenuWithMouse=false;if(b.keyCode==dojo.keys.F10){dojo.stopEvent(b);if(b.shiftKey&&b.type=="keydown"){var a={target:b.target,pageX:b.pageX,pageY:b.pageY};a.preventDefault=a.stopPropagation=function(){};window.setTimeout(dojo.hitch(this,function(){this._openMyself(a)}),1)}}},_contextMouse:function(a){this._contextMenuWithMouse=true},_openMyself:function(g){dojo.stopEvent(g);var a,h;if(dojo.isSafari||this._contextMenuWithMouse){a=g.pageX;h=g.pageY}else{var f=dojo.coords(g.target,true);a=f.x+10;h=f.y+10}var c=this;var b=dijit.getFocus(this);function d(){dijit.focus(b);dijit.popup.close(c)}dijit.popup.open({popup:this,x:a,y:h,onExecute:d,onCancel:d,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){dijit.popup.close(this)}},onOpen:function(a){this.isShowingNow=true},onClose:function(){this._stopPopupTimer();this.parentMenu=null;this.isShowingNow=false;this.currentPopup=null;if(this.focusedChild){this._onChildBlur(this.focusedChild);this.focusedChild=null}},_openPopup:function(){this._stopPopupTimer();var a=this.focusedChild;var b=a.popup;if(b.isShowingNow){return}b.parentMenu=this;var c=this;dijit.popup.open({parent:this,popup:b,around:a.arrowCell,orient:this.isLeftToRight()?{TR:"TL",TL:"TR"}:{TL:"TR",TR:"TL"},onCancel:function(){dijit.popup.close(b);a.focus();c.currentPopup=null}});this.currentPopup=b;if(b.focus){b.focus()}}});dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitReset dijitMenuItem"dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick"><td class="dijitReset"><div class="dijitMenuItemIcon ${iconClass}" dojoAttachPoint="iconNode" ></div></td><td tabIndex="-1" class="dijitReset dijitMenuItemLabel" dojoAttachPoint="containerNode" waiRole="menuitem"></td><td class="dijitReset" dojoAttachPoint="arrowCell"><div class="dijitMenuExpand" dojoAttachPoint="expand" style="display:none"><span class="dijitInline dijitArrowNode dijitMenuExpandInner">+</span></div></td></tr>',label:"",iconClass:"",disabled:false,postCreate:function(){dojo.setSelectable(this.domNode,false);this.setDisabled(this.disabled);if(this.label){this.containerNode.innerHTML=this.label}},_onHover:function(){this.getParent().onItemHover(this)},_onUnhover:function(){this.getParent().onItemUnhover(this)},_onClick:function(a){this.getParent().onItemClick(this);dojo.stopEvent(a)},onClick:function(){},focus:function(){dojo.addClass(this.domNode,"dijitMenuItemHover");try{dijit.focus(this.containerNode)}catch(a){}},_blur:function(){dojo.removeClass(this.domNode,"dijitMenuItemHover")},setDisabled:function(a){this.disabled=a;dojo[a?"addClass":"removeClass"](this.domNode,"dijitMenuItemDisabled");dijit.setWaiState(this.containerNode,"disabled",a?"true":"false")}});dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var a=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,a[0]);this.dropDownContainer=this.srcNodeRef}},startup:function(){if(!this.popup){var a=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(a)}dojo.body().appendChild(this.popup.domNode);this.popup.domNode.style.display="none";dojo.addClass(this.expand,"dijitMenuExpandEnabled");dojo.style(this.expand,"display","");dijit.setWaiState(this.containerNode,"haspopup","true")}});dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:'<tr class="dijitMenuSeparator"><td colspan=3><div class="dijitMenuSeparatorTop"></div><div class="dijitMenuSeparatorBottom"></div></td></tr>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}})}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:200,templateString:'<div class="dijitTooltip dijitTooltipLeft" id="dojoTooltip">\n\t<div class="dijitTooltipContainer dijitTooltipContents" dojoAttachPoint="containerNode" waiRole=\'alert\'></div>\n\t<div class="dijitTooltipConnector"></div>\n</div>\n',postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")})},show:function(d,a){if(this.aroundNode&&this.aroundNode===a){return}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return}this.containerNode.innerHTML=d;this.domNode.style.top=(this.domNode.offsetTop+1)+"px";var c=this.isLeftToRight()?{BR:"BL",BL:"BR"}:{BL:"BR",BR:"BL"};var b=dijit.placeOnScreenAroundElement(this.domNode,a,c);this.domNode.className="dijitTooltip dijitTooltip"+(b.corner=="BL"?"Right":"Left");dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=a},_onShow:function(){if(dojo.isIE){this.domNode.style.filter=""}},hide:function(a){if(!this.aroundNode||this.aroundNode!==a){return}if(this._onDeck){this._onDeck=null;return}this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play()},_onHide:function(){this.domNode.style.cssText="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null}}});dijit.showTooltip=function(b,a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.show(b,a)};dijit.hideTooltip=function(a){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip()}return dijit._masterTT.hide(a)};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],postCreate:function(){if(this.srcNodeRef){this.srcNodeRef.style.display="none"}this._connectNodes=[];dojo.forEach(this.connectId,function(b){var a=dojo.byId(b);if(a){this._connectNodes.push(a);dojo.forEach(["onMouseOver","onMouseOut","onFocus","onBlur","onHover","onUnHover"],function(c){this.connect(a,c.toLowerCase(),"_"+c)},this);if(dojo.isIE){a.style.zoom=1}}},this)},_onMouseOver:function(a){this._onHover(a)},_onMouseOut:function(a){if(dojo.isDescendant(a.relatedTarget,a.target)){return}this._onUnHover(a)},_onFocus:function(a){this._focus=true;this._onHover(a)},_onBlur:function(a){this._focus=false;this._onUnHover(a)},_onHover:function(b){if(!this._showTimer){var a=b.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(a)}),this.showDelay)}},_onUnHover:function(a){if(this._focus){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()},open:function(a){a=a||this._connectNodes[0];if(!a){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}dijit.showTooltip(this.label||this.domNode.innerHTML,a);this._connectNode=a},close:function(){dijit.hideTooltip(this._connectNode);delete this._connectNode;if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},uninitialize:function(){this.close()}})}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",templateString:'<input class="dojoTextBox" dojoAttachPoint=\'textbox,focusNode\' name="${name}"\n\tdojoAttachEvent=\'onmouseenter:_onMouse,onmouseleave:_onMouse,onfocus:_onMouse,onblur:_onMouse,onkeyup,onkeypress:_onKeyPress\'\n\tautocomplete="off" type="${type}"\n\t/>\n',baseClass:"dijitTextBox",attributeMap:dojo.mixin(dojo.clone(dijit.form._FormWidget.prototype.attributeMap),{maxLength:"focusNode"}),getDisplayedValue:function(){return this.filter(this.textbox.value)},getValue:function(){return this.parse(this.getDisplayedValue(),this.constraints)},setValue:function(d,c,b){var a=this.filter(d);if((typeof a==typeof d)&&(b==null||b==undefined)){b=this.format(a,this.constraints)}if(b!=null&&b!=undefined){this.textbox.value=b}dijit.form.TextBox.superclass.setValue.call(this,a,c)},setDisplayedValue:function(a){this.textbox.value=a;this.setValue(this.getValue(),true)},forWaiValuenow:function(){return this.getDisplayedValue()},format:function(a,b){return((a==null||a==undefined)?"":(a.toString?a.toString():a))},parse:function(a,b){return a},postCreate:function(){this.textbox.setAttribute("value",this.getDisplayedValue());this.inherited("postCreate",arguments);if(this.srcNodeRef){dojo.style(this.textbox,"cssText",this.style);this.textbox.className+=" "+this["class"]}this._layoutHack()},_layoutHack:function(){if(dojo.isFF==2&&this.domNode.tagName=="TABLE"){var b=this.domNode;var a=b.style.opacity;b.style.opacity="0.999";setTimeout(function(){b.style.opacity=a},0)}},filter:function(a){if(a==undefined||a==null){return""}else{if(typeof a!="string"){return a}}if(this.trim){a=dojo.trim(a)}if(this.uppercase){a=a.toUpperCase()}if(this.lowercase){a=a.toLowerCase()}if(this.propercase){a=a.replace(/[^\s]+/g,function(b){return b.substring(0,1).toUpperCase()+b.substring(1)})}return a},_onBlur:function(){this.setValue(this.getValue(),(this.isValid?this.isValid():true))},onkeyup:function(){}})}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.requireLocalization("dijit.form","validate",null,"ko,zh-cn,zh,ja,zh-tw,ru,it,hu,ROOT,fr,pt,pl,es,de,cs");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:'<table style="display: -moz-inline-stack;" class="dijit dijitReset dijitInlineTable" cellspacing="0" cellpadding="0"\n\tid="widget_${id}" name="${name}"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse" waiRole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class="dijitReset dijitInputField" width="100%"\n\t\t\t><input dojoAttachPoint=\'textbox,focusNode\' dojoAttachEvent=\'onfocus,onblur:_onMouse,onkeyup,onkeypress:_onKeyPress\' autocomplete="off"\n\t\t\ttype=\'${type}\' name=\'${name}\'\n\t\t/></td\n\t\t><td class="dijitReset dijitValidationIconField" width="0%"\n\t\t\t><div dojoAttachPoint=\'iconNode\' class=\'dijitValidationIcon\'></div><div class=\'dijitValidationIconText\'>&Chi;</div\n\t\t></td\n\t></tr\n></table>\n',baseClass:"dijitTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",constraints:{},regExp:".*",regExpGen:function(a){return this.regExp},state:"",setValue:function(){this.inherited("setValue",arguments);this.validate(false)},validator:function(a,b){return(new RegExp("^("+this.regExpGen(b)+")"+(this.required?"":"?")+"$")).test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||this.parse(a,b)!==null)},isValid:function(a){return this.validator(this.textbox.value,this.constraints)},_isEmpty:function(a){return/^\s*$/.test(a)},getErrorMessage:function(a){return this.invalidMessage},getPromptMessage:function(a){return this.promptMessage},validate:function(a){var b="";var c=this.isValid(a);var d=this._isEmpty(this.textbox.value);this.state=(c||(!this._hasBeenBlurred&&d))?"":"Error";this._setStateClass();dijit.setWaiState(this.focusNode,"invalid",(c?"false":"true"));if(a){if(d){b=this.getPromptMessage(true)}if(!b&&!c){b=this.getErrorMessage(true)}}this._displayMessage(b)},_message:"",_displayMessage:function(a){if(this._message==a){return}this._message=a;this.displayMessage(a)},displayMessage:function(a){if(a){dijit.showTooltip(a,this.domNode)}else{dijit.hideTooltip(this.domNode)}},_hasBeenBlurred:false,_onBlur:function(a){this._hasBeenBlurred=true;this.validate(false);this.inherited("_onBlur",arguments)},onfocus:function(a){this.validate(true);this._onMouse(a)},onkeyup:function(a){this.onfocus(a)},constructor:function(){this.constraints={}},postMixInProperties:function(){this.inherited("postMixInProperties",arguments);this.constraints.locale=this.lang;this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage}var a=this.regExpGen(this.constraints);this.regExp=a}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{serialize:function(b,a){return(b.toString?b.toString():"")},toString:function(){var a=this.filter(this.getValue());return(a!=null)?((typeof a=="string")?a:this.serialize(a,this.constraints)):""},validate:function(){this.valueNode.value=this.toString();this.inherited("validate",arguments)},postCreate:function(){var b=this.textbox;var a=(this.valueNode=document.createElement("input"));a.setAttribute("type",b.type);a.setAttribute("value",this.toString());dojo.style(a,"display","none");a.name=this.textbox.name;this.textbox.name="_"+this.textbox.name+"_displayed_";this.textbox.removeAttribute("name");dojo.place(a,b,"after");this.inherited("postCreate",arguments)}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",compare:function(b,a){return b-a},rangeCheck:function(a,d){var c=(typeof d.min!="undefined");var b=(typeof d.max!="undefined");if(c||b){return(!c||this.compare(a,d.min)>=0)&&(!b||this.compare(a,d.max)<=0)}else{return true}},isInRange:function(a){return this.rangeCheck(this.getValue(),this.constraints)},isValid:function(a){return this.inherited("isValid",arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(a))},getErrorMessage:function(a){if(dijit.form.RangeBoundTextBox.superclass.isValid.call(this,false)&&!this.isInRange(a)){return this.rangeMessage}else{return this.inherited("getErrorMessage",arguments)}},postMixInProperties:function(){this.inherited("postMixInProperties",arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage}},postCreate:function(){this.inherited("postCreate",arguments);if(typeof this.constraints.min!="undefined"){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min)}if(typeof this.constraints.max!="undefined"){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max)}}})}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.requireLocalization("dijit.form","ComboBox",null,"ko,zh,ja,zh-tw,ru,it,hu,ROOT,fr,pt,pl,es,de,cs");dojo.declare("dijit.form.ComboBoxMixin",null,{item:null,pageSize:Infinity,store:null,query:{},autoComplete:true,searchDelay:100,searchAttr:"name",ignoreCase:true,hasDownArrow:true,_hasFocus:false,templateString:'<table class="dijit dijitReset dijitInlineTable dijitLeft" cellspacing="0" cellpadding="0"\n\tid="widget_${id}" name="${name}" dojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse" waiRole="presentation"\n\t><tr class="dijitReset"\n\t\t><td class=\'dijitReset dijitStretch dijitInputField\' width="100%"\n\t\t\t><input type="text" autocomplete="off" name="${name}"\n\t\t\tdojoAttachEvent="onkeypress, onkeyup, onfocus, compositionend"\n\t\t\tdojoAttachPoint="textbox,focusNode" waiRole="combobox"\n\t\t/></td\n\t\t><td class="dijitReset dijitValidationIconField" width="0%"\n\t\t\t><div dojoAttachPoint=\'iconNode\' class=\'dijitValidationIcon\'></div\n\t\t\t><div class=\'dijitValidationIconText\'>&Chi;</div\n\t\t></td\n\t\t><td class=\'dijitReset dijitRight dijitButtonNode dijitDownArrowButton\' width="0%"\n\t\t\tdojoAttachPoint="downArrowNode"\n\t\t\tdojoAttachEvent="onmousedown:_onArrowMouseDown,onmouseup:_onMouse,onmouseenter:_onMouse,onmouseleave:_onMouse"\n\t\t\t><div class="dijitDownArrowButtonInner" waiRole="presentation"\n\t\t\t\t><div class="dijitDownArrowButtonChar">&#9660;</div\n\t\t\t></div\n\t\t></td\t\n\t></tr\n></table>\n',baseClass:"dijitComboBox",_lastDisplayedValue:"",getValue:function(){return dijit.form.TextBox.superclass.getValue.apply(this,arguments)},setDisplayedValue:function(a){this._lastDisplayedValue=a;this.setValue(a,true)},_getCaretPos:function(a){if(typeof(a.selectionStart)=="number"){return a.selectionStart}else{if(dojo.isIE){var c=document.selection.createRange().duplicate();var b=a.createTextRange();c.move("character",0);b.move("character",0);try{b.setEndPoint("EndToEnd",c);return String(b.text).replace(/\r/g,"").length}catch(d){return 0}}}},_setCaretPos:function(b,a){a=parseInt(a);this._setSelectedRange(b,a,a)},_setSelectedRange:function(element,start,end){if(!end){end=element.value.length}if(element.setSelectionRange){dijit.focus(element);element.setSelectionRange(start,end)}else{if(element.createTextRange){var range=element.createTextRange();with(range){collapse(true);moveEnd("character",end);moveStart("character",start);select()}}else{element.value=element.value;element.blur();dijit.focus(element);var dist=parseInt(element.value.length)-end;var tchar=String.fromCharCode(37);var tcc=tchar.charCodeAt(0);for(var x=0;x<dist;x++){var te=document.createEvent("KeyEvents");te.initKeyEvent("keypress",true,true,null,false,false,false,false,tcc,tcc);element.dispatchEvent(te)}}}},onkeypress:function(a){if(a.altKey||(a.ctrlKey&&a.charCode!=118)){return}var c=false;this.item=null;if(this._isShowingNow){this._popupWidget.handleKey(a)}switch(a.keyCode){case dojo.keys.PAGE_DOWN:case dojo.keys.DOWN_ARROW:if(!this._isShowingNow||this._prev_key_esc){this._arrowPressed();c=true}else{this._announceOption(this._popupWidget.getHighlightedOption())}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dojo.keys.PAGE_UP:case dojo.keys.UP_ARROW:if(this._isShowingNow){this._announceOption(this._popupWidget.getHighlightedOption())}dojo.stopEvent(a);this._prev_key_backspace=false;this._prev_key_esc=false;break;case dojo.keys.ENTER:var d;if(this._isShowingNow&&(d=this._popupWidget.getHighlightedOption())){if(d==this._popupWidget.nextButton){this._nextSearch(1);dojo.stopEvent(a);break}else{if(d==this._popupWidget.previousButton){this._nextSearch(-1);dojo.stopEvent(a);break}}}else{this.setDisplayedValue(this.getDisplayedValue())}a.preventDefault();case dojo.keys.TAB:var b=this.getDisplayedValue();if(this._popupWidget&&(b==this._popupWidget._messages.previousMessage||b==this._popupWidget._messages.nextMessage)){break}if(this._isShowingNow){this._prev_key_backspace=false;this._prev_key_esc=false;if(this._popupWidget.getHighlightedOption()){this._popupWidget.setValue({target:this._popupWidget.getHighlightedOption()},true)}this._hideResultList()}break;case dojo.keys.SPACE:this._prev_key_backspace=false;this._prev_key_esc=false;if(this._isShowingNow&&this._popupWidget.getHighlightedOption()){dojo.stopEvent(a);this._selectOption();this._hideResultList()}else{c=true}break;case dojo.keys.ESCAPE:this._prev_key_backspace=false;this._prev_key_esc=true;this._hideResultList();if(this._lastDisplayedValue!=this.getDisplayedValue()){this.setDisplayedValue(this._lastDisplayedValue);dojo.stopEvent(a)}else{this.setValue(this.getValue(),false)}break;case dojo.keys.DELETE:case dojo.keys.BACKSPACE:this._prev_key_esc=false;this._prev_key_backspace=true;c=true;break;case dojo.keys.RIGHT_ARROW:case dojo.keys.LEFT_ARROW:this._prev_key_backspace=false;this._prev_key_esc=false;break;default:this._prev_key_backspace=false;this._prev_key_esc=false;if(dojo.isIE||a.charCode!=0){c=true}}if(this.searchTimer){clearTimeout(this.searchTimer)}if(c){this.searchTimer=setTimeout(dojo.hitch(this,this._startSearchFromInput),this.searchDelay)}},_autoCompleteText:function(a){this._setSelectedRange(this.focusNode,this.focusNode.value.length,this.focusNode.value.length);if(new RegExp("^"+escape(this.focusNode.value),this.ignoreCase?"i":"").test(escape(a))){var b=this._getCaretPos(this.focusNode);if((b+1)>this.focusNode.value.length){this.focusNode.value=a;this._setSelectedRange(this.focusNode,b,this.focusNode.value.length);dijit.setWaiState(this.focusNode,"valuenow",a)}}else{this.focusNode.value=a;this._setSelectedRange(this.focusNode,0,this.focusNode.value.length);dijit.setWaiState(this.focusNode,"valuenow",a)}},_openResultList:function(a,b){if(this.disabled||b.query[this.searchAttr]!=this._lastQuery){return}this._popupWidget.clearResultList();if(!a.length){this._hideResultList();return}var c=new String(this.store.getValue(a[0],this.searchAttr));if(c&&this.autoComplete&&!this._prev_key_backspace&&(b.query[this.searchAttr]!="*")){this._autoCompleteText(c);dijit.setWaiState(this.focusNode||this.domNode,"valuenow",c)}this._popupWidget.createOptions(a,b,dojo.hitch(this,this._getMenuLabelFromItem));this._showResultList();if(b.direction){if(b.direction==1){this._popupWidget.highlightFirstOption()}else{if(b.direction==-1){this._popupWidget.highlightLastOption()}}this._announceOption(this._popupWidget.getHighlightedOption())}},_showResultList:function(){this._hideResultList();var items=this._popupWidget.getItems(),visibleCount=Math.min(items.length,this.maxListLength);this._arrowPressed();this._displayMessage("");with(this._popupWidget.domNode.style){width="";height=""}var best=this.open();var popupbox=dojo.marginBox(this._popupWidget.domNode);this._popupWidget.domNode.style.overflow=((best.h==popupbox.h)&&(best.w==popupbox.w))?"hidden":"auto";var newwidth=best.w;if(best.h<this._popupWidget.domNode.scrollHeight){newwidth+=16}dojo.marginBox(this._popupWidget.domNode,{h:best.h,w:Math.max(newwidth,this.domNode.offsetWidth)})},_hideResultList:function(){if(this._isShowingNow){dijit.popup.close(this._popupWidget);this._arrowIdle();this._isShowingNow=false}},_onBlur:function(){this._hasFocus=false;this._hasBeenBlurred=true;this._hideResultList();this._arrowIdle();var a=this.getDisplayedValue();if(this._popupWidget&&(a==this._popupWidget._messages.previousMessage||a==this._popupWidget._messages.nextMessage)){this.setValue(this._lastValueReported,true)}else{this.setDisplayedValue(a)}},onfocus:function(a){this._hasFocus=true;this._onMouse(a)},_announceOption:function(a){if(a==null){return}var b;if(a==this._popupWidget.nextButton||a==this._popupWidget.previousButton){b=a.innerHTML}else{b=this.store.getValue(a.item,this.searchAttr)}this.focusNode.value=this.focusNode.value.substring(0,this._getCaretPos(this.focusNode));this._autoCompleteText(b)},_selectOption:function(a){var b=null;if(!a){a={target:this._popupWidget.getHighlightedOption()}}if(!a.target){this.setDisplayedValue(this.getDisplayedValue());return}else{b=a.target}if(!a.noHide){this._hideResultList();this._setCaretPos(this.focusNode,this.store.getValue(b.item,this.searchAttr).length)}this._doSelect(b)},_doSelect:function(a){this.item=a.item;this.setValue(this.store.getValue(a.item,this.searchAttr),true)},_onArrowMouseDown:function(a){if(this.disabled){return}dojo.stopEvent(a);this.focus();if(this._isShowingNow){this._hideResultList()}else{this._startSearch("")}},_startSearchFromInput:function(){this._startSearch(this.focusNode.value)},_startSearch:function(a){if(!this._popupWidget){this._popupWidget=new dijit.form._ComboBoxMenu({onChange:dojo.hitch(this,this._selectOption)})}var c=this.query;this._lastQuery=c[this.searchAttr]=a+"*";var b=this.store.fetch({queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:c,onComplete:dojo.hitch(this,"_openResultList"),start:0,count:this.pageSize});function d(e,f){e.start+=e.count*f;e.direction=f;e.store.fetch(e)}this._nextSearch=this._popupWidget.onPage=dojo.hitch(this,d,b)},_getValueField:function(){return this.searchAttr},_arrowPressed:function(){if(!this.disabled&&this.hasDownArrow){dojo.addClass(this.downArrowNode,"dijitArrowButtonActive")}},_arrowIdle:function(){if(!this.disabled&&this.hasDownArrow){dojo.removeClass(this.downArrowNode,"dojoArrowButtonPushed")}},compositionend:function(a){this.onkeypress({charCode:-1})},constructor:function(){this.query={}},postMixInProperties:function(){if(!this.hasDownArrow){this.baseClass="dijitTextBox"}if(!this.store){var a=this.srcNodeRef?dojo.query("> option",this.srcNodeRef).map(function(b){b.style.display="none";return{value:b.getAttribute("value"),name:String(b.innerHTML)}}):{};this.store=new dojo.data.ItemFileReadStore({data:{identifier:this._getValueField(),items:a}});if(a&&a.length&&!this.value){this.value=a[this.srcNodeRef.selectedIndex!=-1?this.srcNodeRef.selectedIndex:0][this._getValueField()]}}},uninitialize:function(){if(this._popupWidget){this._hideResultList();this._popupWidget.destroy()}},_getMenuLabelFromItem:function(a){return{html:false,label:this.store.getValue(a,this.searchAttr)}},open:function(){this._isShowingNow=true;return dijit.popup.open({popup:this._popupWidget,around:this.domNode,parent:this})}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitMenu' dojoAttachEvent='onmousedown,onmouseup,onmouseover,onmouseout' tabIndex='-1' style='overflow:\"auto\";'><div class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton'></div><div class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton'></div></div>",_messages:null,postMixInProperties:function(){this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);this.inherited("postMixInProperties",arguments)},setValue:function(a){this.value=a;this.onChange(a)},onChange:function(a){},onPage:function(a){},postCreate:function(){this.previousButton.innerHTML=this._messages.previousMessage;this.nextButton.innerHTML=this._messages.nextMessage;this.inherited("postCreate",arguments)},onClose:function(){this._blurOptionNode()},_createOption:function(c,b){var a=b(c);var d=document.createElement("div");if(a.html){d.innerHTML=a.label}else{d.appendChild(document.createTextNode(a.label))}if(d.innerHTML==""){d.innerHTML="&nbsp;"}d.item=c;return d},createOptions:function(b,c,a){this.previousButton.style.display=c.start==0?"none":"";var d=this;dojo.forEach(b,function(e){var f=d._createOption(e,a);f.className="dijitMenuItem";d.domNode.insertBefore(f,d.nextButton)});this.nextButton.style.display=c.count==b.length?"":"none"},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2])}},getItems:function(){return this.domNode.childNodes},getListLength:function(){return this.domNode.childNodes.length-2},onmousedown:function(a){dojo.stopEvent(a)},onmouseup:function(a){if(a.target===this.domNode){return}else{if(a.target==this.previousButton){this.onPage(-1)}else{if(a.target==this.nextButton){this.onPage(1)}else{var b=a.target;while(!b.item){b=b.parentNode}this.setValue({target:b},true)}}}},onmouseover:function(a){if(a.target===this.domNode){return}var b=a.target;if(!(b==this.previousButton||b==this.nextButton)){while(!b.item){b=b.parentNode}}this._focusOptionNode(b)},onmouseout:function(a){if(a.target===this.domNode){return}this._blurOptionNode()},_focusOptionNode:function(a){if(this._highlighted_option!=a){this._blurOptionNode();this._highlighted_option=a;dojo.addClass(this._highlighted_option,"dijitMenuItemHover")}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemHover");this._highlighted_option=null}},_highlightNextOption:function(){if(!this.getHighlightedOption()){this._focusOptionNode(this.domNode.firstChild.style.display=="none"?this.domNode.firstChild.nextSibling:this.domNode.firstChild)}else{if(this._highlighted_option.nextSibling&&this._highlighted_option.nextSibling.style.display!="none"){this._focusOptionNode(this._highlighted_option.nextSibling)}}dijit.scrollIntoView(this._highlighted_option)},highlightFirstOption:function(){this._focusOptionNode(this.domNode.firstChild.nextSibling);dijit.scrollIntoView(this._highlighted_option)},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dijit.scrollIntoView(this._highlighted_option)},_highlightPrevOption:function(){if(!this.getHighlightedOption()){this._focusOptionNode(this.domNode.lastChild.style.display=="none"?this.domNode.lastChild.previousSibling:this.domNode.lastChild)}else{if(this._highlighted_option.previousSibling&&this._highlighted_option.previousSibling.style.display!="none"){this._focusOptionNode(this._highlighted_option.previousSibling)}}dijit.scrollIntoView(this._highlighted_option)},_page:function(b){var e=0;var c=this.domNode.scrollTop;var a=parseInt(dojo.getComputedStyle(this.domNode).height);if(!this.getHighlightedOption()){this._highlightNextOption()}while(e<a){if(b){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break}this._highlightPrevOption()}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break}this._highlightNextOption()}var d=this.domNode.scrollTop;e+=(d-c)*(b?-1:1);c=d}},pageUp:function(){this._page(true)},pageDown:function(){this._page(false)},getHighlightedOption:function(){return this._highlighted_option&&this._highlighted_option.parentNode?this._highlighted_option:null},handleKey:function(a){switch(a.keyCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();break;case dojo.keys.PAGE_DOWN:this.pageDown();break;case dojo.keys.UP_ARROW:this._highlightPrevOption();break;case dojo.keys.PAGE_UP:this.pageUp();break}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{postMixInProperties:function(){dijit.form.ComboBoxMixin.prototype.postMixInProperties.apply(this,arguments);dijit.form.ValidationTextBox.prototype.postMixInProperties.apply(this,arguments)}})}dojo.i18n._preloadLocalizations("dijit.nls.dijit-all",["es-es","es","hu","it-it","de","pt-br","pl","fr-fr","zh-cn","pt","en-us","zh","ru","xx","fr","zh-tw","it","cs","en-gb","de-de","ja-jp","ko-kr","ko","en","ROOT","ja"]);
window.aimluck=window.aimluck||{};dojo.require("dojo.string");dojo.requireLocalization("aipo","locale");aimluck.namespace=function(c){if(!c||!c.length){return null}var d=c.split(".");var b=aimluck;for(var a=(d[0]=="aimluck")?1:0;a<d.length;++a){b[d[a]]=b[d[a]]||{};b=b[d[a]]}return b};function getObjectById(a){if(document.getElementById){return document.getElementById(a)}else{if(document.all){return document.all(a)}else{if(document.layers){return document.layers[a]}}}}function ew(a){disableButton(a.form);a.form.action=a.form.action+"?"+a.name+"=1";a.form.submit()}function dw(b){var a=dojo.i18n.getLocalization("aipo","locale");var c=dojo.string.substitute(a.DW_STR,{dw_del:a.DW_DEL,dw_this:a.DW_THIS,dw_name:b.form.name});if(confirm(c)){disableButton(b.form);b.form.action=b.form.action+"?"+b.name+"=1";b.form.submit()}}function ews(a){disableButton(a.form);a.form.action=a.form.action+"?"+a.name+"=1";a.form.submit()}function dws(b){var a=dojo.i18n.getLocalization("aipo","locale");var c=dojo.string.substitute(a.DWS_STR,{dws_del:a.DWS_DEL,dws_sel:a.DWS_SEL,dws_name:b.form._name.value});if(confirm(c)){disableButton(b.form);b.form.action=b.form.action+"?"+b.name+"=1";b.form.submit()}}function setHiddenValue(a){if(a.name){var b=document.createElement("input");b.type="hidden";b.name=a.name;b.value=a.value;a.form.appendChild(b)}}function disableSubmit(b){var c=b.elements;for(var a=0;a<c.length;a++){if(c[a].type=="submit"){c[a].disabled=true}}}function disableButton(b){var c=b.elements;for(var a=0;a<c.length;a++){if(c[a].type=="button"){c[a].disabled=true}}}function check_new_mail(a,b){a.form.action=a.form.action+"?confirmlasttime=true&start="+b;a.form.submit()}function createAction(a){a.form.action=a.form.action+"?"+a.name+"=1"}function verifyCheckBox(f,g,e){var d=0;var c;for(c=0;c<f.elements.length;c++){if(f.elements[c].checked){d++}}if(d==0){var b=dojo.i18n.getLocalization("aipo","locale");var a=dojo.string.substitute(b.VERIFYCB_STR,{verifycb_sel:b.VERIFYCB_SEL,verifycb_gt_one:b.VERIFYCB_GT_ONE,verifycb_cb:b.VERIFYCB_CB});alert(a);return false}else{return g(e)}}function submit_member(a){var b=a.options;for(i=0;i<b.length;i++){b[i].selected=true}}function add_option(a,c,d,e){if(document.all){var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.options.remove(0)}a.add(b,a.options.length)}else{var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.removeChild(a.options[0])}a.insertBefore(b,a.options[a.options.length])}}function add_member(e,b){if(document.all){var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}f.add(c,f.length)}}else{var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}b.insertBefore(c,f[f.length])}}}function remove_member(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}if(b.length==0){add_option(a,"","\u3000",false)}}function doUpOptions10(a){var b=a.options;for(i=0;i<b.length;i++){if(!b[i].selected){continue}if(i==0){continue}if(b[i-1].selected){continue}up_option(a,i,10)}selectedOptionIntoView(a)}function doUpOptions(a){var b=a.options;for(i=0;i<b.length;i++){if(!b[i].selected){continue}if(i==0){continue}if(b[i-1].selected){continue}up_option(a,i,1)}selectedOptionIntoView(a)}function doDownOptions10(a){var b=a.options;for(i=b.length-1;i>=0;i--){if(!b[i].selected){continue}if(i==b.length-1){continue}if(b[i+1].selected){continue}down_option(a,i,10)}selectedOptionIntoView(a)}function doDownOptions(a){var b=a.options;for(i=b.length-1;i>=0;i--){if(!b[i].selected){continue}if(i==b.length-1){continue}if(b[i+1].selected){continue}down_option(a,i,1)}selectedOptionIntoView(a)}function selectedOptionIntoView(a){var c=a.options;var b=a.options[0];var d=0;for(d=0;d<c.length;d++){if(c[d].selected){b=c[d];break}}if(dojo.isIE==8){if(a.scrollTop>16+18*(d-1)){a.scrollTop=16+18*(d-1)}if(a.scrollTop<16+18*(d-20)){a.scrollTop=16+18*(d-20)}}else{if(b.offsetTop<a.scrollTop){a.scrollTop=b.offsetTop-b.offsetHeight/2}if(b.offsetTop>a.scrollTop+a.offsetHeight){a.scrollTop=b.offsetTop-a.offsetHeight+b.offsetHeight/2}}}function up_option(a,c,d){var b=a.options;var e=0;if(c-d>=0){e=c-d}else{for(i=0;i<b.length;i++){if(!b[i].selected){e=i;break}}}change_turn_option(a,c,e)}function down_option(a,c,d){var b=a.options;var e=0;if(b.length-1-c-d>=0){e=c+d}else{for(i=b.length-1;i>=0;i--){if(!b[i].selected){e=i;break}}}change_turn_option(a,c,e)}function change_turn_option(a,c,e){var b=a.options;if(document.all){var d=document.createElement("OPTION");d.value=b[c].value;d.text=b[c].text;d.selected=true;a.remove(c);b.add(d,e);b[e].selected=true}else{var d=document.createElement("OPTION");d.value=b[c].value;d.text=b[c].text;d.selected=true;a.removeChild(b[c]);a.insertBefore(d,b[e]);b[e].selected=true}};
aimluck.namespace("utils");aimluck.utils.createCSS=function(url){if(document.createStyleSheet){document.createStyleSheet(url)}else{var head=document.getElementsByTagName("head")[0];var stylesheet=document.createElement("link");with(stylesheet){rel="stylesheet";type="text/css";href=url}head.appendChild(stylesheet)}};
aimluck.namespace("utils.form");aimluck.utils.form.createSelect=function(b,h,c,d,f,e,g,a){dojo.xhrGet({url:c,timeout:5000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(k,i){var j="";if(typeof a=="undefined"){j+='<select name="'+b+'">'}else{j+='<select name="'+b+'" '+a+"/>"}if(typeof g=="undefined"){j+=""}else{j+=g}dojo.forEach(k,function(l){if(typeof l[d]=="undefined"||typeof l[f]=="undefined"){}else{if(l[d]==e){j+="<option value='"+l[d]+"' selected='selected'>"+l[f]+"</option>"}else{j+="<option value='"+l[d]+"'>"+l[f]+"</option>"}}});j+="</select>";dojo.byId(h).innerHTML=j}})};aimluck.utils.form.switchDisplay=function(a,b){dojo.html.setDisplay(dojo.byId(b),"none");dojo.html.setDisplay(dojo.byId(a),"")};
aimluck.namespace("aimluck.io");dojo.provide("aimluck.io");dojo.require("dojo.string");dojo.requireLocalization("aipo","locale");aimluck.io.submit=function(c,a,b,f){aimluck.io.disableForm(c,true);var e=dojo.byId(a+b);if(e){dojo.style(e,"display","")}try{dojo.xhrPost({url:c.action,timeout:30000,form:c,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(h,g){var j="";if(dojo.isArray(h)&&h.length>0){if(h[0]=="PermissionError"){j+="<ul>";j+="<li><span class='caution'>"+h[1]+"</span></li>";j+="</ul>"}else{j+="<ul>";dojo.forEach(h,function(k){j+="<li><span class='caution'>"+k+"</span></li>"});j+="</ul>"}}f.call(f,j);e=dojo.byId(a+b);if(e){dojo.style(e,"display","none")}if(j!=""){aimluck.io.disableForm(c,false)}},error:function(g){}})}catch(d){}return false};aimluck.io.submit_callbackparams=function(c,a,b,g){aimluck.io.disableForm(c,true);var f=dojo.byId(a+b);if(f){dojo.style(f,"display","")}var e=function(h){var j="";if(dojo.isArray(h)&&h.length>0){if(h[0]=="PermissionError"){j+="<ul>";j+="<li><span class='caution'>"+h[1]+"</span></li>";j+="</ul>"}else{j+="<ul>";dojo.forEach(h,function(k){j+="<li><span class='caution'>"+k+"</span></li>"});j+="</ul>"}}return j};try{dojo.xhrPost({url:c.action,timeout:30000,form:c,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(k,j){var h={};var l="";if(k.err){l=e(k.err)}h.error=l;var m="";if(k.params){m=k.params}h.params=m;g.call(g,h);f=dojo.byId(a+b);if(f){dojo.style(f,"display","none")}aimluck.io.disableForm(c,false)},error:function(h){}})}catch(d){}return false};aimluck.io.xhr_http_request=function(c,a,b,g){aimluck.io.disableForm(c,true);var f=dojo.byId(a+b);if(f){dojo.style(f,"display","")}var e=function(h){var j="";if(dojo.isArray(h)&&h.length>0){if(h[0]=="PermissionError"){j+="<ul>";j+="<li><span class='caution'>"+h[1]+"</span></li>";j+="</ul>"}else{j+="<ul>";dojo.forEach(h,function(k){j+="<li><span class='caution'>"+k+"</span></li>"});j+="</ul>"}}return j};try{dojo.xhrPost({url:c.action,timeout:30000,form:c,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(j,h){var l=[];var k="";if(j.err){k=e(j.err)}l.push(k);if(dojo.isArray(j.params)){dojo.forEach(j.params,function(m){l.push(m)})}g.apply(g,l);f=dojo.byId(a+b);if(f){dojo.style(f,"display","none")}aimluck.io.disableForm(c,false)},error:function(h){}})}catch(d){}return false};aimluck.io.sendData=function(a,c,d){var b=new Array();b.callback=d;aimluck.io.sendRawData(a,c,sendErrorData,b);return false};aimluck.io.sendErrorData=function(c,a){var b="";if(dojo.isArray(a.data)&&a.data.length>0){b+="<ul>";dojo.forEach(a.data,function(d){b+="<li>"+d+"</li>"});b+="</ul>"}c.callback.call(c.callback,b);return false};aimluck.io.sendRawData=function(b,e,f,d){var a=new Array;try{dojo.xhrGet({url:b,method:"POST",encoding:"utf-8",content:e,mimetype:"text/json",sync:true,load:function(h,k,j,g){a.type=h;a.data=k;a.event=j;a.args=g;a.bool=true;f.call(f,d,a);return a}})}catch(c){alert("error")}};aimluck.io.escapeText=function(a){var b;if(typeof(dojo.byId(a).innerText)!="undefined"){b=dojo.byId(a).innerText}else{if(typeof(dojo.byId(a).value)!="undefined"){b=dojo.byId(a).value}else{if(typeof(dojo.byId(a).textContent)!="undefined"){b=dojo.byId(a).textContent}}}return b};aimluck.io.disableForm=function(c,d){function k(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}function h(){return(k()+k()+"-"+k()+"-"+k()+"-"+k()+"-"+k()+k()+k())}if(c==null){return}if(d){var a=c.elements;for(var f=0;f<a.length;f++){if((a[f].type=="submit"||a[f].type=="button")&&a[f].style.display!="none"&&a[f].value){var b=h();var j=document.createElement("span");j.id=b;j.className=a[f].className;j.style.display=a[f].style.display;a[f].parentNode.insertBefore(j,a[f]);j.appendChild(document.createTextNode(a[f].value));dojo.removeClass(j,"auiButtonAction");dojo.addClass(j,"auiButtonDisabled");a[f].style.display="none";dojo.addClass(a[f],b)}}}else{var g=dojo.query(".auiButtonDisabled",c);for(var f=0;f<g.length;f++){var b=g[f].id;var e=dojo.query("."+b)[0];dojo.removeClass(e,b);e.style.display=g[f].style.display;g[f].parentNode.removeChild(g[f])}}};aimluck.io.actionSubmit=function(a){aimluck.io.disableForm(a.form,true);aimluck.io.setHiddenValue(a);a.form.action=a.form.action+"?"+a.name+"=1";a.form.submit()};aimluck.io.ajaxActionSubmit=function(b,a,c,d,e){aimluck.io.disableForm(b.form,true);aimluck.io.setHiddenValue(b);b.form.action=a;aimluck.io.submit(b.form,c,d,e)};aimluck.io.actionSubmitReturn=function(a,b){aimluck.io.disableForm(a.form,true);aimluck.io.setHiddenValue(a);a.form.action=a.form.action+"?"+a.name+"=1&action="+b;a.form.submit()};aimluck.io.deleteSubmit=function(b){var a=dojo.i18n.getLocalization("aipo","locale");var c=dojo.string.substitute(a.DW_STR,{dw_del:a.DW_DEL,dw_this:a.DW_THIS,dw_name:b.form._name.value});if(confirm(c)){aimluck.io.disableForm(b.form,true);aimluck.io.setHiddenValue(b);b.form.action=b.form.action+"?"+b.name+"=1";b.form.submit()}};aimluck.io.ajaxDeleteSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.DW_STR,{dw_del:a.DW_DEL,dw_this:a.DW_THIS,dw_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.ajaxEnableSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.ENABLESUBMIT_STR,{enableSubmit_this:a.ENABLESUBMIT_THIS,enableSubmit_enable:a.ENABLESUBMIT_ENABLE,enableSubmit_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.ajaxDisableSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.DISABLESUBMIT_STR,{disableSubmit_this:a.DISABLESUBMIT_THIS,disableSubmit_disable:a.DISABLESUBMIT_DISABLE,disableSubmit_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.deleteSubmitReturn=function(b,c){var a=dojo.i18n.getLocalization("aipo","locale");var d=dojo.string.substitute(a.DW_STR,{dw_del:a.DW_DEL,dw_this:a.DW_THIS,dw_name:b.form._name.value});if(confirm(d)){aimluck.io.disableForm(b.form,true);aimluck.io.setHiddenValue(b);b.form.action=b.form.action+"?"+b.name+"=1&action="+c;b.form.submit()}};aimluck.io.multiDeleteSubmit=function(b){var a=dojo.i18n.getLocalization("aipo","locale");var c=dojo.string.substitute(a.DWS_STR,{dws_del:a.DWS_DEL,dws_sel:a.DWS_SEL,dws_name:b.form._name.value});if(confirm(c)){aimluck.io.disableForm(b.form,true);aimluck.io.setHiddenValue(b);b.form.action=b.form.action+"?"+b.name+"=1";b.form.submit()}};aimluck.io.ajaxMultiDeleteSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.DWS_STR,{dws_del:a.DWS_DEL,dws_sel:a.DWS_SEL,dws_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.ajaxAllDeleteSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.DWA_STR,{dwa_del:a.DWA_DEL,dwa_sel:a.DWA_SEL,dwa_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.ajaxMultiEnableSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.MULTIENABLESUBMIT_STR,{multiEnableSubmit_sel:a.MULTIENABLESUBMIT_SEL,multiEnableSubmit_enable:a.MULTIENABLESUBMIT_ENABLE,multiEnableSubmit_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.ajaxMultiDisableSubmit=function(c,b,d,e,g){var a=dojo.i18n.getLocalization("aipo","locale");var f=dojo.string.substitute(a.MULTIDISABLESUBMIT_STR,{multiDisableSubmit_sel:a.MULTIDISABLESUBMIT_SEL,multiDisableSubmit_disable:a.MULTIDISABLESUBMIT_DISABLE,multiDisableSubmit_name:c.form._name.value});if(confirm(f)){aimluck.io.disableForm(c.form,true);aimluck.io.setHiddenValue(c);c.form.action=b;aimluck.io.submit(c.form,d,e,g)}};aimluck.io.setHiddenValue=function(a){if(a.name){var b=document.createElement("input");b.type="hidden";b.name=a.name;b.value=a.value;a.form.appendChild(b)}};aimluck.io.openDialog=function(b,a,c,d){aimluck.io.disableForm(b.form,true);aipo.common.showDialog(a,c,d)};aimluck.io.checkboxActionSubmit=function(a){aimluck.io.verifyCheckbox(a.form,aimluck.io.actionSubmit,a)};aimluck.io.ajaxCheckboxActionSubmit=function(b,a,c,d,e){aimluck.io.ajaxVerifyCheckbox(b.form,aimluck.io.ajaxActionSubmit,b,a,c,d,e)};aimluck.io.checkboxDeleteSubmit=function(a){aimluck.io.verifyCheckbox(a.form,aimluck.io.multiDeleteSubmit,a)};aimluck.io.ajaxCheckboxDeleteSubmit=function(b,a,c,d,e){aimluck.io.ajaxVerifyCheckbox(b.form,aimluck.io.ajaxMultiDeleteSubmit,b,a,c,d,e)};aimluck.io.ajaxCheckboxEnableSubmit=function(b,a,c,d,e){aimluck.io.ajaxVerifyCheckbox(b.form,aimluck.io.ajaxMultiEnableSubmit,b,a,c,d,e)};aimluck.io.ajaxCheckboxDisableSubmit=function(b,a,c,d,e){aimluck.io.ajaxVerifyCheckbox(b.form,aimluck.io.ajaxMultiDisableSubmit,b,a,c,d,e)};aimluck.io.verifyCheckbox=function(f,g,e){var d=0;var c;for(c=0;c<f.elements.length;c++){if(f.elements[c].checked){d++}}if(d==0){var b=dojo.i18n.getLocalization("aipo","locale");var a=dojo.string.substitute(b.VERIFYCB_STR,{verifycb_sel:b.VERIFYCB_SEL,verifycb_gt_one:b.VERIFYCB_GT_ONE,verifycb_cb:b.VERIFYCB_CB});alert(a);return false}else{return g(e)}};aimluck.io.ajaxVerifyCheckbox=function(b,e,j,a,h,g,d){var c=0;var f;for(f=0;f<b.elements.length;f++){if(b.elements[f].checked){c++}}if(c==0){var k=dojo.i18n.getLocalization("aipo","locale");var l=dojo.string.substitute(k.VERIFYCB_STR,{verifycb_sel:k.VERIFYCB_SEL,verifycb_gt_one:k.VERIFYCB_GT_ONE,verifycb_cb:k.VERIFYCB_CB});alert(l);return false}else{return e(j,a,h,g,d)}};aimluck.io.createOptions=function(b,f){var c,e,j,h,a,d,l,k;if(f.url){a=f.url}if(f.key){j=f.key}if(f.value){h=f.value}if(typeof f.selectedId=="undefined"){}else{c=f.selectedId}if(typeof f.preOptions=="undefined"){}else{e=f.preOptions}if(typeof f.indicator=="undefined"){}else{d=f.indicator;var g=dojo.byId(d);if(g){dojo.style(g,"display","none")}}if(typeof f.callback=="undefined"){}else{l=f.callback;if(typeof f.callbackTarget=="undefined"){}else{k=f.callbackTarget}}dojo.xhrGet({url:a,timeout:10000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(o,n){var m=dojo.byId(b);m.options.length=0;if(typeof e=="undefined"){}else{aimluck.io.addOption(m,e.key,e.value,false)}dojo.forEach(o,function(q){if(typeof q[j]=="undefined"||typeof q[h]=="undefined"){}else{if(q[j]==c){aimluck.io.addOption(m,q[j],q[h],true)}else{aimluck.io.addOption(m,q[j],q[h],false)}}});if(g){dojo.style(g,"display","none")}if(l){l.call(k?k:l,o)}}})};aimluck.io.replaceToAutoCRString=function(g){var d="";var f=4;var c=g.length;var e=Math.floor(c/f);var b;for(b=0;b<e;b++){var a=b*f;d=d.concat(g.substr(a,f)).concat("<wbr/>")}if(e*f<c){d=d.concat(g.substr(e*f))}return d};aimluck.io.addFileToList=function(d,e,b){var c=dojo.i18n.getLocalization("aipo","locale");if(d.parentNode.style.display=="none"){d.parentNode.style.display="";dojo.addClass(d.parentNode,"displayChangedFromNone")}if(document.all){var a=document.createElement("li");a.setAttribute("data-fileid",e);a.setAttribute("data-filename",b);a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(b)+'</span><span class="deletebutton" onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+c.DELETE_STR+"</span>";return d.appendChild(a)}else{var a=document.createElement("li");a.setAttribute("data-fileid",e);a.setAttribute("data-filename",b);a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(b)+'</span><span class="deletebutton"  onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+c.DELETE_STR+"</span>";return d.appendChild(a)}};aimluck.io.replaceFileToList=function(d,e,b){var c=dojo.i18n.getLocalization("aipo","locale");if(document.all){var a=document.createElement("li");a.setAttribute("data-fileid",e);a.setAttribute("data-filename",b);a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(b)+'</span><span class="deletebutton" onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+c.DELETE_STR+"</span>";d.innerHTML="";return d.appendChild(a)}else{var a=document.createElement("li");a.setAttribute("data-fileid",e);a.setAttribute("data-filename",b);a.innerHTML="<span>"+aimluck.io.replaceToAutoCRString(b)+'</span><span class="deletebutton"  onclick="aimluck.io.removeFileFromList(this.parentNode.parentNode,this.parentNode);">'+c.DELETE_STR+"</span>";d.innerHTML="";return d.appendChild(a)}};aimluck.io.removeFileFromList=function(b,a){b.removeChild(a);if(b.children.length==0&&b.parentNode.className.indexOf("displayChangedFromNone")!=-1){b.parentNode.style.display="none";dojo.removeClass(b.parentNode,"displayChangedFromNone")}var c=document.getElementById("modalDialog");if(c){var d=document.getElementById("wrapper");d.style.minHeight=c.clientHeight+"px"}};aimluck.io.createSelectFromFileList=function(g,b){var e=dojo.byId("attachments_"+b);var a=document.createElement("select");a.style.display="none";a.id="attachments_select";a.multiple="multiple";a.name="attachments";var c=e.children;for(var d=0;d<c.length;d++){var f=document.createElement("option");f.value=c[d].getAttribute("data-fileid");f.text=c[d].getAttribute("data-filename");f.selected=true;a.appendChild(f)}g.appendChild(a)};aimluck.io.addOption=function(a,c,d,e){if(document.all){var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.options.remove(0)}a.add(b,a.options.length)}else{var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.removeChild(a.options[0])}a.insertBefore(b,a.options[a.options.length])}};aimluck.io.removeOptions=function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}if(b.length==0){add_option(a,"","\u3000",false)}};aimluck.io.removeAllOptions=function(a){if(a.options.length==0){return}aimluck.io.selectAllOptions(a);if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}if(b.length==0){add_option(a,"","\u3000",false)}};aimluck.io.selectAllOptions=function(a){var b=a.options;if(b.length==0){return}for(i=0;i<b.length;i++){b[i].selected=true}};aimluck.io.switchCheckbox=function(b){var a;if(b.checked){for(i=0;i<b.form.elements.length;i++){a=b.form.elements[i];if(!a.disabled&&a.type=="checkbox"){a.checked=true}}}else{for(i=0;i<b.form.elements.length;i++){a=b.form.elements[i];if(!a.disabled&&a.type=="checkbox"){a.checked=false}}}};aimluck.io.postViewPage=function(c,b,a){aimluck.io.disableForm(c,true);var d=dojo.byId(a+b);if(d){dojo.style(d,"display","")}dojo.xhrPost({url:c.action,timeout:30000,form:c,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(f,e){var g=f;d=dojo.byId(a+b);if(d){dojo.style(d,"display","none")}if(g!=""){aimluck.io.disableForm(c,false);var h=dijit.byId("portlet_"+b);if(!h){h=new aimluck.widget.Contentpane({},"portlet_"+b)}if(h){ptConfig[b].reloadUrl=ptConfig[b].initUrl;h._isDownloaded=true;h.setContent(g)}}if(aipo.onloadSmartPhone!=null){aipo.onloadSmartPhone()}},error:function(e){}})};aimluck.io.onTextFieldFocus=function(){var a=document.getElementById("mobileHeader_v3");if(a){if(!aipo.userAgent.isAndroid()){a.style.position="absolute";a.style.top="0px"}}};aimluck.io.onTextFieldBlur=function(){var a=document.getElementById("mobileHeader_v3");if(a){if(!aipo.userAgent.isAndroid()){a.style.position="";a.style.top="0px"}}};aimluck.io.selectPost=function(d,j,f,e,g){var b=dojo.byId(f+e);if(b){dojo.style(b,"display","block")}var a=function(k){var l="";if(dojo.isArray(k)&&k.length>0){if(k[0]=="PermissionError"){l+="<ul>";l+="<li><span class='caution'>"+k[1]+"</span></li>";l+="</ul>"}else{l+="<ul>";dojo.forEach(k,function(m){l+="<li><span class='caution'>"+m+"</span></li>"});l+="</ul>"}}return l};try{dojo.xhrPost({url:j,timeout:30000,content:d,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(l,k){var n=[];var m="";if(l.err){m=a(l.err)}else{if(l.length>0){m=a(l)}}n.push(m);n.push(e);if(dojo.isArray(l.params)){dojo.forEach(l.params,function(p){n.push(p)})}var o=dojo.byId(f+e);if(o){dojo.style(o,"display","none")}g.apply(g,n)},error:function(k){var l=["",e];g.apply(g,l)}})}catch(h){var c=["",e];g.apply(g,c)}};aimluck.io.onFocusSearch=function(a){var b=dojo.byId("searchForm_"+a);if(b){dojo.addClass(b,"focus")}};aimluck.io.onBlurSearch=function(a){var b=dojo.byId("searchForm_"+a);if(b){if(!b.keyword.value){dojo.removeClass(b,"focus")}}};aimluck.io.createMemberLists=function(s,r){var n,c,l,w,m,d,j,e,g,q,x,u,b,a,t,v,p,f;if(r.url){d=r.url}if(r.key){w=r.key}if(r.value){m=r.value}if(typeof r.userId=="undefined"){}else{a=r.userId}if(typeof r.name=="undefined"){}else{x=r.name}if(typeof r.image_flag=="undefined"){}else{t=r.image_flag}if(typeof r.image_version=="undefined"){}else{v=r.image_version}if(typeof r.default_image=="undefined"){}else{p=r.default_image}if(typeof r.child_html=="undefined"){}else{f=r.child_html}if(typeof r.selectedId=="undefined"){}else{n=r.selectedId}if(typeof r.selectedAuthId=="undefined"){}else{c=r.selectedAuthId}if(typeof r.preOptions=="undefined"){}else{l=r.preOptions}if(typeof r.indicator=="undefined"){}else{j=r.indicator;var h=dojo.byId(j);if(h){dojo.style(h,"display","none")}}if(typeof r.callback=="undefined"){}else{e=r.callback;if(typeof r.callbackTarget=="undefined"){}else{g=r.callbackTarget}}if(typeof r.widgetId=="undefined"){}else{q=r.widgetId}if(typeof r.clickEvent=="undefined"){}else{b=r.clickEvent}if(typeof r.keyword=="undefined"){}else{u=r.keyword;var o=dojo.byId(u);if(o){var k=encodeURIComponent(o.value);d=d+"&keyword="+k}}dojo.xhrGet({url:d,timeout:10000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(A,z){var D=dojo.byId(s);D.innerHTML="";var F=[];if(typeof n=="undefined"){}else{var y=dojo.byId(n);var C;if(y){var B=y.options;if(B.length>0){for(C=0;C<B.length;C++){F[F.length]=B[C].value}}}}var E=[];if(typeof n=="undefined"||typeof c=="undefined"){}else{var y=dojo.byId(c);var C;if(y){var B=y.options;if(B.length>0){for(C=0;C<B.length;C++){if(B[C].value=="A"){E[E.length]=F[C]}}}}}if(typeof l=="undefined"){}else{aimluck.io.addMemberList(D,l.key,l.value,false,q,x,n,b,false,"","",p,f)}dojo.forEach(A,function(H){if(typeof H[w]=="undefined"||typeof H[m]=="undefined"||typeof H[a]=="undefined"||typeof H[t]=="undefined"||typeof H[v]=="undefined"){}else{if(dojo.indexOf(F,H[w])!=-1){aimluck.io.addMemberList(D,H[w],H[m],true,q,x,n,b,H[t],H[a],H[v],p,f);var G=(dojo.indexOf(E,H[w])!=-1);aimluck.io.addAuthoritySelect(H[w],H[m],G,q,x,b)}else{aimluck.io.addMemberList(D,H[w],H[m],false,q,x,n,b,H[t],H[a],H[v],p,f);aimluck.io.addAuthoritySelect(H[w],H[m],false,q,x,b)}}});if(h){dojo.style(h,"display","none")}if(e){e.call(g?g:e,A)}aipo.widget.MemberFilterList.filterCheckedMember(dojo.byId("tmp_head_checkbox_"+q),q,x)}})};aimluck.io.addMemberList=function(k,n,g,j,q,s,m,c,o,a,p,r,e){var d=r;if(o){d="?template=FileuploadFacePhotoScreen&uid="+a+"&t="+p}var h=document.createElement("li");var f=document.createElement("input");var l="authority_outer_"+n;var b="tmp_authority_from_"+n;f.type="checkbox";f.value=n;f.name=s;f.id=s+"_"+n;h.className="checked";if(j){f.setAttribute("checked","checked")}f.setAttribute("data-name",g);f.setAttribute("onclick",'dijit.byId("'+q+'").onMemberCheck(this,"'+b+'");'+c);h.innerHTML="<label>"+f.outerHTML+'<span class="avatar"><img class="avatar_s" src="'+d+'"></span><span class="name">'+g+'</span><span id="'+l+'"></span>'+e+"</label></li>";return k.appendChild(h)};aimluck.io.addAuthoritySelect=function(j,m,c,e,a,n){var d="authority_outer_"+j;var k=a+"_"+j;var h=dojo.byId(d);var f=document.createElement("select");var b="tmp_authority_from_"+j;dojo.connect(f,"onclick",function(o){dojo.stopEvent(o)});f.name="tmp_authority_from";f.id=b;f.className="floatRight";f.setAttribute("onchange",'dijit.byId("'+e+'").onAuthorityCheck("'+b+'","'+k+'");'+n);var l=document.createElement("option");var g=document.createElement("option");l.innerText="";l.textContent="";l.value="A";g.innerText="";g.textContent="";g.value="M";if(c){l.selected=true}else{g.selected=true}f.appendChild(l);f.appendChild(g);return h.appendChild(f)};aimluck.io.createGroupLists=function(c,f){var b,e,k,j,a,d,m,l,g;if(f.url){a=f.url}if(f.key){k=f.key}if(f.value){j=f.value}if(typeof f.widgetId=="undefined"){}else{g=f.widgetId}if(typeof f.selectedId=="undefined"){}else{b=f.selectedId}if(typeof f.preOptions=="undefined"){}else{e=f.preOptions}if(typeof f.indicator=="undefined"){}else{d=f.indicator;var h=dojo.byId(d);if(h){dojo.style(h,"display","none")}}if(typeof f.callback=="undefined"){}else{m=f.callback;if(typeof f.callbackTarget=="undefined"){}else{l=f.callbackTarget}}dojo.xhrGet({url:a,timeout:10000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(o,n){var p=dojo.byId(c);p.innerHTML="";if(typeof e=="undefined"){}else{if(e.key==b){aimluck.io.addGroupList(p,e.key,e.value,true,g)}else{aimluck.io.addGroupList(p,e.key,e.value,false,g)}}dojo.forEach(o,function(q){if(typeof q[k]=="undefined"||typeof q[j]=="undefined"){}else{if(q[k]==b){aimluck.io.addGroupList(p,q[k],q[j],true,g)}else{aimluck.io.addGroupList(p,q[k],q[j],false,g)}}});if(h){dojo.style(h,"display","none")}if(m){m.call(l?l:m,o)}}})};aimluck.io.addGroupList=function(d,f,g,h,e){var b=document.createElement("li");b.setAttribute("data-param",f);var c=document.createElement("a");c.href="javascript:void(0)";c.innerHTML=g;if(h){dojo.addClass(b,"selected");dojo.addClass(c,"selected")}c.setAttribute("onclick",'dijit.byId("'+e+'").changeGroup(this, "'+f+'", "'+g+'");');b.appendChild(c);return d.appendChild(b)};
window.aipo=window.aipo||{};aipo.namespace=function(c){if(!c||!c.length){return null}var d=c.split(".");var b=aipo;for(var a=(d[0]=="aipo")?1:0;a<d.length;++a){b[d[a]]=b[d[a]]||{};b=b[d[a]]}return b};var ptConfig=[];aipo.onReceiveMessage=function(c,b){if(!c){var a=dijit.byId("modalDialog");a.hide();aipo.portletReload(b)}if(dojo.byId("messageDiv")){dojo.byId("messageDiv").innerHTML=c}};aipo.getCookie=function(d){var c="";var f=0;var e=0;var a=d+"=";var b="";while(f<document.cookie.length){e=f+a.length;if(document.cookie.substring(f,e)==a){b=document.cookie.indexOf(";",e);if(b==-1){c=document.cookie.substring(e,document.cookie.length)}else{c=document.cookie.substring(e,b)}break}f=document.cookie.indexOf(" ",f)+1;if(f==0){break}}return c};aipo.setCookie=function(b,e,d,c){var a=new Date();a.setTime(a.getTime()+(typeof c!="number"?10*24*60*60*1000:c));if(typeof d=="undefined"||d==null){document.cookie=b+"="+e+"; expires="+a.toGMTString()+"; path=${context_path}/"}else{document.cookie=b+"="+e+"; expires="+a.toGMTString()+"; path="+d}};aipo.removeCookie=function remove_cookie(b,c){var d;var a=new Date();a.setTime(a.getTime()-1);d=get_cookie(b);if(typeof c=="undefined"){document.cookie=b+"="+d+"; expires="+a.toGMTString()+"; path=${context_path}/"}else{document.cookie=b+"="+d+"; expires="+a.toGMTString()+"; path="+c}};aipo.portletReload=function(c,b){for(var a in ptConfig){if(a!=b){if(ptConfig[a].group==c){ptConfig[a].reloadFunction.call(ptConfig[a].reloadFunction,a)}}}};aipo.reloadPage=function(a){if(typeof ptConfig[a].reloadUrl=="undefined"){aipo.viewPage(ptConfig[a].initUrl,a)}else{aipo.viewPage(ptConfig[a].reloadUrl,a)}};var bodyHandle=bodyHandle||{};var setMouseListener=function(){aipo.customize.positionInitialize();dojo.query("a.customizeMenuIcon,a.menubarOpenButton").forEach(function(b){dojo.connect(b,"onmouseenter",null,function(){dojo.addClass(this,"customizeMenuIconMouseenter")});dojo.connect(b,"onmouseleave",null,function(){dojo.removeClass(this,"customizeMenuIconMouseenter")})});var a=dojo.query("body")[0];if(aipo.userAgent.isIphone8_4_1()){a=dojo.byId("wrapper")}bodyHandle=dojo.connect(a,"onclick",null,function(){if(dojo.query("a.customizeMenuIconMouseenter").length==0){dojo.query("div.menubar").style("display","none")}});if(aipo.onloadSmartPhone!=null){aipo.onloadSmartPhone()}};aipo.viewPage=function(a,b,d){var c=dijit.byId("portlet_"+b);if(!c){c=new aimluck.widget.Contentpane({},"portlet_"+b)}if(c){ptConfig[b].reloadUrl=a;if(d){for(i=0;i<d.length;i++){c.setParam(d[i][0],d[i][1])}}c.onLoad=dojo.hitch(c.onLoad,setMouseListener);c.viewPage(a)}};aipo.errorTreatment=function(b,a){if(b.error){if(b.error==1){window.location.href=a}else{return true}return false}else{return true}};var favicon={change:function(a){this.addLink(a,"icon");this.addLink(a,"shortcut icon")},addLink:function(c,b){var a=document.createElement("link");a.type="image/x-icon";a.rel=b;a.href=c;this.removeLinkIfExists(b);this.docHead.appendChild(a)},removeLinkIfExists:function(d){var a=this.docHead.getElementsByTagName("link");for(var b=0;b<a.length;b++){var c=a[b];if(c.type=="image/x-icon"&&c.rel==d){this.docHead.removeChild(c);return}}},docHead:document.getElementsByTagName("head")[0]};function CronTask(b,a,c){this.task=b;this.isDecay=c;this.interval=a;this.decayRate=1;this.decayMultiplier=1.5;this.maxDecayTime=5*60*1000}CronTask.prototype={start:function(){this.stop().run();return this},stop:function(){if(this.worker){window.clearTimeout(this.worker)}return this},run:function(){var a=this;this.task(function(){a.decayRate=a.isDecay?Math.max(1,a.decayRate/a.decayMultiplier):a.decayRate*a.decayMultiplier;var b=a.interval*a.decayRate;if(!a.isDecay){b=(b>=a.maxDecayTime)?a.maxDecayTime:b}b=Math.floor(b);a.worker=window.setTimeout(function(){a.run.call(a)},b)})},reset:function(){this.destroy().run();return this},destroy:function(){this.stop();this.decayRate=1;return this}};aipo.userAgent={__userAgent:window.navigator.userAgent.toLowerCase(),isAndroid:function(){return this.__userAgent.indexOf("android")>-1},isAndroid2:function(){var a=this.androidVersion();return !!a&&a[1]==2},isAndroid4:function(){var a=this.androidVersion();return !!a&&a[1]==4},isAndroid4_0:function(){var a=this.androidVersion();return !!a&&a[1]==4&&a[2]==0},androidVersion:function(){return this.__userAgent.match(/android ([\d]+)\.([\d]+)\.([\d]+)/)},iphoneVersion:function(){return this.__userAgent.match(/iphone os ([\d]+)_([\d]+)_([\d]+)/)},isIphone8_4_1:function(){var a=this.iphoneVersion();return !!a&&a[1]==8&&a[2]==4&&a[3]==1},isIphone:function(){return this.__userAgent.indexOf("iphone")>-1},isSmartPhone:function(){return this.isAndroid()||this.isIphone()}};aipo.escapeHTML=function(b){var a=function(c){switch(c){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&#39;";case'"':return"&quot;"}return"?"};return String(b).replace(/[<>&"']/g,a)};aipo.arrayContains=function(b,d){for(var c=0;c<b.length;c++){if(b[c]==d){return true}}return false};aipo.asyncLoad=function(d,a,b,e){try{dojo.xhrPost({url:a,timeout:30000,content:b,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(g,f){if(typeof d!="undefined"){if(e){d.outerHTML=g}else{d.innerHTML=g}}},error:function(f){}})}catch(c){}};
dojo.provide("aipo.common");aipo.common.showDialog=function(a,c,d){var b=dijit.byId("modalDialog");dojo.query(".roundBlockContent").addClass("mb_dialoghide");dojo.query("#modalDialog").addClass("mb_dialog");if(!b){b=new aimluck.widget.Dialog({widgetId:"modalDialog",_portlet_id:c,_callback:d},"modalDialog")}else{b.setCallback(c,d)}if(b){b.setHref(a);b.show()}};aipo.common.hideDialog=function(){var a=dijit.byId("modalDialog");if(a){a.hide()}};aipo.common.showDialogSub=function(b,c,e){var a=dijit.byId("modalDialog");var d=window.navigator.userAgent.toLowerCase();dojo.query(".roundBlockContent").addClass("mb_dialoghide");if(!a){a=new aimluck.widget.DialogSub({widgetId:"modalDialog",_portlet_id:c,_callback:e,templateString:"<div id='modalDialog' class='modalDialog' dojoattachpoint='wrapper'><span dojoattachpoint='tabStartOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap'tabindex='0'></span><span dojoattachpoint='tabStart' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><div dojoattachpoint='containerNode' style='position: relative; z-index: 2;'></div><span dojoattachpoint='tabEnd' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><span dojoattachpoint='tabEndOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span></div>"},"modalDialog")}else{a.setCallback(c,e)}if(a){a.setHref(b);a.show()}};aipo.common.hideDialogSub=function(){dijit.byId("modalDialog").hide()};aipo.common.startGuideCustomizeDialog=function(){if(dojo.byId("startguide-data-activecustomizeurl")!=undefined&&dojo.byId("startguide-data-activecustomizeurl")!=""){var a=dojo.byId("startguide-data-activecustomizeurl").value;aipo.common.showDialog(a)}};aipo.common.customizeDialog=function(){if(dojo.byId("data-activecustomizeurl")!=undefined&&dojo.byId("data-activecustomizeurl")!=""){var a=dojo.byId("data-activecustomizeurl").value;aipo.common.showDialog(a)}};
dojo.provide("aipo.io");dojo.require("dojo.string");dojo.requireLocalization("aipo","locale");aipo.io.loadHtml=function(a,c,b){dojo.xhrGet({url:a,transport:"ScriptSrcTransport",jsonParamName:"callback",content:c,method:"get",mimetype:"application/json",encoding:"utf-8",load:function(e,g,f,d){dojo.byId("content-"+b).innerHTML=g.body;dojo.html.setVisibility(dojo.byId("content-"+b),true);dojo.html.setDisplay(dojo.byId("indicator-"+b),false)},error:function(f,i,h,e){var d=dojo.i18n.getLocalization("aipo","locale");var g=dojo.string.substitute(d.XHRERROR_STR,{xhrError_error:d.XHRERROR_ERROR,xhrError_loading:d.XHRERROR_LOADING,xhrError_failed:d.XHRERROR_FAILED});dojo.byId("content-"+b).innerHTML=g;dojo.html.setVisibility(dojo.byId("content-"+b),true);dojo.html.setDisplay(dojo.byId("indicator-"+b),false)},timeout:function(f,i,h,e){var d=dojo.i18n.getLocalization("aipo","locale");var g=dojo.string.substitute(d.XHRTIMEOUT_STR,{xhrTimeout_error:d.XHRTIMEOUT_ERROR,xhrTimeout_timeout:d.XHRTIMEOUT_TIMEOUT});dojo.byId("content-"+b).innerHTML=g;dojo.html.setVisibility(dojo.byId("content-"+b),true);dojo.html.setDisplay(dojo.byId("indicator-"+b),false)},timeoutSeconds:10})};
if(!dojo._hasResource["aimluck.dnd.DragMoveObject"]){dojo._hasResource["aimluck.dnd.DragMoveObject"]=true;dojo.provide("aimluck.dnd.DragMoveObject");dojo.provide("aimluck.dnd.Draggable");dojo.require("dojo.dnd.Mover");dojo.require("dojo.dnd.Moveable");dojo.require("dojo.parser");dojo.require("dojo.dnd.Source");dojo.declare("aimluck.dnd.DragMoveObject",[dojo.dnd.Mover],{_pageY:0,_pageX:0,portletId:null,leftTop:null,onFirstMove:function(a){dojo.dnd.Mover.prototype.onFirstMove.apply(this,arguments)},onMouseUp:function(a){dojo.dnd.Mover.prototype.onMouseUp.apply(this,arguments)},onMouseDown:function(b){var a=this.marginBox;this.leftTop={l:a.l+b.pageX,t:a.t+b.pageY};dojo.dnd.Mover.prototype.onMouseDown.apply(this,arguments)},onMouseMove:function(b){this._pageX=b.pageX;this._pageY=b.pageY;dojo.dnd.autoScroll(b);var a=this.marginBox;this.leftTop={l:a.l+b.pageX,t:a.t+b.pageY}}});dojo.declare("aimluck.dnd.Draggable",dojo.dnd.Moveable,{DragMoveObject:aimluck.dnd.DragMoveObject,portletId:null,constructor:function(a,b){this.portletId=b.pid},onMouseDown:function(a){if(this.skip&&dojo.dnd.isFormElement(a)){return}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"));this.events.push(dojo.connect(this.handle,"onmouseup",this,"onMouseUp"))}else{dragObj=new this.DragMoveObject(this.node,a,this);dragObj.dragSource=this;dragObj.portletId=this.portletId}dragObj._pageX=a.pageX;dragObj._pageY=a.pageY;this._lastX=a.pageX;this._lastY=a.pageY;dojo.stopEvent(a)}})};
if(!dojo._hasResource["aimluck.widget.Contentpane"]){dojo._hasResource["aimluck.widget.Contentpane"]=true;dojo.provide("aimluck.widget.Contentpane");dojo.require("dijit.layout.ContentPane");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aimluck.widget.Contentpane",[dijit.layout.ContentPane],{loadingMessage:"<div class='indicator'>"+nlsStrings.LOADING_STR+"</div>",errorMessage:"",extractContent:false,parseOnLoad:true,refreshOnShow:true,params:new Array(),reloadIds:new Array(),viewPage:function(a){if(!this._xhrDfd){this.href=a;return this._prepareLoad(true)}},setParam:function(a,b){this.params[a]=b},setReloadIds:function(a){this.reloadIds=a},clearParams:function(){this.params=new Array()},clearReloadIds:function(){this.reloadIds=new Array()},_downloadExternalContent:function(){this._onUnloadHandler();var b=this;var c={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text",content:this.params,headers:{X_REQUESTED_WITH:"XMLHttpRequest"}};if(dojo.isObject(this.ioArgs)){dojo.mixin(c,this.ioArgs)}var a=this._xhrDfd=(this.ioMethod||dojo.xhrPost)(c);a.addCallback(function(d){b.clearParams();b.clearReloadIds();try{b.onDownloadEnd.call(b);b._isDownloaded=true;b.setContent.call(b,d)}catch(e){b._onError.call(b,"Content",e)}delete b._xhrDfd;return d});a.addErrback(function(d){if(!a.cancelled){b._onError.call(b,"Download",d)}delete b._xhrDfd;return d})},onLoad:function(){var a=this.href;if(a){if(a.indexOf("ActivityList")>0){activitySwitch()}}}})};
if(!dojo._hasResource["aimluck.widget.Dialog"]){dojo._hasResource["aimluck.widget.Dialog"]=true;dojo.provide("aimluck.widget.Dialog");dojo.provide("aimluck.widget.DialogSub");dojo.provide("aimluck.widget.DialogUnderlay");dojo.provide("aimluck.widget.Timeout");dojo.require("dijit.Dialog");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aimluck.widget.DialogUnderlay",[dijit.DialogUnderlay],{templateString:"<div class='modalDialogUnderlayWrapper' id='${id}_underlay'><div class='modalDialogUnderlay' dojoAttachPoint='node'></div></div>",layout:function(){var a="";var c="";os="";os.top="";os.left="";c.width="";c.height="";var b=""}});dojo.declare("aimluck.widget.Timeout",[dijit._Widget,dijit._Templated],{templateString:"<div class='modalDialogUnderlayWrapper' id='${id}_underlay'><div class='modalDialogUnderlay' dojoAttachPoint='node' redirecturl=\"${redirectUrl}\"></div></div>",redirectUrl:"about:blank",postCreate:function(){window.location.href=this.redirectUrl}});dojo.declare("aimluck.widget.DialogSub",[aimluck.widget.Dialog,dijit.Dialog],{templateString:"<div id='modalDialog' class='modalDialog' dojoattachpoint='wrapper'><span dojoattachpoint='tabStartOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap'tabindex='0'></span><span dojoattachpoint='tabStart' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><div dojoattachpoint='containerNode' style='position: relative; z-index: 2;'></div><span dojoattachpoint='tabEnd' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><span dojoattachpoint='tabEndOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span></div>"});dojo.declare("aimluck.widget.Dialog",[dijit.Dialog],{loadingMessage:"<div class='auiPopup indicatorDialog center'><i class='auiIcon auiIconIndicator'></i> "+nlsStrings.LOADING_STR+"</div>",errorMessage:"<div class='auiPopup indicatorDialog center'><div class='clearfix'><div class='auiPopupTool'><a href='javascript:void(0)' class='auiButtonIcon' title="+nlsStrings.CLOSE_STR+" onClick='aipo.common.hideDialog();'><span><i class='icon-remove'></i></span></a></div><div class='auiWLCaption'>${errorState}</div></div></div>",templateString:null,templateString:"<div id='modalDialog' class='modalDialog' dojoattachpoint='wrapper'><span dojoattachpoint='tabStartOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap'tabindex='0'></span><span dojoattachpoint='tabStart' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><div dojoattachpoint='containerNode' style='position: relative; z-index: 2;'></div><span dojoattachpoint='tabEnd' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><span dojoattachpoint='tabEndOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span></div>",duration:10,extractContent:false,parseOnLoad:true,refreshOnShow:true,isPositionLock:false,params:new Array(),reloadIds:new Array(),_portlet_id:null,_callback:null,eventList:[],_setup:function(){this._modalconnects=[];if(this.titleBar){this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar});var a=this.domNode;dojo.connect(this._moveable,"onMoving",function(g,f){var d=dijit.getViewport();var e=parseInt(dojo.getComputedStyle(a).width);var c=parseInt(d.w);if(f.l<0){f.l=0}if(f.l+e>c){f.l=c-e}if(f.t<0){f.t=0}})}this._underlay=new aimluck.widget.DialogUnderlay();var b=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:b,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]);this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:b,dialog:this,duration:this.duration,onEnd:function(){b.style.display="none";if(document.all){this.dialog.fixTmpScroll()}}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])},fixTmpScroll:function(){var a=dojo.byId("weeklyScrollPane_"+this._portlet_id);if(a){if(typeof aipo.schedule.tmpScroll=="undefined"){dojo.byId("weeklyScrollPane_"+this._portlet_id).scrollTop=ptConfig[this._portlet_id].contentScrollTop}else{dojo.byId("weeklyScrollPane_"+this._portlet_id).scrollTop=aipo.schedule.tmpScroll}}},onLoad:function(){this._position();dijit.Dialog.superclass.onLoad.call(this);this.isPositionLock=false;var n=window.navigator.userAgent.toLowerCase();if(n.indexOf("iphone")>-1||n.indexOf("android")>-1){if(!!document.documentElement.scrollTop){document.documentElement.scrollTop=0}else{if(!!document.body.scrollTop){document.body.scrollTop=0}}}if(aipo.userAgent.isAndroid2()&&!dispChanger){var a=dojo.byId("wrapper");dojo.style(a,"display","none");var m=dojo.byId("modalDialog");dojo.style(m,"top","0px");dojo.style(m,"margin","0")}if(aipo.userAgent.isAndroid()){var i=this;var j=function(f){f.preventDefault();return false};var d=dojo.query("input,select,button,a",this.domNode);var e=dojo.byId("appsNavigation_v2");var g=dojo.query("input,select,button,a",e);var l=dojo.byId("auiWidgetsArea");var k=dojo.query("input,select,button,a",l);var h=d;h=h.concat(g);h=h.concat(k);dojo.query("input,select,button,a").forEach(function(f){if(!aipo.arrayContains(h,f)){i.eventList.push(dojo.connect(f,"click",j))}});dojo.query("input,select,button").forEach(function(o,f){if(!aipo.arrayContains(h,o)&&!o.disabled){dojo.addClass(o,"disabled-by-dialog");o.disabled=true}})}if(aipo.userAgent.isAndroid()){var b=document.getElementById("modalDialog");if(b){var a=document.getElementById("wrapper");a.style.minHeight=b.clientHeight+"px"}}var c=dojo.byId(this.widgetId);if(c){c.focus();if(this._callback!=null){this._callback.call(this._callback,this._portlet_id)}}dojo.query("#modalDialog input, #modalDialog textarea").forEach(function(f){dojo.connect(f,"onfocus",aimluck.io.onTextFieldFocus);dojo.connect(f,"onblur",aimluck.io.onTextFieldBlur)});dojo.query("#modalDialog form").forEach(function(f){dojo.connect(f,"onsubmit",aimluck.io.onTextFieldBlur)})},setCallback:function(a,b){this._portlet_id=a;this._callback=b},setParam:function(a,b){this.params[a]=b},setReloadIds:function(a){this.reloadIds=a},clearParams:function(){this.params=new Array()},clearReloadIds:function(){this.reloadIds=new Array()},reload:function(a){this.href=a;this.isPositionLock=true;this.refresh()},_position:function(){if(dojo.hasClass(dojo.body(),"dojoMove")){return}var a=dijit.getViewport();var c=dojo.marginBox(this.domNode);var b=this.domNode.style;if(this.id=="imageDialog"){if(b.width==0){b.marginLeft="-150px"}else{b.marginLeft=Math.floor(-b.width.replace("px","")/2)+"px"}}if(Math.floor((a.t+(a.h-c.h)/2))>0){b.top=Math.floor((a.t+(a.h-c.h)/2))+"px"}else{b.top=0+"px"}},layout:function(){if(this.domNode.style.display=="block"){this._underlay.layout()}},_downloadExternalContent:function(){this._onUnloadHandler();this._setContent(this.onDownloadStart.call(this));var b=this;var c={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text",content:this.params,headers:{X_REQUESTED_WITH:"XMLHttpRequest"}};if(dojo.isObject(this.ioArgs)){dojo.mixin(c,this.ioArgs)}var a=this._xhrDfd=(this.ioMethod||dojo.xhrPost)(c);a.addCallback(function(d){b.clearParams();b.clearReloadIds();try{b.onDownloadEnd.call(b);b._isDownloaded=true;b.setContent.call(b,d)}catch(e){b._onError.call(b,"Content",e)}delete b._xhrDfd;return d});a.addErrback(function(d){if(!a.cancelled){b._onError.call(b,"Download",d)}delete b._xhrDfd;return d})},_onKey:function(a){},hide:function(){var b=document.getElementById("wrapper");if(b){b.style.minHeight=""}dijit.Dialog.prototype.hide.apply(this);dojo.query(".mb_dialoghide").removeClass("mb_dialoghide");dojo.query("#modalDialog").removeClass("mb_dialog");if(aipo&&aipo.timeline&&aipo.timeline.activeFileAttachments){aipo.timeline.activeFileAttachments(this._portlet_id)}if(aipo.userAgent.isAndroid()){for(var a=0;a<this.eventList.length;a++){dojo.disconnect(this.eventList[a])}this.eventList=[];dojo.query("input.disabled-by-dialog,select.disabled-by-dialog,button.disabled-by-dialog").forEach(function(d,c){dojo.removeClass(d,"disabled-by-dialog");d.disabled=false})}if(aipo.userAgent.isAndroid2()){var b=dojo.byId("wrapper");dojo.style(b,"display","")}}})};
if(!dojo._hasResource["aimluck.widget.Dropdown"]){dojo._hasResource["aimluck.widget.Dropdown"]=true;dojo.provide("aimluck.widget.Dropdown");dojo.require("dijit.form.Button");dojo.declare("aimluck.widget.Dropdown",[dijit.form.DropDownButton],{inputWidth:"250px",hiddenId:"",hiddenValue:"",inputId:"",inputValue:"",selectId:"",iconURL:"",iconAlt:"",templateString:'<div class="dijit dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class=\'dijitRight\'>\n\t<span class="" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><span class="" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label"><img src="${iconURL}" alt="${iconAlt}" style="cursor:pointer;cursor:hand;padding-right:2px" align="top" />\n\t</span><select name="${selectId}" id="${selectId}" size="10" multiple="multiple" style="display:none" dojoAttachPoint="selectNode"></select><input type="hidden" id="${hiddenId}" name="${hiddenId}" value="${hiddenValue}" dojoAttachPoint="valueNode" /><span name="${inputId}" id="${inputId}" dojoAttachPoint="inputNode">${inputValue}</span>\n</div></div>\n',_openDropDown:function(){this.inherited(arguments);var b=window.navigator.userAgent.toLowerCase();if(b.indexOf("chrome")>-1||(dojo.isFF&&(dojo.isFF>=3.6))){var a=this.dropDown.domNode.parentNode;var c=a.style.top.replace("px","");top_new=parseInt(c)+window.scrollY;a.style.top=top_new+"px"}if(dojo.isIE&&(dojo.isIE==11)){var a=this.dropDown.domNode.parentNode;var c=a.style.top.replace("px","");top_new=parseInt(c)-window.pageYOffset;a.style.top=top_new+"px"}},_toggleDropDown:function(){if(this.disabled){return}dijit.focus(this.popupStateNode);var c=this.dropDown;if(!c){return false}if(!this._opened){if(c.href&&!c.isLoaded){var a=this;var b=dojo.connect(c,"onLoad",function(){dojo.disconnect(b);a._openDropDown()});c._loadCheck(true);return}else{this._openDropDown()}}else{this._closeDropDown()}}})};
if(!dojo._hasResource["aimluck.widget.Menu"]){dojo._hasResource["aimluck.widget.Menu"]=true;dojo.provide("aimluck.widget.Menu");dojo.provide("aimluck.widget.Menuitem");dojo.provide("aimluck.widget.Menuseparator");dojo.provide("aimluck.widget.Menubar");dojo.provide("aimluck.widget.DropDownButton");dojo.require("dijit.layout.ContentPane");dojo.require("dijit.Menu");dojo.require("dijit.Toolbar");dojo.require("dijit.form.Button");dojo.declare("aimluck.widget.Menuitem",[dijit.MenuItem],{label:"",iconSrc:"",iconClass:"",url:"",templateString:'<tr class="dijitReset dijitMenuItem"dojoAttachEvent="onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick"><td class="dijitReset"><div class="dijitMenuItemIcon ${iconClass} menuItemIcon" dojoAttachPoint="iconNode" ></div></td><td tabIndex="-1" class="dijitReset dijitMenuItemLabel" dojoAttachPoint="containerNode" waiRole="menuitem" nowrap="nowrap"></td><td class="dijitReset" dojoAttachPoint="arrowCell"><div class="dijitMenuExpand" dojoAttachPoint="expand" style="display:none"><span class="dijitInline moz-inline-box dijitArrowNode dijitMenuExpandInner">+</span></div></td></tr>',onClick:function(){location.href=this.url}});dojo.declare("aimluck.widget.MenuButton",[dijit.form.Button],{label:"",iconSrc:"",iconClass:"",url:"",itemClass:"",templateString:'<div class="dijit dijitLeft dijitInline moz-inline-box dijitButton"\n\tdojoAttachEvent="onclick:_onButtonClick,onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse"><div class=\'dijitRight\'><button class="dijitStretch dijitButtonNode dijitButtonContents  ${itemClass}" dojoAttachPoint="focusNode,titleNode"\n\t\t\ttype="${type}" waiRole="button" waiState="labelledby-${id}_label"><div class="dijitInline ${iconClass} menuItemIcon " dojoAttachPoint="iconNode"></div><span class="dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}</span></button></div></div>\n',onClick:function(){location.href=this.url}});dojo.declare("aimluck.widget.Menu",[dijit.Menu],{templateString:'<table class="popupMenu dijitMenuTable" waiRole="menu" dojoAttachEvent="onkeypress:_onKeyPress"><tbody class="dijitReset" dojoAttachPoint="containerNode"></tbody></table>'});dojo.declare("aimluck.widget.Menuseparator",[dijit.MenuSeparator],{templateString:'<tr class="menuSeparator"><td colspan=4><div class="menuSeparatorTop"></div><div class="menuSeparatorBottom"></div></td></tr>'});dojo.declare("aimluck.widget.ToolbarSeparator",[dijit.ToolbarSeparator],{templateString:'<div class="dijitInline moz-inline-box">&nbsp;&nbsp;</div>',postCreate:function(){dojo.setSelectable(this.domNode,false)},isFocusable:function(){return false}});dojo.declare("aimluck.widget.DropDownButton",[dijit.form.DropDownButton],{label:"",iconSrc:"",iconClass:"",templateString:'<div class="dijit dijitLeft dijitInline moz-inline-box"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class=\'dijitRight\'>\n\t<button class="dijitStretch dijitButtonNode dijitButtonContents" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><div class="dijitInline ${iconClass} menuItemIcon" dojoAttachPoint="iconNode"></div><span class="dijitButtonText" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label">${label}</span\n\t\t><span class=\'dijitA11yDownArrow\'>&#9660;</span>\n\t</button>\n</div></div>\n'});dojo.declare("aimluck.widget.ComboButton",[dijit.form.ComboButton],{url:"",itemClass:"",templateString:'<table class=\'dijit dijitReset dijitInline dijitLeft moz-inline-box ${itemClass} \'\n\tcellspacing=\'0\' cellpadding=\'0\'\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse">\n\t<tr>\n\t\t<td\tclass="dijitStretch dijitButtonContents dijitButtonNode"\n\t\t\ttabIndex="${tabIndex}"\n\t\t\tdojoAttachEvent="ondijitclick:_onButtonClick"  dojoAttachPoint="titleNode"\n\t\t\twaiRole="button" waiState="labelledby-${id}_label">\n\t\t\t<div class="dijitMenuItemIcon ${iconClass} menuItemIcon" dojoAttachPoint="iconNode"></div>\n\t\t\t<span class="dijitButtonText" id="${id}_label" dojoAttachPoint="containerNode">${label}</span>\n\t\t</td>\n\t\t<td class=\'dijitReset dijitRight dijitButtonNode dijitDownArrowButton\'\n\t\t\tdojoAttachPoint="popupStateNode,focusNode"\n\t\t\tdojoAttachEvent="ondijitclick:_onArrowClick, onkeypress:_onKey"\n\t\t\tstateModifier="DownArrow"\n\t\t\ttitle="${optionsTitle}" name="${name}"\n\t\t\twaiRole="button" waiState="haspopup-true"\n\t\t><div waiRole="presentation">&#9660;</div>\n\t</td></tr>\n</table>\n',onClick:function(){location.href=this.url}});dojo.declare("aimluck.widget.Menubar",[dijit.Toolbar],{selectedIndex:-1,templateString:'<div class="tundra"><div class="dijit dijitToolbar" waiRole="toolbar" tabIndex="${tabIndex}" dojoAttachPoint="containerNode"></div></div>',postCreate:function(){dijit.Toolbar.superclass.postCreate.apply(this,arguments);this.makeMenu(this.items);this.isShowingNow=true},makeMenu:function(b){var c=this;var a=0;dojo.forEach(b,function(e){if(e.submenu){var g=new aimluck.widget.Menu({id:e.caption,style:"display: none;"});dojo.forEach(e.submenu,function(h){if(h!=null){if(h.caption){g.addChild(new aimluck.widget.Menuitem({label:h.caption,url:h.url,iconClass:h.iconClass}))}else{g.addChild(new aimluck.widget.Menuseparator())}}});var d="";if(c.selectedIndex==parseInt(a)){d+="menuBarItemSelected"}var f=new aimluck.widget.ComboButton({label:e.caption,iconClass:e.iconClass,dropDown:g,url:e.url,itemClass:d});f.addChild(g);c.addChild(f)}else{if(e.url){var d="";if(c.selectedIndex==a){d+="menuBarItemSelected"}var f=new aimluck.widget.MenuButton({id:e.caption+"_Button"+a,label:e.caption,url:e.url,iconClass:e.iconClass,itemClass:d});c.addChild(f)}else{c.addChild(new aimluck.widget.ToolbarSeparator())}}a++})}})};
if(!dojo._hasResource["aipo.widget.GroupSelectList"]){dojo._hasResource["aipo.widget.GroupSelectList"]=true;dojo.provide("aipo.widget.GroupSelectList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.GroupSelectList",[dijit._Widget,dijit._Templated],{inputWidth:"95%",hiddenId:"",hiddenValue:"",inputId:"",inputValue:"",memberLimit:0,groupSelectId:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",widgetId:"",selectId:"",inputId:"",buttonAddId:"",buttonRemoveId:"",memberFromTitle:"",memberFromId:"",memberToTitle:"",memberToId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none"><tr><td><div id="groupPopupDiv"><div class="outer"><div class="popup"><div class="clearfix"><div class="memberlistToTop">${memberToTitle}</div><div class="memberlistFromTop">${memberFromTitle}</div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="10" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="10" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+nlsStrings.DELETEBTN_STR+'" dojoAttachEvent="onclick:onMemberRemoveClick"/></div></div><div class="memberlistFromBottom"><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+nlsStrings.ADDBTN_STR+'" dojoAttachEvent="onclick:onMemberAddClick"/></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId;params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,params)},addOption:function(a,b,c,d){aimluck.io.addOption(a,b,c,d)},addOptionSync:function(e,f,g){var b=dojo.byId(this.memberToId);var a=dojo.byId(this.selectId);if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}if(document.all){var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.options.remove(0);a.options.remove(0)}b.add(d,b.options.length);a.add(c,a.options.length)}else{var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0]);a.removeChild(b.options[0])}b.insertBefore(d,b.options[b.options.length]);a.insertBefore(c,a.options[a.options.length])}this.inputMemberSync()},addMember:function(e,b){if(document.all){var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}f.add(c,f.length)}}else{var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}b.insertBefore(c,f[f.length])}}},removeAllMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMemberSync:function(){var c=dojo.byId(this.memberToId);var b=dojo.byId(this.selectId);if(document.all){var d=c.options;var a=b.options;for(i=0;i<d.length;i++){if(d[i].selected){d.remove(i);a.remove(i);i-=1}}}else{var d=c.options;var a=b.options;for(i=0;i<d.length;i++){if(d[i].selected){c.removeChild(d[i]);b.removeChild(a[i]);i-=1}}}},inputMemberSync:function(){var a=dojo.byId(this.selectId);var b=dojo.byId(this.inputId);var c="";var d=a.options;for(i=0;i<d.length;i++){if(i!=0){c+=", "}c+=d[i].text}b.innerHTML=c},changeGroup:function(a){var d=a.target.options[a.target.selectedIndex].value;var b=this.changeGroupUrl+"&groupname="+d;var c={url:b,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,c)},onMemberAddClick:function(a){this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.memberToId));this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.selectId));this.inputMemberSync()},onMemberRemoveClick:function(a){this.removeMemberSync();this.inputMemberSync()}})};
if(!dojo._hasResource["aipo.widget.GroupNormalSelectList"]){dojo._hasResource["aipo.widget.GroupNormalSelectList"]=true;dojo.provide("aipo.widget.GroupNormalSelectList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.GroupNormalSelectList",[dijit._Widget,dijit._Templated],{inputWidth:"95%",memberLimit:0,changeGroupUrl:"",widgetId:"",buttonAddId:"",buttonRemoveId:"",memberFromTitle:"",memberFromId:"",memberToTitle:"",memberToId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none"><tr><td><div id="groupPopupDiv"><div class="outer"><div class="popup" style="width:335px"><div class="clearfix"><div class="memberlistToTop">${memberToTitle}</div><div class="memberlistFromTop">${memberFromTitle}</div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="5" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="5" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+nlsStrings.DELETEBTN_STR+'" dojoAttachEvent="onclick:onMemberRemoveClick"/></div></div><div class="memberlistFromBottom"><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+nlsStrings.ADDBTN_STR+'" dojoAttachEvent="onclick:onMemberAddClick"/></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId;params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,params)},addOption:function(a,b,c,d){aimluck.io.addOption(a,b,c,d)},addOptionSync:function(c,d,e){var a=dojo.byId(this.memberToId);if(this.memberLimit!=0&&a.options.length>=this.memberLimit){return}if(document.all){var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.options.remove(0)}a.add(b,a.options.length)}else{var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.removeChild(a.options[0])}a.insertBefore(b,a.options[a.options.length])}},addMember:function(e,b){if(document.all){var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}f.add(c,f.length)}}else{var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}b.insertBefore(c,f[f.length])}}},removeAllMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMemberSync:function(){var a=dojo.byId(this.memberToId);if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},changeGroup:function(a){var d=a.target.options[a.target.selectedIndex].value;var b=this.changeGroupUrl+"&groupname="+d;var c={url:b,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,c)},onMemberAddClick:function(a){this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.memberToId))},onMemberRemoveClick:function(a){this.removeMemberSync()}})};
if(!dojo._hasResource["aipo.widget.MemberSelectList"]){dojo._hasResource["aipo.widget.MemberSelectList"]=true;dojo.provide("aipo.widget.MemberSelectList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.MemberSelectList",[dijit._Widget,dijit._Templated],{widgetId:"",inputWidth:"95%",hiddenId:"",hiddenValue:"",inputId:"",inputValue:"",selectId:"",memberFromId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",memberToTitle:"",memberToId:"",buttonAddId:"",buttonRemoveId:"",memberLimit:0,groupSelectId:"",groupSelectPreOptionKey:"",groupSelectPreOptionValue:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none" style="table-layout: fixed;"><tr><td><div id="memberPopupDiv"><div class="outer"><div class="popup"><div class="clearfix"><div class="memberlistToTop" >${memberToTitle}</div><div class="memberlistFromTop"><select size="1" style="width:100%" name="${groupSelectId}" id="${groupSelectId}" dojoAttachEvent="onchange:changeGroup"></select></div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="10" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="10" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+nlsStrings.DELETEBTN_STR+'"/ dojoAttachEvent="onclick:onMemberRemoveClick"></div></div><div class="memberlistFromBottom"><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+nlsStrings.ADDBTN_STR+'"/ dojoAttachEvent="onclick:onMemberAddClick"></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId;params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,params);params={url:this.memberGroupUrl,key:this.groupSelectOptionKey,value:this.groupSelectOptionValue,preOptions:{key:this.groupSelectPreOptionKey,value:this.groupSelectPreOptionValue}};aimluck.io.createOptions(this.groupSelectId,params)},addOption:function(a,b,c,d){aimluck.io.addOption(a,b,c,d)},addOptionSync:function(e,f,g){var b=dojo.byId(this.memberToId);var a=dojo.byId(this.selectId);if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}if(document.all){var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.options.remove(0);a.options.remove(0)}b.add(d,b.options.length);a.add(c,a.options.length)}else{var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0]);a.removeChild(b.options[0])}b.insertBefore(d,b.options[b.options.length]);a.insertBefore(c,a.options[a.options.length])}this.inputMemberSync()},addMember:function(e,b){if(document.all){var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}f.add(c,f.length)}}else{var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}b.insertBefore(c,f[f.length])}}},removeAllMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMemberSync:function(){var c=dojo.byId(this.memberToId);var b=dojo.byId(this.selectId);if(document.all){var d=c.options;var a=b.options;for(i=0;i<d.length;i++){if(d[i].selected){d.remove(i);a.remove(i);i-=1}}}else{var d=c.options;var a=b.options;for(i=0;i<d.length;i++){if(d[i].selected){c.removeChild(d[i]);b.removeChild(a[i]);i-=1}}}},inputMemberSync:function(){var a=dojo.byId(this.selectId);var b=dojo.byId(this.inputId);var c="";var d=a.options;for(i=0;i<d.length;i++){if(i!=0){c+=", "}c+=d[i].text}b.innerHTML=c},changeGroup:function(a){var d=a.target.options[a.target.selectedIndex].value;var b=this.changeGroupUrl+"&groupname="+d;var c={url:b,key:this.memberFromOptionKey,value:this.memberFromOptionValue};aimluck.io.createOptions(this.memberFromId,c)},onMemberAddClick:function(a){this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.memberToId));this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.selectId));this.inputMemberSync()},onMemberRemoveClick:function(a){this.removeMemberSync();this.inputMemberSync()}})};
if(!dojo._hasResource["aipo.widget.MemberNormalSelectList"]){dojo._hasResource["aipo.widget.MemberNormalSelectList"]=true;dojo.provide("aipo.widget.MemberNormalSelectList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.MemberNormalSelectList",[dijit._Widget,dijit._Templated],{widgetId:"",memberFromId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",memberToTitle:"",memberToId:"",buttonAddId:"",buttonRemoveId:"",memberLimit:0,groupSelectId:"",groupSelectPreOptionKey:"",groupSelectPreOptionValue:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><table class="none" style="table-layout: fixed;"><tr><td><div id="memberPopupDiv"><div class="outer"><div class="popup"><div class="clearfix"><div class="memberlistToTop" >${memberToTitle}</div><div class="memberlistFromTop"><select size="1" style="width:100%" name="${groupSelectId}" id="${groupSelectId}" dojoAttachEvent="onchange:changeGroup"></select></div></div><div class="clearfix mb5"><div class="memberlistToBody"><select size="5" multiple="multiple" style="width:100%" name="${memberToId}" id="${memberToId}"></select></div><div class="memberlistFromBody"><select size="5" multiple="multiple" style="width:100%" name="${memberFromId}" id="${memberFromId}"></select></div></div><div class="clearfix"><div class="memberlistToBottom"><div class="alignright"><input id="${buttonRemoveId}" name="${buttonRemoveId}" type="button" class="button" value="'+nlsStrings.DELETEBTN_STR+'"/ dojoAttachEvent="onclick:onMemberRemoveClick"></div></div><div class="memberlistFromBottom"><div style="display: none;" id="${widgetId}-memberlist-indicator" class="indicator alignleft"></div><div class="alignright"><input id="${buttonAddId}" name="${buttonAddId}" type="button" class="button" value="'+nlsStrings.ADDBTN_STR+'"/ dojoAttachEvent="onclick:onMemberAddClick"></div></div></div></div></div></div></td></tr></table></div>\n',postCreate:function(){this.id=this.widgetId;params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue,indicator:this.widgetId+"-memberlist-indicator"};aimluck.io.createOptions(this.memberFromId,params);params={url:this.memberGroupUrl,key:this.groupSelectOptionKey,value:this.groupSelectOptionValue,preOptions:{key:this.groupSelectPreOptionKey,value:this.groupSelectPreOptionValue}};aimluck.io.createOptions(this.groupSelectId,params)},addOption:function(a,b,c,d){aimluck.io.addOption(a,b,c,d)},addOptionSync:function(c,d,e){var a=dojo.byId(this.memberToId);if(this.memberLimit!=0&&a.options.length>=this.memberLimit){return}if(document.all){var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.options.remove(0)}a.add(b,a.options.length)}else{var b=document.createElement("OPTION");b.value=c;b.text=d;b.selected=e;if(a.options.length==1&&a.options[0].value==""){a.removeChild(a.options[0])}a.insertBefore(b,a.options[a.options.length])}},addMember:function(e,b){if(document.all){var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}f.add(c,f.length)}}else{var a=e.options;var f=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var d=false;for(j=0;j<f.length;j++){if(f[j].value==a[i].value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}b.insertBefore(c,f[f.length])}}},removeAllMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMember:function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},removeMemberSync:function(){var a=dojo.byId(this.memberToId);if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}},changeGroup:function(a){var d=a.target.options[a.target.selectedIndex].value;var b=this.changeGroupUrl+"&groupname="+d;var c={url:b,key:this.memberFromOptionKey,value:this.memberFromOptionValue,indicator:this.widgetId+"-memberlist-indicator"};aimluck.io.createOptions(this.memberFromId,c)},onMemberAddClick:function(a){this.addMember(dojo.byId(this.memberFromId),dojo.byId(this.memberToId));this.setWrapperHeight()},onMemberRemoveClick:function(a){this.removeMemberSync();this.setWrapperHeight()},setWrapperHeight:function(){var a=document.getElementById("modalDialog");if(a){var b=document.getElementById("wrapper");b.style.minHeight=a.clientHeight+"px"}}})};
if(!dojo._hasResource["aipo.widget.MemberFilterList"]){dojo._hasResource["aipo.widget.MemberFilterList"]=true;dojo.provide("aipo.widget.MemberFilterList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.MemberFilterList",[dijit._Widget,dijit._Templated],{widgetId:"",memberFromId:"",memberFromUrl:"",memberFromOptionKey:"name",memberFromOptionValue:"aliasName",memberFromOptionUserId:"userId",memberFromOptionImageFlag:"hasPhoto",memberFromOptionImageVersionParam:"photoModified",memberFromOptionDefaultImage:"themes/default/images/common/icon_user100.png",memberToId:"",authorityFromId:"",memberAuthorityToId:"",clickEvent:"",viewSelectId:"",groupSelectId:"",groupSelectPreOptionKey:"",groupSelectPreOptionValue:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",childTemplateString:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}"><div class="auiSummaryMeta auiFilter clearfix"><div class="filters floatLeft" id="filters_${widgetId}" ><a href="javascript:void(0)" class="customizeMenuIcon filterTip menubarOpenButton" onclick="aipo.widget.MemberFilterList.toggleMenu(dojo.byId(\'menubar_auiFilter_${widgetId}\'),dojo.byId(\'filters_${widgetId}\'),true,dojo.byId(\'${widgetId}\'));"><span id="tlDisplayGroup_${widgetId}" data-param="${groupSelectPreOptionKey}">${groupSelectPreOptionValue}</span></a><a href="javascript:void(0)" class="customizeMenuIcon filterTip menubarOpenButton" onclick="aipo.widget.MemberFilterList.toggleMenu(dojo.byId(\'menubar_auiFilter_${widgetId}\'),dojo.byId(\'filters_${widgetId}\'),true,dojo.byId(\'${widgetId}\'));" style="display:none;"><span id="tlDisplayView_${widgetId}" data-param="0"></span></a></div><div class="auiSummarySearch floatRight"><div class="auiSearch gray" name="timelineSearchForm"><input type="text" value="" name="${widgetId}-keyword" id="${widgetId}-keyword" placeholder="" onkeydown="return aipo.widget.MemberFilterList.filteredSearchCheck(arguments[0], \'${widgetId}\')"><button type="button" dojoAttachEvent="onclick:filteredSearch"><i class="icon-search"></i></button></div></div></div><div class="menubar multi" id="menubar_auiFilter_${widgetId}" style="width:260px;display:none; "><div><p class="caption"></p><ul class="filtertype filtertype_${widgetId}" id="${groupSelectId}"></ul></div><div><p class="caption"></p><ul class="filtertype filtertype_${widgetId}" id="${viewSelectId}"><li class="selected"><a href="javascript:void(0);" class="selected" onclick="aipo.widget.MemberFilterList.filterCheckedDisplay(\'${widgetId}\',this,\'${memberFromId}\')" data-param="0"></a></li><li><a href="javascript:void(0);" onclick="aipo.widget.MemberFilterList.filterCheckedDisplay(\'${widgetId}\',this,\'${memberFromId}\')" data-param="1"></a></li><li><a href="javascript:void(0);" onclick="aipo.widget.MemberFilterList.filterCheckedDisplay(\'${widgetId}\',this,\'${memberFromId}\')" data-param="2"></a></li></ul></div></div><div class="memberPopupDiv_ver3"><div class="head" style="display:none;"><input type="checkbox" id="tmp_head_checkbox_${widgetId}" disabled="disabled"></div><div style="display: none;" id="${widgetId}-memberlist-indicator" class="indicator alignleft"></div><ul class="memberPopupList" id="${memberFromId}"></ul><select multiple="multiple" style="display:none" name="${memberToId}" id="${memberToId}"></select><select multiple="multiple" style="display:none" name="${memberAuthorityToId}" id="${memberAuthorityToId}"></select></div></div>\n',postCreate:function(){this.id=this.widgetId;params={url:this.memberFromUrl,key:this.memberFromOptionKey,value:this.memberFromOptionValue,clickEvent:this.clickEvent,selectedId:this.memberToId,selectedAuthId:this.memberAuthorityToId,name:this.memberFromId,userId:this.memberFromOptionUserId,image_flag:this.memberFromOptionImageFlag,image_version:this.memberFromOptionImageVersionParam,default_image:this.memberFromOptionDefaultImage,child_html:this.childTemplateString,widgetId:this.widgetId,keyword:this.widgetId+"-keyword",indicator:this.widgetId+"-memberlist-indicator",callback:this.fixScroll};aimluck.io.createMemberLists(this.memberFromId,params);params={url:this.memberGroupUrl,key:this.groupSelectOptionKey,value:this.groupSelectOptionValue,preOptions:{key:this.groupSelectPreOptionKey,value:this.groupSelectPreOptionValue},selectedId:this.groupSelectPreOptionKey,widgetId:this.widgetId,child_html:this.childTemplateString,};aimluck.io.createGroupLists(this.groupSelectId,params);aipo.widget.MemberFilterList.filterSelectDisplay(this.widgetId,this.groupSelectPreOptionKey,this.groupSelectPreOptionValue)},filteredSearch:function(){var d=dojo.byId("tlDisplayGroup_"+this.widgetId).getAttribute("data-param");var c=dojo.byId("tlDisplayGroup_"+this.widgetId).getAttribute("data-name");var b=dojo.byId(this.groupSelectId);var a=dojo.query("a.selected",b);if(a.length>0){this.changeGroup(a[0],d,c)}},changeGroup:function(e,g,d){var b=this.changeGroupUrl+"&groupname="+g;var f={url:b,key:this.memberFromOptionKey,value:this.memberFromOptionValue,clickEvent:this.clickEvent,selectedId:this.memberToId,selectedAuthId:this.memberAuthorityToId,name:this.memberFromId,userId:this.memberFromOptionUserId,image_flag:this.memberFromOptionImageFlag,image_version:this.memberFromOptionImageVersionParam,default_image:this.memberFromOptionDefaultImage,child_html:this.childTemplateString,widgetId:this.widgetId,keyword:this.widgetId+"-keyword",indicator:this.widgetId+"-memberlist-indicator",callback:this.fixScroll};aimluck.io.createMemberLists(this.memberFromId,f);var a=e.parentNode;var c=a.parentNode;aipo.widget.MemberFilterList.filterSelect(c,a,e);aipo.widget.MemberFilterList.filterSelectDisplay(this.widgetId,g,d)},onMemberCheck:function(b,a){aipo.widget.MemberFilterList.changeMember(b,a,dojo.byId(this.memberToId),dojo.byId(this.memberAuthorityToId));aipo.widget.MemberFilterList.filterCheckedMember(dojo.byId("tmp_head_checkbox_"+this.widgetId),this.widgetId,this.memberFromId);aipo.widget.MemberFilterList.setWrapperHeight()},onAuthorityCheck:function(a,b){aipo.widget.MemberFilterList.changeAuthority(a,b,dojo.byId(this.memberToId),dojo.byId(this.memberAuthorityToId));aipo.widget.MemberFilterList.setWrapperHeight()},fixScroll:function(){if(!dojo.isIE){dojo.forEach(dojo.query(".memberPopupDiv_ver3 .memberPopupList"),function(a){setTimeout(function(){a.style.overflow="hidden";a.style["overflow-y"]="scroll"},100)})}}});aipo.widget.MemberFilterList.setup=function(g,e,d,h){var c=dojo.byId(g);if(c){var a=dojo.byId(e);var f;var b=a.options;if(b.length==1&&b[0].value==""){return}for(f=0;f<b.length;f++){aipo.widget.MemberFilterList.addOptionSync(b[f].value,b[f].text,true,b[f].getAttribute("data-authority"),d,h)}}};aipo.widget.MemberFilterList.addOptionSync=function(k,l,c,e,g,f){var h=dojo.byId(g);var b=dojo.byId(f);if(document.all){var d=document.createElement("OPTION");d.value=k;d.text=l;d.selected=c;if(h.options.length==1&&h.options[0].value==""){h.options.remove(0)}h.add(d,h.options.length);var a=document.createElement("OPTION");a.value=e;a.text=l;a.selected=c;if(b.options.length==1&&b.options[0].value==""){b.options.remove(0)}b.add(a,b.options.length)}else{var d=document.createElement("OPTION");d.value=k;d.text=l;d.selected=c;if(h.options.length==1&&h.options[0].value==""){h.removeChild(h.options[0])}h.insertBefore(d,h.options[h.options.length]);var a=document.createElement("OPTION");a.value=e;a.text=l;a.selected=c;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}b.insertBefore(a,b.options[b.options.length])}};aipo.widget.MemberFilterList.setWrapperHeight=function(){var a=document.getElementById("modalDialog");if(a){var b=document.getElementById("wrapper");b.style.minHeight=a.clientHeight+"px"}};aipo.widget.MemberFilterList.addAllMember=function(e,a,b){if(document.all){var f=b.options;for(i=0;i<e.form.elements.length;i++){input=e.form.elements[i];if(!input.disabled&&input.type=="checkbox"&&input.name==a){var d=false;for(j=0;j<f.length;j++){if(f[j].value==input.value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=input.value;c.text=input.getAttribute("data-name");c.selected=true;if(f.length==1&&f[0].value==""){f.remove(0)}f.add(c,f.length)}}}else{var f=b.options;for(i=0;i<e.form.elements.length;i++){input=e.form.elements[i];if(!input.disabled&&input.type=="checkbox"&&input.name==a){var d=false;for(j=0;j<f.length;j++){if(f[j].value==input.value){d=true;break}}if(d){continue}var c=document.createElement("OPTION");c.value=input.value;c.text=input.getAttribute("data-name");c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}b.insertBefore(c,f[f.length])}}}};aipo.widget.MemberFilterList.removeAllMember=function(a){if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1}}}};aipo.widget.MemberFilterList.changeMember=function(l,m,b,g){if(document.all){var e=b.options;var c=g.options;var a=dojo.byId(m);var k=a.value;if(l.value==""){return}if(l.checked){var h=false;for(j=0;j<e.length;j++){if(e[j].value==l.value){h=true;break}}if(h){return}var f=document.createElement("OPTION");f.value=l.value;f.text=l.getAttribute("data-name");f.selected=true;if(e.length==1&&e[0].value==""){e.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}e.add(f,e.length);var d=document.createElement("OPTION");d.value=k;d.text=l.getAttribute("data-name");d.selected=true;if(c.length==1&&c[0].value==""){c.remove(0)}if(this.memberLimit!=0&&g.options.length>=this.memberLimit){return}c.add(d,c.length)}else{for(j=0;j<e.length;j++){if(e[j].value==l.value){e.remove(j);c.remove(j)}}}}else{var e=b.options;var c=g.options;var a=dojo.byId(m);var k=a.value;if(l.value==""){return}if(l.checked){var h=false;for(j=0;j<e.length;j++){if(e[j].value==l.value){h=true;break}}if(h){return}var f=document.createElement("OPTION");f.value=l.value;f.text=l.getAttribute("data-name");f.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}b.insertBefore(f,e[e.length]);var d=document.createElement("OPTION");d.value=k;d.text=l.getAttribute("data-name");d.selected=true;if(g.options.length==1&&g.options[0].value==""){g.removeChild(g.options[0])}g.insertBefore(d,c[c.length])}else{for(j=0;j<e.length;j++){if(e[j].value==l.value){b.removeChild(e[j]);g.removeChild(c[j])}}}}};aipo.widget.MemberFilterList.changeAuthority=function(h,g,b,e){var d=b.options;var c=e.options;var a=dojo.byId(h);var f=a.value;var k=dojo.byId(g);if(k.value==""){return}for(j=0;j<d.length;j++){if(d[j].value==k.value){c[j].value=dojo.byId(h).value}}};aipo.widget.MemberFilterList.toggleMenu=function(h,g,f,e){var d=g.getBoundingClientRect();var b=document.documentElement.getBoundingClientRect();if(h.style.display=="none"){dojo.query("div.menubar").style("display","none");var a={left:document.documentElement.scrollLeft||document.body.scrollLeft,top:document.documentElement.scrollTop||document.body.scrollTop};h.style.opacity="0";setTimeout(function(){dojo.style(h,"display","block")},0);if(b.right-h.clientWidth>d.left){}else{}if(b.bottom-h.clientHeight>d.bottom||f){}else{}h.style.opacity=""}else{dojo.query("div.menubar").style("display","none")}if(aipo.userAgent.isSmartPhone()){var c=document.getElementById("modalDialog");if(c){dojo.connect(c,"onclick",null,function(){e.style.height="";aipo.widget.MemberFilterList.setWrapperHeight()})}setTimeout(function(){var k=h.getBoundingClientRect();if(e){if(b.bottom<k.bottom){e.style.height=k.bottom-d.top+"px"}}aipo.widget.MemberFilterList.setWrapperHeight()},0)}};aipo.widget.MemberFilterList.filterSelect=function(d,b,c){dojo.query("li",d).removeClass("selected");dojo.query("a",d).removeClass("selected");dojo.query(b).addClass("selected");dojo.query(c).addClass("selected")};aipo.widget.MemberFilterList.filterSelectDisplay=function(c,b,a){dojo.byId("tlDisplayGroup_"+c).innerHTML=a;dojo.byId("tlDisplayGroup_"+c).setAttribute("data-param",b);dojo.byId("tlDisplayGroup_"+c).setAttribute("data-name",a)};aipo.widget.MemberFilterList.filterCheckedDisplay=function(e,d,b){var a=d.parentNode;var c=a.parentNode;aipo.widget.MemberFilterList.filterSelectDisplayView(e,d);aipo.widget.MemberFilterList.filterSelect(c,a,d);aipo.widget.MemberFilterList.filterCheckedMember(dojo.byId("tmp_head_checkbox_"+e),e,b)};aipo.widget.MemberFilterList.filterSelectDisplayView=function(f,e){var b=e.parentNode;var d=b.parentNode;var g=e.getAttribute("data-param");dojo.byId("tlDisplayView_"+f).innerHTML=e.innerHTML;dojo.byId("tlDisplayView_"+f).setAttribute("data-param",g);var c=dojo.byId("tlDisplayView_"+f).parentNode;if(g!=0){dojo.style(c,"display","")}else{dojo.style(c,"display","none")}};aipo.widget.MemberFilterList.filterCheckedMemberSync=function(c,d){var b=c.parentNode;var a=b.parentNode;if(d==1){if(c.checked){c.disabled=false;dojo.style(a,"display","block")}else{c.disabled=true;dojo.style(a,"display","none")}}else{if(d==2){if(!c.checked){c.disabled=false;dojo.style(a,"display","block")}else{c.disabled=true;dojo.style(a,"display","none")}}else{c.disabled=false;dojo.style(a,"display","block")}}};aipo.widget.MemberFilterList.filterCheckedMember=function(c,b,a){var d=dojo.byId("tlDisplayView_"+b).getAttribute("data-param");if(document.all){for(i=0;i<c.form.elements.length;i++){input=c.form.elements[i];if(input.type=="checkbox"&&input.name==a){aipo.widget.MemberFilterList.filterCheckedMemberSync(input,d)}}}else{for(i=0;i<c.form.elements.length;i++){input=c.form.elements[i];if(input.type=="checkbox"&&input.name==a){aipo.widget.MemberFilterList.filterCheckedMemberSync(input,d)}}}};aipo.widget.MemberFilterList.filteredSearchCheck=function(d,b){var c=dijit.byId(b);var a;if(window.event){a=window.event.keyCode}else{if(d){a=d.which}}if((a==13)|(a==32)){if(c){c.filteredSearch()}return false}return true}};
dojo.provide("aipo.workflow.MemberNormalSelectList");dojo.require("aipo.widget.MemberNormalSelectList");dojo.declare("aipo.workflow.MemberNormalSelectList",[aipo.widget.MemberNormalSelectList],{addMember:function(f,b){if(document.all){var a=f.options;var g=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var e=false;for(j=0;j<g.length;j++){if(g[j].value==a[i].value){e=true;break}}if(e){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(g.length==1&&g[0].value==""){g.remove(0)}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}var d=document.createElement("OPTION");d.value=a[i].value;d.text=(j+1)+". "+a[i].text;d.selected=true;g.add(d,g.length)}}else{var a=f.options;var g=b.options;if(a.length==1&&a[0].value==""){return}for(i=0;i<a.length;i++){if(!a[i].selected){continue}var e=false;for(j=0;j<g.length;j++){if(g[j].value==a[i].value){e=true;break}}if(e){continue}var c=document.createElement("OPTION");c.value=a[i].value;c.text=a[i].text;c.selected=true;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0])}if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}var d=document.createElement("OPTION");d.value=a[i].value;d.text=(j+1)+". "+a[i].text;d.selected=true;b.insertBefore(d,g[g.length])}}},removeMemberSync:function(){var a=dojo.byId(this.memberToId);if(document.all){var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){b.remove(i);i-=1;if(i+1<b.length){for(j=i+1;j<b.length;j++){if(j<9){b[j].text=b[j].text.slice(3)}else{b[j].text=b[j].text.slice(4)}b[j].text=(j+1)+". "+b[j].text}}}}}else{var b=a.options;for(i=0;i<b.length;i++){if(b[i].selected){a.removeChild(b[i]);i-=1;if(i+1<b.length){for(j=i+1;j<b.length;j++){if(j<9){b[j].text=b[j].text.slice(3)}else{b[j].text=b[j].text.slice(4)}b[j].text=(j+1)+". "+b[j].text}}}}}}});
if(!dojo._hasResource["aipo.widget.DateCalendar"]){dojo._hasResource["aipo.widget.DateCalendar"]=true;dojo.provide("aipo.widget.DateCalendar");dojo.require("dijit._Calendar");dojo.require("dojo.string");dojo.requireLocalization("aipo","locale");dojo.declare("aipo.widget.DateCalendar",[dijit._Calendar],{dateId:"",callback:function(){},templateString:'<table cellspacing="0" cellpadding="0" class="dijitCalendarContainer">\n\t<thead>\n\t\t<tr class="dijitReset dijitCalendarMonthContainer" valign="top">\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="decrementMonth">\n\t\t\t\t<span class="dijitInline dijitCalendarIncrementControl dijitCalendarDecrease"><span dojoAttachPoint="decreaseArrowNode" class="dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarDecreaseInner">-</span></span>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' colspan="5">\n\t\t\t\t<div dojoAttachPoint="monthLabelSpacer" class="dijitCalendarMonthLabelSpacer"></div>\n\t\t\t\t<div dojoAttachPoint="monthLabelNode" class="dijitCalendarMonth"></div>\n\t\t\t</th>\n\t\t\t<th class=\'dijitReset\' dojoAttachPoint="incrementMonth">\n\t\t\t\t<div class="dijitInline dijitCalendarIncrementControl dijitCalendarIncrease"><span dojoAttachPoint="increaseArrowNode" class="dijitA11ySideArrow dijitCalendarIncrementControl dijitCalendarIncreaseInner">+</span></div>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class="dijitReset dijitCalendarDayLabelTemplate"><span class="dijitCalendarDayLabel"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent="onclick: _onDayClick" class="dijitReset dijitCalendarBodyContainer">\n\t\t<tr class="dijitReset dijitCalendarWeekTemplate">\n\t\t\t<td class="dijitReset dijitCalendarDateTemplate"><span class="dijitCalendarDateLabel"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class="dijitReset dijitCalendarYearContainer">\n\t\t<tr>\n\t\t\t<td class=\'dijitReset\' valign="top" colspan="7">\n\t\t\t\t<h3 class="dijitCalendarYearLabel">\n\t\t\t\t\t<span dojoAttachPoint="previousYearLabelNode" class="dijitInline dijitCalendarPreviousYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="currentYearLabelNode" class="dijitInline dijitCalendarSelectedYear"></span>\n\t\t\t\t\t<span dojoAttachPoint="nextYearLabelNode" class="dijitInline dijitCalendarNextYear"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\t\n',postCreate:function(){this.inherited(arguments)},onChange:function(a){this.onChangeNoCallback(a);this.callback(a)},onValueSelected:function(a){this.onChange(a)},onChangeNoCallback:function(d){var j=d.getFullYear();var c=1+d.getMonth();var b=d.getDate();var a=dojo.date.locale.getNames("days",this.dayWidth,"standAlone",this.lang);var i=a[d.getDay()];var f=dojo.byId(this.dateId+"_view");var k=dojo.i18n.getLocalization("aipo","locale");var l=dojo.string.substitute(k.DATE_FORMAT,{tyear:j,tmonth:c,tdate:b,tday:i});f.innerHTML=l;var m=dojo.byId(this.dateId);m.value=j+"/"+c+"/"+b;var h=dojo.byId(this.dateId+"_year");h.value=j;var g=dojo.byId(this.dateId+"_month");g.value=c;var e=dojo.byId(this.dateId+"_day");e.value=b;dojo.byId(this.dateId+"_flag").checked=false},disabledCalendar:function(c){if(c){var e=dojo.byId(this.dateId+"_view");var j=dojo.i18n.getLocalization("aipo","locale");e.innerHTML=j.DISABLED_DATE;var h=dojo.byId(this.dateId+"_year");h.value="";var f=dojo.byId(this.dateId+"_month");f.value="";var d=dojo.byId(this.dateId+"_day");d.value="";this.value="";if(!dojo.byId(this.dateId+"_flag").checked){dojo.byId(this.dateId+"_flag").checked=true}}else{var l=dojo.byId(this.dateId);if((!l.value)||(l.value=="")){this.setValue(new Date())}else{var k=l.value.split("/");if(k.length==3){var i=k[0];var b=k[1]-1;var g=k[2];var a=new Date(i,b,g);this.setValue(a)}}}},clearDate:function(){this.value=null}})};
if(!dojo._hasResource["aipo.widget.DropdownDatepicker"]){dojo._hasResource["aipo.widget.DropdownDatepicker"]=true;dojo.provide("aipo.widget.DropdownDatepicker");dojo.require("aimluck.widget.Dropdown");dojo.require("aipo.widget.DateCalendar");dojo.require("dojo.date.locale");dojo.requireLocalization("aipo","locale");var nlsStrings=dojo.i18n.getLocalization("aipo","locale");dojo.declare("aipo.widget.DropdownDatepicker",[aimluck.widget.Dropdown],{dateId:"",dateValue:"",initValue:"",displayCheck:"",iconURL:"",iconAlt:"",callback:function(){},listWidgetId:"datewidget",templateString:'<div class="dijit dijitLeft dijitInline"><div dojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t style="float:left;"><div class=\'dijitRight\'>\n\t<span class="" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><span class="" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label"><a href="javascript:void(0)" class="auiButtonIcon"><span><i class="icon-calendar"></i></span></a>\n\t</span></div></div><div class="alignleft"><span name="${dateId}_view" id="${dateId}_view" dojoAttachPoint="inputNode" style="vertical-align:middle;background:#ffffff ;border:0px;" autocomplete="off" readonly="readonly"></span> <span style="display:${displayCheck}"><input name="${dateId}_check" type="checkbox" value="TRUE" id="${dateId}_flag" dojoAttachEvent="onclick:onCheckBlank" /><label for="${dateId}_flag">'+nlsStrings.NOT_SPECIFIED_STR+'</label></span><input type="hidden" id="${dateId}" name="${dateId}" value="${dateValue}" dojoAttachPoint="valueNode" /><input type="hidden" id="${dateId}_year" name="${dateId}_year" value="" dojoAttachPoint="valueYearNode" /><input type="hidden" id="${dateId}_month" name="${dateId}_month" value="" dojoAttachPoint="valueMonthNode" /><input type="hidden" id="${dateId}_day" name="${dateId}_day" value="" dojoAttachPoint="valueDayNode" /></div></div>\n',_openDropDown:function(){aimluck.widget.Dropdown.prototype._openDropDown.apply(this);if(aipo.userAgent.isAndroid()){dojo.query("input,select,button").forEach(function(b,a){b.disabled=true})}},_closeDropDown:function(){aimluck.widget.Dropdown.prototype._closeDropDown.apply(this);if(aipo.userAgent.isAndroid()){dojo.query("input,select,button:not(.disabled)").forEach(function(b,a){b.disabled=false})}},postCreate:function(){this.inherited(arguments);var f={widgetId:this.listWidgetId,dateId:this.dateId,callback:this.callback};this.dropDown=new aipo.widget.DateCalendar(f,this.listWidgetId);if(this.initValue!=""){var b=this.initValue.split("/");if(b.length==3){var d=b[0];var a=b[1]-1;var c=b[2];var e=dojo.byId(this.dateId);e.value=this.initValue;this.dropDown.clearDate();this.dropDown.setValue(new Date(d,a,c))}}else{this.dropDown.disabledCalendar(true)}},onCheckBlank:function(a){this.dropDown.disabledCalendar(dojo.byId(this.dateId+"_flag").checked)}})};
if(!dojo._hasResource["aipo.widget.DropdownGrouppicker"]){dojo._hasResource["aipo.widget.DropdownGrouppicker"]=true;dojo.provide("aipo.widget.DropdownGrouppicker");dojo.require("aimluck.widget.Dropdown");dojo.require("aipo.widget.GroupSelectList");dojo.declare("aipo.widget.DropdownGrouppicker",[aimluck.widget.Dropdown],{inputWidth:"250px",hiddenId:"",hiddenValue:"",iconURL:"",iconAlt:"",selectId:"",inputId:"",inputValue:"",buttonAddId:"",buttonRemoveId:"",memberFromTitle:"",memberFromId:"",memberToTitle:"",memberToId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",groupSelectId:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",listWidgetId:"",templateString:'<div class="dijit dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class=\'dijitRight\'>\n\t<span class="" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><span class="" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label"><img src="${iconURL}" alt="${iconAlt}" style="cursor:pointer;cursor:hand;padding-right:2px" align="top" />\n\t</span><select name="${selectId}" id="${selectId}" size="10" multiple="multiple" style="display:none" dojoAttachPoint="selectNode"></select><input type="hidden" id="${hiddenId}" name="${hiddenId}" value="${hiddenValue}" dojoAttachPoint="valueNode" /><span name="${inputId}" id="${inputId}" dojoAttachPoint="inputNode">${inputValue}</span>\n</div></div>\n',postCreate:function(){var b={widgetId:this.listWidgetId,selectId:this.selectId,inputId:this.inputId,buttonAddId:this.buttonAddId,buttonRemoveId:this.buttonRemoveId,memberFromTitle:this.memberFromTitle,memberFromId:this.memberFromId,memberToTitle:this.memberToTitle,memberToId:this.memberToId,memberFromUrl:this.memberFromUrl,memberFromOptionKey:this.memberFromOptionKey,memberFromOptionValue:this.memberFromOptionValue};var c=dijit.byId(this.listWidgetId);if(c){this.dropDown=c;var a=dojo.byId(c.selectId);this.removeAllOptions(a);a=dojo.byId(c.memberToId);this.removeAllOptions(a)}else{this.dropDown=new aipo.widget.GroupSelectList(b,this.listWidgetId)}this.inherited(arguments)},removeAllOptions:function(a){var b;if(document.all){var c=a.options;for(b=0;b<c.length;b++){c.remove(b);b-=1}}else{var c=a.options;for(b=0;b<c.length;b++){a.removeChild(c[b]);b-=1}}},addOptionSync:function(e,f,g){var b=dojo.byId(this.memberToId);var a=dojo.byId(this.selectId);if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}if(document.all){var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.options.remove(0);a.options.remove(0)}b.add(d,b.options.length);a.add(c,a.options.length)}else{var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0]);a.removeChild(b.options[0])}b.insertBefore(d,b.options[b.options.length]);a.insertBefore(c,a.options[a.options.length])}this.inputMemberSync()},inputMemberSync:function(){var b=dojo.byId(this.selectId);var c=dojo.byId(this.inputId);var e="";var f=b.options;var d=0;var a=f.length;if(a<=0){return}for(d=0;d<a;d++){if(d!=0){e+=", "}e+=f[d].text}c.innerHTML=e}})};
if(!dojo._hasResource["aipo.widget.DropdownMemberpicker"]){dojo._hasResource["aipo.widget.DropdownMemberpicker"]=true;dojo.provide("aipo.widget.DropdownMemberpicker");dojo.require("aimluck.widget.Dropdown");dojo.require("aipo.widget.MemberSelectList");dojo.declare("aipo.widget.DropdownMemberpicker",[aimluck.widget.Dropdown],{inputWidth:"250px",hiddenId:"",hiddenValue:"",iconURL:"",iconAlt:"",selectId:"",inputId:"",inputValue:"",buttonAddId:"",buttonRemoveId:"",memberFromId:"",memberToTitle:"",memberToId:"",memberFromUrl:"",memberFromOptionKey:"",memberFromOptionValue:"",groupSelectId:"",groupSelectPreOptionKey:"",groupSelectPreOptionValue:"",groupSelectOptionKey:"",groupSelectOptionValue:"",memberGroupUrl:"",changeGroupUrl:"",listWidgetId:"memberlistwidget",templateString:'<div class="dijit dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class=\'dijitRight\'>\n\t<span class="" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><span class="" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label"><img src="${iconURL}" alt="${iconAlt}" style="cursor:pointer;cursor:hand;padding-right:2px" align="top" />\n\t</span><select name="${selectId}" id="${selectId}" size="10" multiple="multiple" style="display:none" dojoAttachPoint="selectNode"></select><input type="hidden" id="${hiddenId}" name="${hiddenId}" value="${hiddenValue}" dojoAttachPoint="valueNode" /><span name="${inputId}" id="${inputId}" dojoAttachPoint="inputNode">${inputValue}</span>\n</div></div>\n',postCreate:function(){var b={widgetId:this.listWidgetId,selectId:this.selectId,inputId:this.inputId,buttonAddId:this.buttonAddId,buttonRemoveId:this.buttonRemoveId,memberFromId:this.memberFromId,memberToTitle:this.memberToTitle,memberToId:this.memberToId,memberFromUrl:this.memberFromUrl,memberFromOptionKey:this.memberFromOptionKey,memberFromOptionValue:this.memberFromOptionValue,groupSelectId:this.groupSelectId,groupSelectPreOptionKey:this.groupSelectPreOptionKey,groupSelectPreOptionValue:this.groupSelectPreOptionValue,groupSelectOptionKey:this.groupSelectOptionKey,groupSelectOptionValue:this.groupSelectOptionValue,memberGroupUrl:this.memberGroupUrl,changeGroupUrl:this.changeGroupUrl};var c=dijit.byId(this.listWidgetId);if(c){this.dropDown=c;var a=dojo.byId(c.selectId);this.removeAllOptions(a);a=dojo.byId(c.memberToId);this.removeAllOptions(a)}else{this.dropDown=new aipo.widget.MemberSelectList(b,this.listWidgetId)}this.inherited(arguments)},removeAllOptions:function(a){var b;if(document.all){var c=a.options;for(b=0;b<c.length;b++){c.remove(b);b-=1}}else{var c=a.options;for(b=0;b<c.length;b++){a.removeChild(c[b]);b-=1}}},addOptionSync:function(e,f,g){var b=dojo.byId(this.memberToId);var a=dojo.byId(this.selectId);if(this.memberLimit!=0&&b.options.length>=this.memberLimit){return}if(document.all){var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.options.remove(0);a.options.remove(0)}b.add(d,b.options.length);a.add(c,a.options.length)}else{var d=document.createElement("OPTION");d.value=e;d.text=f;d.selected=g;var c=document.createElement("OPTION");c.value=e;c.text=f;c.selected=g;if(b.options.length==1&&b.options[0].value==""){b.removeChild(b.options[0]);a.removeChild(b.options[0])}b.insertBefore(d,b.options[b.options.length]);a.insertBefore(c,a.options[a.options.length])}this.inputMemberSync()},inputMemberSync:function(){var b=dojo.byId(this.selectId);var c=dojo.byId(this.inputId);var e="";var f=b.options;var d=0;var a=f.length;if(a<=0){return}for(d=0;d<a;d++){if(d!=0){e+=", "}e+=f[d].text}c.innerHTML=e}})};
if(!dojo._hasResource["aipo.widget.ToolTip"]){dojo._hasResource["aipo.widget.ToolTip"]=true;dojo.provide("aipo.widget.ToolTip");dojo.require("dijit.Tooltip");dojo.declare("aipo.widget._MasterToolTip",[dijit._MasterTooltip],{duration:100,postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode)},show:function(i,a,h,c){if(this.aroundNode&&this.aroundNode===a){return}if(a==null||a=="undefined"){return}if(this.domNode==null||this.domNode=="undefined"){return}this.containerNode.innerHTML=i;this.domNode.style.width="150px";this.domNode.style.top=(this.domNode.offsetTop+1)+"px";try{var g=this.isLeftToRight()?{BR:"BL",BL:"BR"}:{BL:"BR",BR:"BL"};var f=dijit.placeOnScreenAroundElement(this.domNode,a,g);this.domNode.className="dijitTooltip dijitTooltip"+(f.corner=="BL"?"Right":"Left")}catch(b){this.hide(a);return}if(parseInt(this.domNode.style.left)<1){this.domNode.style.top=-10000+"px"}else{var d=parseInt(aipo.widget.tmpY)-36;this.domNode.style.top=d+"px"}dojo.style(this.domNode,"opacity",1);this.isShowingNow=true;this.aroundNode=a;if(h){h(this.containerNode,c)}},hide:function(a){if(this.domNode){this.domNode.zIndex=0}if(!this.aroundNode||this.aroundNode!==a){return}if(this._onDeck){this._onDeck=null;return}this.domNode.style.top=-10000+"px";dojo.style(this.domNode,"opacity",0);this.isShowingNow=false;this.aroundNode=null}});aipo.widget._masterTT=null;aipo.widget.showTooltip=function(d,a,c,b){if(!aipo.widget._masterTT){aipo.widget._masterTT=new aipo.widget._MasterToolTip()}return aipo.widget._masterTT.show(d,a,c,b)};aipo.widget.hideTooltip=function(a){if(!aipo.widget._masterTT){return}return aipo.widget._masterTT.hide(a)};dojo.declare("aipo.widget.ToolTip",[dijit.Tooltip],{origZIndex:0,_portletId:null,_callback:null,constructor:function(b,a,c){this._portletId=a;this._callback=c},open:function(a){a=a||this._connectNodes[0];if(!a){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}aipo.widget.showTooltip(this.label||this.domNode.innerHTML,a,this._callback,this._connectNodes[0]);this._connectNode=a},close:function(){aipo.widget.hideTooltip(this._connectNode);delete this._connectNode;if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}},_onHover:function(b){if(ptConfig[this._portletId].isTooltipEnable!=true){return}if(!this._showTimer){var a=b.target;aipo.widget.tmpX=b.pageX;aipo.widget.tmpY=b.pageY;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(a)}),this.showDelay)}},_onUnHover:function(a){if(this._focus){return}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer}this.close()}})};
if(!dojo._hasResource["aipo.widget.ActivityList"]){dojo._hasResource["aipo.widget.ActivityList"]=true;dojo.provide("aipo.widget.ActivityList");dojo.require("dijit._Widget");dojo.require("dijit._Templated");dojo.require("aimluck.widget.Contentpane");dojo.declare("aipo.widget.ActivityList",[dijit._Widget,dijit._Templated],{widgetId:"",templateString:'<div id="${widgetId}" widgetId="${widgetId}" style="width: 420px;"><div class="activityPopup"><div class="clearfix"><div id="activityListPane" widgetId="activityListPane"></div></div></div></div>\n',postCreate:function(){},reload:function(){var a=dijit.byId("activityListPane");if(!a){a=new aimluck.widget.Contentpane({},"activityListPane")}if(window.webkitNotifications){a.viewPage("?template=ActivityListScreen&s=1&p="+window.webkitNotifications.checkPermission())}else{if(window.Notification){a.viewPage("?template=ActivityListScreen&s=1&p="+window.Notification.permission)}else{a.viewPage("?template=ActivityListScreen&s=0")}}}})};
if(!dojo._hasResource["aipo.widget.DropdownActivityChecker"]){dojo._hasResource["aipo.widget.DropdownActivityChecker"]=true;dojo.provide("aipo.widget.DropdownActivityChecker");dojo.require("aimluck.widget.Dropdown");dojo.require("aipo.widget.ActivityList");dojo.declare("aipo.widget.DropdownActivityChecker",[aimluck.widget.Dropdown],{initValue:"",displayCheck:"",iconURL:"",iconAlt:"",iconWidth:"",iconHeight:"",extendClass:"",eventList:[],callback:function(){},templateString:'<div class="dijit dijitLeft dijitInline"\n\tdojoAttachEvent="onmouseenter:_onMouse,onmouseleave:_onMouse,onmousedown:_onMouse,onclick:_onDropDownClick,onkeydown:_onDropDownKeydown,onblur:_onDropDownBlur,onkeypress:_onKey"\n\t><div class="" type="${type}"\n\t\tdojoAttachPoint="focusNode,titleNode" waiRole="button" waiState="haspopup-true,labelledby-${id}_label"\n\t\t><div class="" \tdojoAttachPoint="containerNode,popupStateNode"\n\t\tid="${id}_label"><div id="activityChecker" class="zero activitycheckerstyle counter ${extendClass}"></div><span class="mb_hide"></span><span class="pc_hide"><i class="icon-bell-alt"></i></span></div></div></div>\n',postCreate:function(){this.inherited(arguments);this.dropDown=new aipo.widget.ActivityList({},"activityLiteList")},_openDropDown:function(){this.inherited(arguments);if(dojo.byId("activitycheckerContainer")){dojo.addClass(dojo.byId("activitycheckerContainer"),"active")}this.dropDown.reload();var j=window.navigator.userAgent.toLowerCase();if(j.indexOf("iphone")>-1||j.indexOf("android")>-1){if(!!document.documentElement.scrollTop){document.documentElement.scrollTop=0}else{if(!!document.body.scrollTop){document.body.scrollTop=0}}}if(aipo.userAgent.isAndroid()){var e=this;var g=function(f){f.preventDefault();return false};var a=dojo.query("input,select,button,a",this.domNode);var b=dojo.byId("appsNavigation_v2");var c=dojo.query("input,select,button,a",b);var h=dojo.byId("auiWidgetsArea");var i=dojo.query("input,select,button,a",h);var d=a;d=d.concat(c);d=d.concat(i);dojo.query("input,select,button,a").forEach(function(f){if(!aipo.arrayContains(d,f)){e.eventList.push(dojo.connect(f,"click",g))}});dojo.query("input,select,button").forEach(function(k,f){if(!aipo.arrayContains(d,k)&&!k.disabled){dojo.addClass(k,"disabled-by-activity");k.disabled=true}})}},_closeDropDown:function(){this.inherited(arguments);if(dojo.byId("activitycheckerContainer")){dojo.removeClass(dojo.byId("activitycheckerContainer"),"active")}if(document.getElementById("wrapper")){document.getElementById("wrapper").style.minHeight=""}if(aipo.userAgent.isAndroid()){for(var a=0;a<this.eventList.length;a++){dojo.disconnect(this.eventList[a])}this.eventList=[];dojo.query("input.disabled-by-activity,select.disabled-by-activity,button.disabled-by-activity").forEach(function(c,b){dojo.removeClass(c,"disabled-by-activity");c.disabled=false})}},onCheckActivity:function(b){var a=dojo.byId("activitychecker");if(b>99){a.innerHTML="99+";dojo.removeClass("activitychecker","zero")}else{if(b==0){a.innerHTML=b;dojo.addClass("activitychecker","zero")}else{a.innerHTML=b;dojo.removeClass("activitychecker","zero")}}dojo.addClass("activitychecker","counter")},onCheckBlank:function(a){}})};
dojo.provide("aipo.fileupload.widget.FileuploadDialog");dojo.provide("aipo.fileupload.widget.FileuploadDialogUnderlay");dojo.provide("aipo.fileupload.widget.YoutubeDialog");dojo.provide("aipo.fileupload.widget.YoutubeDialogUnderlay");dojo.require("aimluck.widget.Dialog");dojo.declare("aipo.fileupload.widget.FileuploadDialogUnderlay",[aimluck.widget.DialogUnderlay],{templateString:"<div class=fileuploadDialogUnderlayWrapper id='${id}_underlay'><div class=fileuploadDialogUnderlay dojoAttachPoint='node'></div></div>"});dojo.declare("aipo.fileupload.widget.FileuploadDialog",[aimluck.widget.Dialog],{loadingMessage:"<div class='indicator'>...</div>",templateCssString:"fileuploadDialog",templateString:"<div id='fileuploadDialog' class='${templateCssString}' dojoattachpoint='wrapper'><span dojoattachpoint='tabStartOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap'tabindex='0'></span><span dojoattachpoint='tabStart' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><div dojoattachpoint='containerNode' style='position: relative; z-index: 2;'></div><span dojoattachpoint='tabEnd' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><span dojoattachpoint='tabEndOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span></div>",_setup:function(){this._modalconnects=[];if(this.titleBar){this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar})}this._underlay=new aipo.fileupload.widget.FileuploadDialogUnderlay();var a=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:a,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]);this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:a,duration:this.duration,onEnd:function(){a.style.display="none"}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])}});dojo.declare("aipo.fileupload.widget.YoutubeDialogUnderlay",[aimluck.widget.DialogUnderlay],{templateString:"<div class='fileuploadViewDialogUnderlayWrapper  modalDialogUnderlayWrapper' id='${id}_underlay'><div class='fileuploadViewDialogUnderlay modalDialogUnderlay' dojoAttachPoint='node'></div></div>"});dojo.declare("aipo.fileupload.widget.YoutubeDialog",[aimluck.widget.Dialog],{loadingMessage:"<div class='indicator'>...</div>",templateCssString:"auiPopup imgPopup youtubeDialog",templateString:"<div id='youtubeDialog' class='${templateCssString}' dojoattachpoint='wrapper'></div>",_setup:function(){this._modalconnects=[];if(this.titleBar){this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar})}this._underlay=new aipo.fileupload.widget.YoutubeDialogUnderlay();var a=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:a,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]);this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:a,duration:this.duration,onEnd:function(){a.style.display="none"}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])}});
if(!dojo._hasResource["aipo.widget.FileuploadViewDialog"]){dojo._hasResource["aipo.widget.FileuploadViewDialog"]=true;dojo.provide("aipo.fileupload.widget.FileuploadViewDialog");dojo.provide("aipo.fileupload.widget.FileuploadViewDialogUnderlay");dojo.require("aimluck.widget.Dialog");dojo.declare("aipo.fileupload.widget.FileuploadViewDialogUnderlay",[aimluck.widget.DialogUnderlay],{templateString:"<div class='fileuploadViewDialogUnderlayWrapper modalDialogUnderlayWrapper' id='${id}_underlay' onclick='aipo.fileupload.hideImageDialog()'><div class='fileuploadViewDialogUnderlay modalDialogUnderlay' dojoAttachPoint='node'></div></div>"});dojo.declare("aipo.fileupload.widget.FileuploadViewDialog",[aimluck.widget.Dialog],{loadingMessage:"<div class='indicatorDialog center'><i class='auiIcon auiIconIndicator'></i> "+nlsStrings.LOADING_STR+"</div>",errorMessage:"<div class='indicatorDialog center'>${errorState}</div>",templateCssString:"auiPopup imgPopup fileuploadViewDialog",templateString:"<div id='imageDialog' class='${templateCssString}' dojoattachpoint='wrapper'><span dojoattachpoint='tabStartOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap'tabindex='0'></span><span dojoattachpoint='tabStart' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><div dojoattachpoint='containerNode' style='position: relative; z-index: 2;'></div><span dojoattachpoint='tabEnd' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span><span dojoattachpoint='tabEndOuter' dojoonfocus='trapTabs' dojoonblur='clearTrap' tabindex='0'></span></div>",_setup:function(){this._modalconnects=[];if(this.titleBar){this._moveable=new dojo.dnd.Moveable(this.domNode,{handle:this.titleBar})}this._underlay=new aipo.fileupload.widget.FileuploadViewDialogUnderlay();var a=this.domNode;this._fadeIn=dojo.fx.combine([dojo.fadeIn({node:a,duration:this.duration}),dojo.fadeIn({node:this._underlay.domNode,duration:this.duration,onBegin:dojo.hitch(this._underlay,"show")})]);this._fadeOut=dojo.fx.combine([dojo.fadeOut({node:a,dialog:this,duration:this.duration,onEnd:function(){a.style.display="none";if(document.all){this.dialog.fixTmpScroll()}}}),dojo.fadeOut({node:this._underlay.domNode,duration:this.duration,onEnd:dojo.hitch(this._underlay,"hide")})])}})};
var gadgets=gadgets||{};var shindig=shindig||{};var osapi=osapi||{};gadgets.config=function(){var a={};var b;return{register:function(d,e,f){var c=a[d];if(!c){c=[];a[d]=c}c.push({validators:e||{},callback:f})},get:function(c){if(c){return b[c]||{}}return b},init:function(l,e){b=l;for(var d in a){if(a.hasOwnProperty(d)){var c=a[d],h=l[d];for(var i=0,j=c.length;i<j;++i){var g=c[i];if(h&&!e){var k=g.validators;for(var f in k){if(k.hasOwnProperty(f)){if(!k[f](h[f])){throw new Error('Invalid config value "'+h[f]+'" for parameter "'+f+'" in component "'+d+'"')}}}}if(g.callback){g.callback(l)}}}}},EnumValidator:function(c){var d=[];if(arguments.length>1){for(var e=0,f;(f=arguments[e]);++e){d.push(f)}}else{d=c}return function(h){for(var i=0,g;(g=d[i]);++i){if(h===d[i]){return true}}return false}},RegExValidator:function(c){return function(d){return c.test(d)}},ExistsValidator:function(c){return typeof c!=="undefined"},NonEmptyStringValidator:function(c){return typeof c==="string"&&c.length>0},BooleanValidator:function(c){return typeof c==="boolean"},LikeValidator:function(c){return function(e){for(var d in c){if(c.hasOwnProperty(d)){var f=c[d];if(!f(e[d])){return false}}}return true}}}}();gadgets.config.isGadget=false;gadgets.config.isContainer=true;gadgets.util=function(){function c(j){var i;var l=j.indexOf("?");var k=j.indexOf("#");if(k===-1){i=j.substr(l+1)}else{i=[j.substr(l+1,k-l-1),"&",j.substr(k+1)].join("")}return i.split("&")}var e=null;var f={};var g={};var d=[];var a={0:false,10:true,13:true,34:true,39:true,60:true,62:true,92:true,8232:true,8233:true};function h(j,i){return String.fromCharCode(i)}function b(i){f=i["core.util"]||{}}if(gadgets.config){gadgets.config.register("core.util",null,b)}return{getUrlParameters:function(i){var q=typeof i==="undefined";if(e!==null&&q){return e}var m={};var p=c(i||document.location.href);var k=window.decodeURIComponent?decodeURIComponent:unescape;for(var n=0,o=p.length;n<o;++n){var l=p[n].indexOf("=");if(l===-1){continue}var r=p[n].substring(0,l);var j=p[n].substring(l+1);j=j.replace(/\+/g," ");m[r]=k(j)}if(q){e=m}return m},makeClosure:function(i,m,n){var j=[];for(var k=2,l=arguments.length;k<l;++k){j.push(arguments[k])}return function(){var q=j.slice();for(var o=0,p=arguments.length;o<p;++o){q.push(arguments[o])}return m.apply(i,q)}},makeEnum:function(k){var j,l,i={};for(j=0;(l=k[j]);++j){i[l]=l}return i},getFeatureParameters:function(i){return typeof f[i]==="undefined"?null:f[i]},hasFeature:function(i){return typeof f[i]!=="undefined"},getServices:function(){return g},registerOnLoadHandler:function(i){d.push(i)},runOnLoadHandlers:function(){for(var i=0,j=d.length;i<j;++i){d[i]()}},escape:function(l,n){if(!l){return l}else{if(typeof l==="string"){return gadgets.util.escapeString(l)}else{if(typeof l==="array"){for(var i=0,k=l.length;i<k;++i){l[i]=gadgets.util.escape(l[i])}}else{if(typeof l==="object"&&n){var j={};for(var m in l){if(l.hasOwnProperty(m)){j[gadgets.util.escapeString(m)]=gadgets.util.escape(l[m],true)}}return j}}}}return l},escapeString:function(n){if(!n){return n}var k=[],i,m;for(var j=0,l=n.length;j<l;++j){i=n.charCodeAt(j);m=a[i];if(m===true){k.push("&#",i,";")}else{if(m!==false){k.push(n.charAt(j))}}}return k.join("")},unescapeString:function(i){if(!i){return i}return i.replace(/&#([0-9]+);/g,h)},attachBrowserEvent:function(j,k,i,l){if(typeof j.addEventListener!="undefined"){j.addEventListener(k,i,l)}else{if(typeof j.attachEvent!="undefined"){j.attachEvent("on"+k,i)}else{gadgets.warn("cannot attachBrowserEvent: "+k)}}},removeBrowserEvent:function(j,k,i,l){if(j.removeEventListener){j.removeEventListener(k,i,l)}else{if(j.detachEvent){j.detachEvent("on"+k,i)}else{gadgets.warn("cannot removeBrowserEvent: "+k)}}}}}();gadgets.util.getUrlParameters();var tamings___=tamings___||[];tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.util,"escapeString"],[gadgets.util,"getFeatureParameters"],[gadgets.util,"getUrlParameters"],[gadgets.util,"hasFeature"],[gadgets.util,"registerOnLoadHandler"],[gadgets.util,"unescapeString"]])});if(window.JSON&&window.JSON.parse&&window.JSON.stringify){gadgets.json=(function(){var a=/___$/;return{parse:function(b){try{return window.JSON.parse(b)}catch(c){return false}},stringify:function(b){try{return window.JSON.stringify(b,function(d,e){return !a.test(d)?e:null})}catch(c){return null}}}})()}else{gadgets.json=function(){function f(n){return n<10?"0"+n:n}Date.prototype.toJSON=function(){return[this.getUTCFullYear(),"-",f(this.getUTCMonth()+1),"-",f(this.getUTCDate()),"T",f(this.getUTCHours()),":",f(this.getUTCMinutes()),":",f(this.getUTCSeconds()),"Z"].join("")};var m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function stringify(value){var a,i,k,l,r=/["\\\x00-\x1f\x7f-\x9f]/g,v;switch(typeof value){case"string":return r.test(value)?'"'+value.replace(r,function(a){var c=m[a];if(c){return c}c=a.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"':'"'+value+'"';case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}a=[];if(typeof value.length==="number"&&!value.propertyIsEnumerable("length")){l=value.length;for(i=0;i<l;i+=1){a.push(stringify(value[i])||"null")}return"["+a.join(",")+"]"}for(k in value){if(k.match("___$")){continue}if(value.hasOwnProperty(k)){if(typeof k==="string"){v=stringify(value[k]);if(v){a.push(stringify(k)+":"+v)}}}}return"{"+a.join(",")+"}"}return""}return{stringify:stringify,parse:function(text){if(/^[\],:{}\s]*$/.test(text.replace(/\\["\\\/b-u]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){return eval("("+text+")")}return false}}}()}gadgets.json.flatten=function(c){var b={};if(c===null||c===undefined){return b}for(var a in c){if(c.hasOwnProperty(a)){var d=c[a];if(null===d||undefined===d){continue}b[a]=(typeof d==="string")?d:gadgets.json.stringify(d)}}return b};var tamings___=tamings___||[];tamings___.push(function(a){___.tamesTo(gadgets.json.stringify,safeJSON.stringify);___.tamesTo(gadgets.json.parse,safeJSON.parse)});shindig.Auth=function(){var authToken=null;var trusted=null;function addParamsToToken(urlParams){var args=authToken.split("&");for(var i=0;i<args.length;i++){var nameAndValue=args[i].split("=");if(nameAndValue.length===2){var name=nameAndValue[0];var value=nameAndValue[1];if(value==="$"){value=encodeURIComponent(urlParams[name]);args[i]=name+"="+value}}}authToken=args.join("&")}function init(configuration){var urlParams=gadgets.util.getUrlParameters();var config=configuration["shindig.auth"]||{};if(config.authToken){authToken=config.authToken}else{if(urlParams.st){authToken=urlParams.st}}if(authToken!==null){addParamsToToken(urlParams)}if(config.trustedJson){trusted=eval("("+config.trustedJson+")")}}gadgets.config.register("shindig.auth",null,init);return{getSecurityToken:function(){return authToken},updateSecurityToken:function(newToken){authToken=newToken},getTrustedData:function(){return trusted}}};shindig.auth=new shindig.Auth();gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.wpm){gadgets.rpctx.wpm=function(){var c,d;function e(g,f,h){if(typeof window.addEventListener!="undefined"){window.addEventListener(g,f,h)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("on"+g,f)}}}function a(g,f,h){if(window.removeEventListener){window.removeEventListener(g,f,h)}else{if(window.detachEvent){window.detachEvent("on"+g,f)}}}function b(g){var f=gadgets.json.parse(g.data);if(!f||!f.f){return}var h=gadgets.rpc.getTargetOrigin(f.f);if(typeof g.origin!=="undefined"?g.origin!==h:g.domain!==/^.+:\/\/([^:]+).*/.exec(h)[1]){return}c(f,g.origin)}return{getCode:function(){return"wpm"},isParentVerifiable:function(){return true},init:function(g,f){c=g;d=f;e("message",b,false);d("..",true);return true},setup:function(f,g){d(f,true);return true},call:function(i,f,g){var j=gadgets.rpc.getTargetOrigin(i);var h=gadgets.rpc._getTargetWin(i);if(j){window.setTimeout(function(){h.postMessage(gadgets.json.stringify(g),j)},0)}else{gadgets.error("No relay set (used as window.postMessage targetOrigin), cannot send cross-domain message")}return true}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.flash){gadgets.rpctx.flash=function(){var k="___xpcswf";var t=null;var aa=false;var z=null;var an=null;var p=null;var am=100;var s=50;var au=[];var al=null;var aj=0;var o="_scr";var ae="_pnt";var ab=100;var u=50;var x=0;var af=null;var l={};var ar=window.location.protocol+"//"+window.location.host;var w="___jsl";var ag="_fm";var ac;function q(){window[w]=window[w]||{};var b=window[w];var a=b[ag]={};ac=w+"."+ag;return a}var y=q();function ak(a,c){var b=function(){a.apply({},arguments)};y[c]=y[c]||b;return ac+"."+c}function v(a){return a===".."?gadgets.rpc.RPC_ID:a}function aq(a){return a===".."?"INNER":"OUTER"}function ao(a){if(aa){t=a.rpc.commSwf||"/xpc.swf"}}gadgets.config.register("rpc",null,ao);function n(){if(p===null&&document.body&&t){var a=t+"?cb="+Math.random()+"&origin="+ar+"&jsl=1";var b=document.createElement("div");b.style.height="1px";b.style.width="1px";var c='<object height="1" width="1" id="'+k+'" type="application/x-shockwave-flash"><param name="allowScriptAccess" value="always"></param><param name="movie" value="'+a+'"></param><embed type="application/x-shockwave-flash" allowScriptAccess="always" src="'+a+'" height="1" width="1"></embed></object>';document.body.appendChild(b);b.innerHTML=c;p=b.firstChild}++aj;if(al!==null&&(p!==null||aj>=s)){window.clearTimeout(al)}else{al=window.setTimeout(n,am)}}function at(){if(l[".."]){return}m("..");x++;if(x>=u&&af!==null){window.clearTimeout(af);af=null}else{af=window.setTimeout(at,ab)}}function ap(){if(p!==null){while(au.length>0){var a=au.shift();var b=a.targetId;p.setup(a.token,v(b),aq(b))}}}function ad(){ap();if(al!==null){window.clearTimeout(al)}al=null}ak(ad,"ready");function ai(){if(!l[".."]&&af===null){af=window.setTimeout(at,ab)}}ak(ai,"setupDone");function ah(a,d,f){var b=gadgets.rpc.getTargetOrigin(a);var e=gadgets.rpc.getAuthToken(a);var c="sendMessage_"+v(a)+"_"+e+"_"+aq(a);var g=p[c];g.call(p,gadgets.json.stringify(f),b);return true}function r(a,d,e){var c=gadgets.json.parse(a);var b=c[o];if(b){an(b,true);l[b]=true;if(b!==".."){m(b,true)}return}window.setTimeout(function(){z(c,d)},0)}ak(r,"receiveMessage");function m(d,a){var c=gadgets.rpc.RPC_ID;var b={};b[o]=a?"..":c;b[ae]=c;ah(d,c,b)}return{getCode:function(){return"flash"},isParentVerifiable:function(){return true},init:function(a,b){z=a;an=b;aa=true;return true},setup:function(a,b){au.push({token:b,targetId:a});if(p===null&&al===null){al=window.setTimeout(n,am)}ap();return true},call:ah,_receiveMessage:r,_ready:ad,_setupDone:ai}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.frameElement){gadgets.rpctx.frameElement=function(){var b="__g2c_rpc";var e="__c2g_rpc";var c;var d;function a(j,f,g){try{if(f!==".."){var k=window.frameElement;if(typeof k[b]==="function"){if(typeof k[b][e]!=="function"){k[b][e]=function(l){c(gadgets.json.parse(l))}}k[b](gadgets.json.stringify(g));return true}}else{var h=document.getElementById(j);if(typeof h[b]==="function"&&typeof h[b][e]==="function"){h[b][e](gadgets.json.stringify(g));return true}}}catch(i){}return false}return{getCode:function(){return"fe"},isParentVerifiable:function(){return false},init:function(g,f){c=g;d=f;return true},setup:function(f,j){if(f!==".."){try{var g=document.getElementById(f);g[b]=function(k){c(gadgets.json.parse(k))}}catch(h){return false}}if(f===".."){d("..",true);var i=function(){window.setTimeout(function(){gadgets.rpc.call(f,gadgets.rpc.ACK)},500)};gadgets.util.registerOnLoadHandler(i)}return true},call:function(h,f,g){return a(h,f,g)}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.nix){gadgets.rpctx.nix=function(){var b="GRPC____NIXVBS_wrapper";var a="GRPC____NIXVBS_get_wrapper";var i="GRPC____NIXVBS_handle_message";var c="GRPC____NIXVBS_create_channel";var d=10;var e=500;var f={};var g;var h=0;function j(){var k=f[".."];if(k){return}if(++h>d){gadgets.warn("Nix transport setup failed, falling back...");g("..",false);return}if(!k&&window.opener&&"GetAuthToken" in window.opener){k=window.opener;if(k.GetAuthToken()==gadgets.rpc.getAuthToken("..")){var l=gadgets.rpc.getAuthToken("..");k.CreateChannel(window[a]("..",l),l);f[".."]=k;window.opener=null;g("..",true);return}}window.setTimeout(function(){j()},e)}return{getCode:function(){return"nix"},isParentVerifiable:function(){return false},init:function(k,n){g=n;if(typeof window[a]!=="unknown"){window[i]=function(o){window.setTimeout(function(){k(gadgets.json.parse(o))},0)};window[c]=function(q,o,p){if(gadgets.rpc.getAuthToken(q)===p){f[q]=o;g(q,true)}};var l="Class "+b+"\n Private m_Intended\nPrivate m_Auth\nPublic Sub SetIntendedName(name)\n If isEmpty(m_Intended) Then\nm_Intended = name\nEnd If\nEnd Sub\nPublic Sub SetAuth(auth)\n If isEmpty(m_Auth) Then\nm_Auth = auth\nEnd If\nEnd Sub\nPublic Sub SendMessage(data)\n "+i+"(data)\nEnd Sub\nPublic Function GetAuthToken()\n GetAuthToken = m_Auth\nEnd Function\nPublic Sub CreateChannel(channel, auth)\n Call "+c+"(m_Intended, channel, auth)\nEnd Sub\nEnd Class\nFunction "+a+"(name, auth)\nDim wrap\nSet wrap = New "+b+"\nwrap.SetIntendedName name\nwrap.SetAuth auth\nSet "+a+" = wrap\nEnd Function";try{window.execScript(l,"vbscript")}catch(m){return false}}return true},setup:function(m,l){if(m===".."){j();return true}try{var o=document.getElementById(m);var n=window[a](m,l);o.contentWindow.opener=n}catch(k){return false}return true},call:function(l,m,n){try{if(f[l]){f[l].SendMessage(gadgets.json.stringify(n))}}catch(k){return false}return true}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.rmr){gadgets.rpctx.rmr=function(){var j=500;var l=10;var i={};var d=gadgets.util.getUrlParameters()["parent"];var b;var h;function f(o,q,p,r){var n=function(){document.body.appendChild(o);o.src="about:blank";if(r){o.onload=function(){e(r)}}o.src=q+"#"+p};if(document.body){n()}else{gadgets.util.registerOnLoadHandler(function(){n()})}}function a(o){if(typeof i[o]==="object"){return}var n=document.createElement("iframe");var q=n.style;q.position="absolute";q.top="0px";q.border="0";q.opacity="0";q.width="10px";q.height="1px";n.id="rmrtransport-"+o;n.name=n.id;var p=gadgets.rpc.getRelayUrl(o);var r=gadgets.rpc.getOrigin(d);if(!p){p=r+"/robots.txt"}i[o]={frame:n,receiveWindow:null,relayUri:p,relayOrigin:r,searchCounter:0,width:10,waiting:true,queue:[],sendId:0,recvId:0,verifySendToken:String(Math.random()),verifyRecvToken:null,originVerified:false};if(o!==".."){f(n,p,c(o))}m(o)}function m(p){var n=null;i[p].searchCounter++;try{var q=gadgets.rpc._getTargetWin(p);if(p===".."){n=q.frames["rmrtransport-"+gadgets.rpc.RPC_ID]}else{n=q.frames["rmrtransport-.."]}}catch(o){}var r=false;if(n){r=k(p,n)}if(!r){if(i[p].searchCounter>l){return}window.setTimeout(function(){m(p)},j)}}function g(t,r,n,o){var s=null;if(n!==".."){s=i[".."]}else{s=i[t]}if(s){if(r!==gadgets.rpc.ACK){s.queue.push(o)}if(s.waiting||(s.queue.length===0&&!(r===gadgets.rpc.ACK&&o&&o.ackAlone===true))){return true}if(s.queue.length>0){s.waiting=true}var u=s.relayUri+"#"+c(t);try{s.frame.contentWindow.location=u;var q=s.width==10?20:10;s.frame.style.width=q+"px";s.width=q}catch(p){return false}}return true}function c(p){var o=i[p];var q={id:o.sendId};if(o){q.d=Array.prototype.slice.call(o.queue,0);var n={s:gadgets.rpc.ACK,id:o.recvId};if(!o.originVerified){n.sendToken=o.verifySendToken}if(o.verifyRecvToken){n.recvToken=o.verifyRecvToken}q.d.push(n)}return gadgets.json.stringify(q)}function e(o){var r=i[o];var v=r.receiveWindow.location.hash.substring(1);var n=gadgets.json.parse(decodeURIComponent(v))||{};var y=n.d||[];var x=false;var s=false;var q=0;var z=(r.recvId-n.id);for(var w=0;w<y.length;++w){var t=y[w];if(t.s===gadgets.rpc.ACK){h(o,true);r.verifyRecvToken=t.sendToken;if(!r.originVerified&&t.recvToken&&String(t.recvToken)==String(r.verifySendToken)){r.originVerified=true}if(r.waiting){s=true}r.waiting=false;var u=Math.max(0,t.id-r.sendId);r.queue.splice(0,u);r.sendId=Math.max(r.sendId,t.id||0);continue}x=true;if(++q<=z){continue}++r.recvId;b(t,r.originVerified?r.relayOrigin:undefined)}if(x||(s&&r.queue.length>0)){var p=(o==="..")?gadgets.rpc.RPC_ID:"..";g(o,gadgets.rpc.ACK,p,{ackAlone:x})}}function k(q,n){var r=i[q];try{var s=false;s="document" in n;if(!s){return false}s=typeof n.document=="object";if(!s){return false}var o=n.location.href;if(o==="about:blank"){return false}}catch(t){return false}r.receiveWindow=n;function p(){e(q)}if(typeof n.attachEvent==="undefined"){n.onresize=p}else{n.attachEvent("onresize",p)}if(q===".."){f(r.frame,r.relayUri,c(q),q)}else{e(q)}return true}return{getCode:function(){return"rmr"},isParentVerifiable:function(){return true},init:function(o,n){b=o;h=n;return true},setup:function(n,p){try{a(n)}catch(o){gadgets.warn("Caught exception setting up RMR: "+o);return false}return true},call:function(p,n,o){return g(p,o.s,n,o)}}}()}gadgets.rpctx=gadgets.rpctx||{};if(!gadgets.rpctx.ifpc){gadgets.rpctx.ifpc=function(){var b=[];var e=0;var f;var a=2000;var c={};function g(j){var l=[];for(var i=0,k=j.length;i<k;++i){l.push(encodeURIComponent(gadgets.json.stringify(j[i])))}return l.join("&")}function h(i){var k;for(var l=b.length-1;l>=0;--l){var m=b[l];try{if(m&&(m.recyclable||m.readyState==="complete")){m.parentNode.removeChild(m);if(window.ActiveXObject){b[l]=m=null;b.splice(l,1)}else{m.recyclable=false;k=m;break}}}catch(j){}}if(!k){k=document.createElement("iframe");k.style.border=k.style.width=k.style.height="0px";k.style.visibility="hidden";k.style.position="absolute";k.onload=function(){this.recyclable=true};b.push(k)}k.src=i;window.setTimeout(function(){document.body.appendChild(k)},0)}function d(k,i){for(var j=i-1;j>=0;--j){if(typeof k[j]==="undefined"){return false}}return true}return{getCode:function(){return"ifpc"},isParentVerifiable:function(){return true},init:function(j,i){f=i;f("..",true);return true},setup:function(i,j){f(i,true);return true},call:function(j,k,l){var q=gadgets.rpc.getRelayUrl(j);++e;if(!q){gadgets.warn("No relay file assigned for IFPC");return false}var t=null,s=[];if(l.l){var n=l.a;t=[q,"#",g([k,e,1,0,g([k,l.s,"","",k].concat(n))])].join("");s.push(t)}else{t=[q,"#",j,"&",k,"@",e,"&"].join("");var i=encodeURIComponent(gadgets.json.stringify(l)),o=a-t.length,m=Math.ceil(i.length/o),p=0,r;while(i.length>0){r=i.substring(0,o);i=i.substring(o);s.push([t,m,"&",p,"&",r].join(""));p+=1}}do{h(s.shift())}while(s.length>0);return true},_receiveMessage:function(l,n){var m=l[1],o=parseInt(l[2],10),j=parseInt(l[3],10),i=l[l.length-1],k=o===1;if(o>1){if(!c[m]){c[m]=[]}c[m][j]=i;if(d(c[m],o)){i=c[m].join("");delete c[m];k=true}}if(k){n(gadgets.json.parse(decodeURIComponent(i)))}}}}()}if(!window.gadgets.rpc){gadgets.rpc=function(){var aS="__cb";var aL="";var aK="__ack";var ay=500;var aY=10;var aC="|";var aj="callback";var ax="origin";var al="referer";var am={};var aH={};var a1={};var a3={};var ab=0;var ar={};var aq={};var aN={};var aA={};var ap={};var a0={};var az=null;var an=null;var aa=(window.top!==window.self);var ai=window.name;var aV=function(){};var aO=0;var aF=1;var aD=2;var ae=window.console;var aI=ae&&ae.log&&function(a){ae.log(a)}||function(){};var aM=(function(){function a(b){return function(){aI(b+": call ignored")}}return{getCode:function(){return"noop"},isParentVerifiable:function(){return true},init:a("init"),setup:a("setup"),call:a("call")}})();if(gadgets.util){aA=gadgets.util.getUrlParameters()}function aU(){if(aA.rpctx=="flash"){return gadgets.rpctx.flash}if(aA.rpctx=="rmr"){return gadgets.rpctx.rmr}return typeof window.postMessage==="function"?gadgets.rpctx.wpm:typeof window.postMessage==="object"?gadgets.rpctx.wpm:window.ActiveXObject?(gadgets.rpctx.flash?gadgets.rpctx.flash:gadgets.rpctx.nix):navigator.userAgent.indexOf("WebKit")>0?gadgets.rpctx.rmr:navigator.product==="Gecko"?gadgets.rpctx.frameElement:gadgets.rpctx.ifpc}function at(a,c){if(ap[a]){return}var e=aX;if(!c){e=aM}ap[a]=e;var f=a0[a]||[];for(var d=0;d<f.length;++d){var b=f[d];b.t=aZ(a);e.call(a,b.f,b)}a0[a]=[]}var aW=false,aJ=false;function aQ(){if(aJ){return}function a(){aW=true}if(typeof window.addEventListener!="undefined"){window.addEventListener("unload",a,false)}else{if(typeof window.attachEvent!="undefined"){window.attachEvent("onunload",a)}}aJ=true}function au(e,a,d,b,c){if(!a3[a]||a3[a]!==d){gadgets.error("Invalid auth token. "+a3[a]+" vs "+d);aV(a,aD)}c.onunload=function(){if(aq[a]&&!aW){aV(a,aF);gadgets.rpc.removeReceiver(a)}};aQ();b=gadgets.json.parse(decodeURIComponent(b))}function aE(a,d){if(a&&typeof a.s==="string"&&typeof a.f==="string"&&a.a instanceof Array){if(a3[a.f]){if(a3[a.f]!==a.t){gadgets.error("Invalid auth token. "+a3[a.f]+" vs "+a.t);aV(a.f,aD)}}if(a.s===aK){window.setTimeout(function(){at(a.f,true)},0);return}if(a.c){a[aj]=function(f){gadgets.rpc.call(a.f,aS,null,a.c,f)}}if(d){var c=ak(d);a[ax]=d;var b=a.r;if(!b||ak(b)!=c){b=d}a[al]=b}var e=(am[a.s]||am[aL]).apply(a,a.a);if(a.c&&typeof e!=="undefined"){gadgets.rpc.call(a.f,aS,null,a.c,e)}}}function ak(e){if(!e){return""}e=e.toLowerCase();if(e.indexOf("//")==0){e=window.location.protocol+e}if(e.indexOf("://")==-1){e=window.location.protocol+"//"+e}var d=e.substring(e.indexOf("://")+3);var g=d.indexOf("/");if(g!=-1){d=d.substring(0,g)}var b=e.substring(0,e.indexOf("://"));var c="";var a=d.indexOf(":");if(a!=-1){var f=d.substring(a+1);d=d.substring(0,a);if((b==="http"&&f!=="80")||(b==="https"&&f!=="443")){c=":"+f}}return b+"://"+d+c}function a2(a,b){return"/"+a+(b?aC+b:"")}function ac(a){if(a.charAt(0)=="/"){var c=a.indexOf(aC);var b=c>0?a.substring(1,c):a.substring(1);var d=c>0?a.substring(c+1):null;return{id:b,origin:d}}else{return null}}function ad(a){if(typeof a==="undefined"||a===".."){return window.parent}var b=ac(a);if(b){return window.top.frames[b.id]}a=String(a);var c=window.frames[a];if(c){return c}c=document.getElementById(a);if(c&&c.contentWindow){return c.contentWindow}return null}function aT(a){var b=null;var d=aP(a);if(d){b=d}else{var c=ac(a);if(c){b=c.origin}else{if(a==".."){b=aA.parent}else{b=document.getElementById(a).src}}}return ak(b)}var aX=aU();am[aL]=function(){aI("Unknown RPC service: "+this.s)};am[aS]=function(b,c){var a=ar[b];if(a){delete ar[b];a.call(this,c)}};function aG(a,c){if(aq[a]===true){return}if(typeof aq[a]==="undefined"){aq[a]=0}var b=ad(a);if(a===".."||b!=null){if(aX.setup(a,c)===true){aq[a]=true;return}}if(aq[a]!==true&&aq[a]++<aY){window.setTimeout(function(){aG(a,c)},ay)}else{ap[a]=aM;aq[a]=true}}function aR(e,b){if(typeof aN[e]==="undefined"){aN[e]=false;var c=aP(e);if(ak(c)!==ak(window.location.href)){return false}var d=ad(e);try{var a=d.gadgets;aN[e]=a.rpc.receiveSameDomain}catch(f){}}if(typeof aN[e]==="function"){aN[e](b);return true}return false}function aP(a){var b=aH[a];if(b&&b.substring(0,1)==="/"){if(b.substring(1,2)==="/"){b=document.location.protocol+b}else{b=document.location.protocol+"//"+document.location.host+b}}return b}function ag(b,c,a){if(!/http(s)?:\/\/.+/.test(c)){if(c.indexOf("//")==0){c=window.location.protocol+c}else{if(c.charAt(0)=="/"){c=window.location.protocol+"//"+window.location.host+c}else{if(c.indexOf("://")==-1){c=window.location.protocol+"//"+c}}}}aH[b]=c;a1[b]=!!a}function aZ(a){return a3[a]}function aB(b,a){a=a||"";a3[b]=String(a);aG(b,a)}function ah(b){var c=b.passReferrer||"";var a=c.split(":",2);az=a[0]||"none";an=a[1]||"origin"}function aw(b,c){function a(e){var f=e?e.rpc:{};var d=String(f.useLegacyProtocol)==="true";ah(f);var g=f.parentRelayUrl||"";g=ak(aA.parent||c)+g;ag("..",g,d);if(d){aX=gadgets.rpctx.ifpc;aX.init(aE,at)}aB("..",b)}if(!aA.parent&&c){a({});return}gadgets.config.register("rpc",null,a)}function ao(f,b,h){if(f.charAt(0)!="/"){if(!gadgets.util){return}var c=document.getElementById(f);if(!c){throw new Error("Cannot set up gadgets.rpc receiver with ID: "+f+", element not found.")}}var g=c&&c.src;var e=b||gadgets.rpc.getOrigin(g);ag(f,e);var a=gadgets.util.getUrlParameters(g);var d=h||a.rpctoken;aB(f,d)}function av(d,b,a){if(d===".."){var c=a||aA.rpctoken||aA.ifpctok||"";aw(c,b)}else{ao(d,b,a)}}function af(b){if(az==="bidir"||(az==="c2p"&&b==="..")||(az==="p2c"&&b!=="..")){var c=window.location.href;var a="?";if(an==="query"){a="#"}else{if(an==="hash"){return c}}var d=c.lastIndexOf(a);d=d===-1?c.length:d;return c.substring(0,d)}return null}return{config:function(a){if(typeof a.securityCallback==="function"){aV=a.securityCallback}},register:function(a,b){if(a===aS||a===aK){throw new Error("Cannot overwrite callback/ack service")}if(a===aL){throw new Error("Cannot overwrite default service: use registerDefault")}am[a]=b},unregister:function(a){if(a===aS||a===aK){throw new Error("Cannot delete callback/ack service")}if(a===aL){throw new Error("Cannot delete default service: use unregisterDefault")}delete am[a]},registerDefault:function(a){am[aL]=a},unregisterDefault:function(){delete am[aL]},forceParentVerifiable:function(){if(!aX.isParentVerifiable()){aX=gadgets.rpctx.ifpc}},call:function(g,e,h,b){g=g||"..";var a="..";if(g===".."){a=ai}else{if(g.charAt(0)=="/"){a=a2(ai,gadgets.rpc.getOrigin(window.location.href))}}++ab;if(h){ar[ab]=h}var c={s:e,f:a,c:h?ab:0,a:Array.prototype.slice.call(arguments,3),t:a3[g],l:a1[g]};var f=af(g);if(f){c.r=f}if(g!==".."&&ac(g)==null&&!document.getElementById(g)){return}if(aR(g,c)){return}var d=ap[g];if(!d&&ac(g)!==null){d=aX}if(!d){if(!a0[g]){a0[g]=[c]}else{a0[g].push(c)}return}if(a1[g]){d=gadgets.rpctx.ifpc}if(d.call(g,a,c)===false){ap[g]=aM;aX.call(g,a,c)}},getRelayUrl:aP,setRelayUrl:ag,setAuthToken:aB,setupReceiver:av,getAuthToken:aZ,removeReceiver:function(a){delete aH[a];delete a1[a];delete a3[a];delete aq[a];delete aN[a];delete ap[a]},getRelayChannel:function(){return aX.getCode()},receive:function(a,b){if(a.length>4){aX._receiveMessage(a,aE)}else{au.apply(null,a.concat(b))}},receiveSameDomain:function(a){a.a=Array.prototype.slice.call(a.a);window.setTimeout(function(){aE(a)},0)},getOrigin:ak,getTargetOrigin:aT,init:function(){if(aX.init(aE,at)===false){aX=aM}if(aa){av("..")}else{gadgets.config.register("rpc",null,function(a){ah(a.rpc||{})})}},_getTargetWin:ad,_parseSiblingId:ac,ACK:aK,RPC_ID:ai||"..",SEC_ERROR_LOAD_TIMEOUT:aO,SEC_ERROR_FRAME_PHISH:aF,SEC_ERROR_FORGED_MSG:aD}}();gadgets.rpc.init()}gadgets.io=function(){var config={};var oauthState;function makeXhr(){var x;if(typeof shindig!="undefined"&&shindig.xhrwrapper&&shindig.xhrwrapper.createXHR){return shindig.xhrwrapper.createXHR()}else{if(typeof ActiveXObject!="undefined"){x=new ActiveXObject("Msxml2.XMLHTTP");if(!x){x=new ActiveXObject("Microsoft.XMLHTTP")}return x}else{if(typeof XMLHttpRequest!="undefined"||window.XMLHttpRequest){return new window.XMLHttpRequest()}else{throw ("no xhr available")}}}}function hadError(xobj,callback){if(xobj.readyState!==4){return true}try{if(xobj.status!==200){var error=(""+xobj.status);if(xobj.responseText){error=error+" "+xobj.responseText}callback({errors:[error],rc:xobj.status,text:xobj.responseText});return true}}catch(e){callback({errors:[e.number+" Error not specified"],rc:e.number,text:e.description});return true}return false}function processNonProxiedResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return}var data={body:xobj.responseText};callback(transformResponseData(params,data))}var UNPARSEABLE_CRUFT="throw 1; < don't be evil' >";function processResponse(url,callback,params,xobj){if(hadError(xobj,callback)){return}var txt=xobj.responseText;var offset=txt.indexOf(UNPARSEABLE_CRUFT)+UNPARSEABLE_CRUFT.length;if(offset<UNPARSEABLE_CRUFT.length){return}txt=txt.substr(offset);var data=eval("("+txt+")");data=data[url];if(data.oauthState){oauthState=data.oauthState}if(data.st){shindig.auth.updateSecurityToken(data.st)}callback(transformResponseData(params,data))}function transformResponseData(params,data){var resp={text:data.body,rc:data.rc||200,headers:data.headers,oauthApprovalUrl:data.oauthApprovalUrl,oauthError:data.oauthError,oauthErrorText:data.oauthErrorText,errors:[]};if(resp.rc<200||resp.rc>=400){resp.errors=[resp.rc+" Error"]}else{if(resp.text){if(resp.rc>=300&&resp.rc<400){params.CONTENT_TYPE="TEXT"}switch(params.CONTENT_TYPE){case"JSON":case"FEED":resp.data=gadgets.json.parse(resp.text);if(!resp.data){resp.errors.push("500 Failed to parse JSON");resp.rc=500;resp.data=null}break;case"DOM":var dom;if(typeof ActiveXObject!="undefined"){dom=new ActiveXObject("Microsoft.XMLDOM");dom.async=false;dom.validateOnParse=false;dom.resolveExternals=false;if(!dom.loadXML(resp.text)){resp.errors.push("500 Failed to parse XML");resp.rc=500}else{resp.data=dom}}else{var parser=new DOMParser();dom=parser.parseFromString(resp.text,"text/xml");if("parsererror"===dom.documentElement.nodeName){resp.errors.push("500 Failed to parse XML");resp.rc=500}else{resp.data=dom}}break;default:resp.data=resp.text;break}}}return resp}function makeXhrRequest(realUrl,proxyUrl,callback,paramData,method,params,processResponseFunction,opt_contentType){var xhr=makeXhr();if(proxyUrl.indexOf("//")==0){proxyUrl=document.location.protocol+proxyUrl}xhr.open(method,proxyUrl,true);if(callback){xhr.onreadystatechange=gadgets.util.makeClosure(null,processResponseFunction,realUrl,callback,params,xhr)}if(paramData!==null){xhr.setRequestHeader("Content-Type",opt_contentType||"application/x-www-form-urlencoded");xhr.send(paramData)}else{xhr.send(null)}}function respondWithPreload(postData,params,callback){if(gadgets.io.preloaded_&&postData.httpMethod==="GET"){for(var i=0;i<gadgets.io.preloaded_.length;i++){var preload=gadgets.io.preloaded_[i];if(preload&&(preload.id===postData.url)){delete gadgets.io.preloaded_[i];if(preload.rc!==200){callback({rc:preload.rc,errors:[preload.rc+" Error"]})}else{if(preload.oauthState){oauthState=preload.oauthState}var resp={body:preload.body,rc:preload.rc,headers:preload.headers,oauthApprovalUrl:preload.oauthApprovalUrl,oauthError:preload.oauthError,oauthErrorText:preload.oauthErrorText,errors:[]};callback(transformResponseData(params,resp))}return true}}}return false}function init(configuration){config=configuration["core.io"]||{}}var requiredConfig={proxyUrl:new gadgets.config.RegExValidator(/.*%(raw)?url%.*/),jsonProxyUrl:gadgets.config.NonEmptyStringValidator};gadgets.config.register("core.io",requiredConfig,init);return{makeRequest:function(url,callback,opt_params){var params=opt_params||{};var httpMethod=params.METHOD||"GET";var refreshInterval=params.REFRESH_INTERVAL;var auth,st;if(params.AUTHORIZATION&&params.AUTHORIZATION!=="NONE"){auth=params.AUTHORIZATION.toLowerCase();st=shindig.auth.getSecurityToken()}else{if(httpMethod==="GET"&&refreshInterval===undefined){refreshInterval=3600}}var signOwner=true;if(typeof params.OWNER_SIGNED!=="undefined"){signOwner=params.OWNER_SIGNED}var signViewer=true;if(typeof params.VIEWER_SIGNED!=="undefined"){signViewer=params.VIEWER_SIGNED}var headers=params.HEADERS||{};if(httpMethod==="POST"&&!headers["Content-Type"]){headers["Content-Type"]="application/x-www-form-urlencoded"}var urlParams=gadgets.util.getUrlParameters();var paramData={url:url,httpMethod:httpMethod,headers:gadgets.io.encodeValues(headers,false),postData:params.POST_DATA||"",authz:auth||"",st:st||"",contentType:params.CONTENT_TYPE||"TEXT",numEntries:params.NUM_ENTRIES||"3",getSummaries:!!params.GET_SUMMARIES,signOwner:signOwner,signViewer:signViewer,gadget:urlParams.url,container:urlParams.container||urlParams.synd||"default",bypassSpecCache:gadgets.util.getUrlParameters().nocache||"",getFullHeaders:!!params.GET_FULL_HEADERS};if(auth==="oauth"||auth==="signed"){if(gadgets.io.oauthReceivedCallbackUrl_){paramData.OAUTH_RECEIVED_CALLBACK=gadgets.io.oauthReceivedCallbackUrl_;gadgets.io.oauthReceivedCallbackUrl_=null}paramData.oauthState=oauthState||"";for(var opt in params){if(params.hasOwnProperty(opt)){if(opt.indexOf("OAUTH_")===0){paramData[opt]=params[opt]}}}}var proxyUrl=config.jsonProxyUrl.replace("%host%",document.location.host);if(!respondWithPreload(paramData,params,callback,processResponse)){if(httpMethod==="GET"&&refreshInterval>0){var extraparams="?refresh="+refreshInterval+"&"+gadgets.io.encodeValues(paramData);makeXhrRequest(url,proxyUrl+extraparams,callback,null,"GET",params,processResponse)}else{makeXhrRequest(url,proxyUrl,callback,gadgets.io.encodeValues(paramData),"POST",params,processResponse)}}},makeNonProxiedRequest:function(relativeUrl,callback,opt_params,opt_contentType){var params=opt_params||{};makeXhrRequest(relativeUrl,relativeUrl,callback,params.POST_DATA,params.METHOD,params,processNonProxiedResponse,opt_contentType)},clearOAuthState:function(){oauthState=undefined},encodeValues:function(fields,opt_noEscaping){var escape=!opt_noEscaping;var buf=[];var first=false;for(var i in fields){if(fields.hasOwnProperty(i)&&!/___$/.test(i)){if(!first){first=true}else{buf.push("&")}buf.push(escape?encodeURIComponent(i):i);buf.push("=");buf.push(escape?encodeURIComponent(fields[i]):fields[i])}}return buf.join("")},getProxyUrl:function(url,opt_params){return url}}}();gadgets.io.RequestParameters=gadgets.util.makeEnum(["METHOD","CONTENT_TYPE","POST_DATA","HEADERS","AUTHORIZATION","NUM_ENTRIES","GET_SUMMARIES","GET_FULL_HEADERS","REFRESH_INTERVAL","OAUTH_SERVICE_NAME","OAUTH_USE_TOKEN","OAUTH_TOKEN_NAME","OAUTH_REQUEST_TOKEN","OAUTH_REQUEST_TOKEN_SECRET","OAUTH_RECEIVED_CALLBACK"]);gadgets.io.MethodType=gadgets.util.makeEnum(["GET","POST","PUT","DELETE","HEAD"]);gadgets.io.ContentType=gadgets.util.makeEnum(["TEXT","DOM","JSON","FEED"]);gadgets.io.AuthorizationType=gadgets.util.makeEnum(["NONE","SIGNED","OAUTH"]);var tamings___=tamings___||[];tamings___.push(function(a){caja___.whitelistFuncs([[gadgets.io,"encodeValues"],[gadgets.io,"getProxyUrl"],[gadgets.io,"makeRequest"]])});gadgets.log=(function(){var e=1;var a=2;var d=3;var g=4;var f=function(i){h(e,i)};gadgets.warn=function(i){h(a,i)};gadgets.error=function(i){h(d,i)};gadgets.setLogLevel=function(i){b=i};function h(i,j){if(i<b||!c){return}if(i===a&&c.warn){c.warn(j)}else{if(i===d&&c.error){c.error(j)}else{if(c.log){c.log(j)}}}}f.INFO=e;f.WARNING=a;f.NONE=g;var b=e;var c=window.console?window.console:window.opera?window.opera.postError:undefined;return f})();var tamings___=tamings___||[];tamings___.push(function(a){___.grantRead(gadgets.log,"INFO");___.grantRead(gadgets.log,"WARNING");___.grantRead(gadgets.log,"ERROR");___.grantRead(gadgets.log,"NONE");caja___.whitelistFuncs([[gadgets,"log"],[gadgets,"warn"],[gadgets,"error"],[gadgets,"setLogLevel"]])});shindig.uri=(function(){var a=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?");return function(c){var j="";var n="";var y="";var t="";var x=null;var s="";var r=null;var p=window.decodeURIComponent?decodeURIComponent:unescape;var d=window.encodeURIComponent?encodeURIComponent:escape;var q=null;function g(A){if(A.match(a)===null){throw"Malformed URL: "+A}j=RegExp.$1;n=RegExp.$2;y=RegExp.$3;t=RegExp.$4;s=RegExp.$5}function h(C){var D=[];for(var F=0,B=C.length;F<B;++F){var A=C[F][0];var E=C[F][1];if(E===undefined){continue}D.push(d(A)+(E!==null?"="+d(E):""))}return D.join("&")}function k(){if(x){t=h(x);x=null}return t}function b(){if(r){s=h(r);r=null}return s}function m(A){x=x||v(t);return i(x,A)}function e(A){r=r||v(s);return i(r,A)}function z(A,B){x=o(x||v(t),A,B);return q}function u(A,B){r=o(r||v(s),A,B);return q}function f(){return[j,j!==""?":":"",n!==""?"//":"",n].join("")}function l(){var A=k();var B=b();return[f(),y,A!==""?"?":"",A,B!==""?"#":"",B].join("")}function v(C){var D=[];var E=C.split("&");for(var H=0,B=E.length;H<B;++H){var F=E[H].split("=");var A=F.shift();var G=null;if(F.length>0){G=F.join("").replace(/\+/g," ")}D.push([A,G!=null?p(G):null])}return D}function i(B,C){for(var D=0,A=B.length;D<A;++D){if(B[D][0]==C){return B[D][1]}}return undefined}function o(F,E,G){var C=E;if(typeof E==="string"){C={};C[E]=G}for(var H in C){var D=false;for(var A=0,B=F.length;!D&&A<B;++A){if(F[A][0]==H){F[A][1]=C[H];D=true}}if(!D){F.push([H,C[H]])}}return F}function w(A,B){A=A||"";if(A[0]===B){A=A.substr(B.length)}return A}if(typeof c==="object"&&typeof c.toString==="function"){g(c.toString())}else{if(c){g(c)}}q={getSchema:function(){return j},getAuthority:function(){return n},getOrigin:f,getPath:function(){return y},getQuery:k,getFragment:b,getQP:m,getFP:e,setSchema:function(A){j=A;return q},setAuthority:function(A){n=A;return q},setPath:function(A){y=(A[0]==="/"?"":"/")+A;return q},setQuery:function(A){x=null;t=w(A,"?");return q},setFragment:function(A){r=null;s=w(A,"#");return q},setQP:z,setFP:u,setExistingP:function(B,A){if(m(B,A)!==undefined){z(B,A)}if(e(B,A)!==undefined){u(B,A)}return q},toString:l};return q}})();(function(){osapi._registerMethod=function(b,c){var a=typeof ___!=="undefined";if(b=="newBatch"){return}var e=b.split(".");var f=osapi;for(var g=0;g<e.length-1;g++){f[e[g]]=f[e[g]]||{};f=f[e[g]]}var d=function(h){var i=osapi.newBatch();var j={};j.execute=function(m){var l=a?___.untame(m):m;var k=a?___.USELESS:this;i.add(b,this);i.execute(function(n){if(n.error){l.call(k,n.error)}else{l.call(k,n[b])}})};if(a){___.markInnocent(j.execute,"execute")}h=h||{};h.userId=h.userId||"@viewer";h.groupId=h.groupId||"@self";j.method=b;j.transport=c;j.rpc=h;return j};if(a&&typeof ___.markInnocent!=="undefined"){___.markInnocent(d,b)}if(f[e[e.length-1]]){}else{f[e[e.length-1]]=d}}})();(function(){var a=function(){var e={};var f=[];var b=function(h,g){if(g&&h){f.push({key:h,request:g})}return e};var c=function(g){var h={method:g.request.method,id:g.key};if(g.request.rpc){h.params=g.request.rpc}return h};var d=function(o){var n={};var g={};var l=0;var k=[];for(var i=0;i<f.length;i++){var m=f[i].request.transport;if(!g[m.name]){k.push(m);l++}g[m.name]=g[m.name]||[];g[m.name].push(c(f[i]))}var h=function(p){if(p.error){n.error=p.error}for(var q=0;q<f.length;q++){var r=f[q].key;var s=p[r];if(s){if(s.error){n[r]=s}else{n[r]=s.data||s.result}}}l--;if(l===0){o(n)}};for(var j=0;j<k.length;j++){k[j].execute(g[k[j].name],h)}if(l==0){window.setTimeout(function(){o(n)},0)}};e.execute=d;e.add=b;return e};osapi.newBatch=a})();(function(){function a(c,d){function e(k){if(k.errors[0]){d({error:{code:k.rc,message:k.text}})}else{var j=k.result||k.data;if(j.error){d(j)}else{var l={};for(var i=0;i<j.length;i++){l[j[i].id]=j[i]}d(l)}}}var f={POST_DATA:gadgets.json.stringify(c),CONTENT_TYPE:"JSON",METHOD:"POST",AUTHORIZATION:"SIGNED"};var h=this.name;var g=shindig.auth.getSecurityToken();if(g){h+="?st=";h+=encodeURIComponent(g)}gadgets.io.makeNonProxiedRequest(h,e,f,"application/json")}function b(f){var d=f["osapi.services"];if(d){for(var g in d){if(d.hasOwnProperty(g)){if(g.indexOf("http")==0||g.indexOf("//")==0){var i=g.replace("%host%",document.location.host);var c={name:i,execute:a};var h=d[g];for(var e=0;e<h.length;e++){osapi._registerMethod(h[e],c)}}}}}}if(gadgets.config){gadgets.config.register("osapi.services",null,b)}})();if(gadgets&&gadgets.rpc){(function(){function a(c,d){var e=function(g){if(!g){d({code:500,message:"Container refused the request"})}else{if(g.error){d(g)}else{var h={};for(var f=0;f<g.length;f++){h[g[f].id]=g[f]}d(h)}}};gadgets.rpc.call("..","osapi._handleGadgetRpcMethod",e,c)}function b(d){var j={name:"gadgets.rpc",execute:a};var e=d["osapi.services"];if(e){for(var c in e){if(e.hasOwnProperty(c)){if(c==="gadgets.rpc"){var k=e[c];for(var h=0;h<k.length;h++){osapi._registerMethod(k[h],j)}}}}}if(osapi.container&&osapi.container.listMethods){var i=gadgets.util.runOnLoadHandlers;var g=2;var f=function(){g--;if(g==0){i()}};gadgets.util.runOnLoadHandlers=f;osapi.container.listMethods({}).execute(function(l){if(!l.error){for(var m=0;m<l.length;m++){if(l[m]!="container.listMethods"){osapi._registerMethod(l[m],j)}}}f()});window.setTimeout(f,500)}}if(gadgets.config&&gadgets.config.isGadget){gadgets.config.register("osapi.services",null,b)}})()}gadgets.util.registerOnLoadHandler(function(){if(osapi&&osapi.people&&osapi.people.get){osapi.people.getViewer=function(a){a=a||{};a.userId="@viewer";a.groupId="@self";return osapi.people.get(a)};osapi.people.getViewerFriends=function(a){a=a||{};a.userId="@viewer";a.groupId="@friends";return osapi.people.get(a)};osapi.people.getOwner=function(a){a=a||{};a.userId="@owner";a.groupId="@self";return osapi.people.get(a)};osapi.people.getOwnerFriends=function(a){a=a||{};a.userId="@owner";a.groupId="@friends";return osapi.people.get(a)}}});var tamings___=tamings___||[];tamings___.push(function(a){___.tamesTo(osapi.newBatch,___.markFuncFreeze(function(){var c=osapi.newBatch();___.markInnocent(c.add,"add");___.markInnocent(c.execute,"execute");return ___.tame(c)}));a.outers.osapi=___.tame(osapi);___.grantRead(a.outers,"osapi");var b=a;gadgets.util.registerOnLoadHandler(function(){if(osapi&&osapi.people&&osapi.people.get){caja___.whitelistFuncs([[osapi.people,"getViewer"],[osapi.people,"getViewerFriends"],[osapi.people,"getOwner"],[osapi.people,"getOwnerFriends"]]);b.outers.osapi.people.getViewer=___.tame(osapi.people.getViewer);b.outers.osapi.people.getViewerFriends=___.tame(osapi.people.getViewerFriends);b.outers.osapi.people.getOwner=___.tame(osapi.people.getOwner);b.outers.osapi.people.getOwnerFriends=___.tame(osapi.people.getOwnerFriends)}})});shindig._uri=shindig.uri;shindig.uri=(function(){var b=shindig._uri;shindig._uri=null;function a(d,e){return d.getOrigin()==e.getOrigin()}function c(g,e){if(g.getSchema()==""){g.setSchema(e.getSchema())}if(g.getAuthority()==""){g.setAuthority(e.getAuthority())}var f=g.getPath();if(f==""||f.charAt(0)!="/"){var d=e.getPath();var h=d.lastIndexOf("/");if(h!=-1){d=d.substring(0,h+1)}g.setPath(e.getPath()+f)}}return function(e){var d=b(e);d.hasSameOrigin=function(f){return a(d,f)};d.resolve=function(f){return c(d,f)};return d}})();Function.prototype.inherits=function(a){function b(){}b.prototype=a.prototype;this.superClass_=a.prototype;this.prototype=new b();this.prototype.constructor=this};shindig.cookies={};shindig.cookies.JsType_={UNDEFINED:"undefined"};shindig.cookies.isDef=function(a){return typeof a!=shindig.cookies.JsType_.UNDEFINED};shindig.cookies.set=function(b,f,g,c,a){if(/;=/g.test(b)){throw new Error('Invalid cookie name "'+b+'"')}if(/;/g.test(f)){throw new Error('Invalid cookie value "'+f+'"')}if(!shindig.cookies.isDef(g)){g=-1}var i=a?";domain="+a:"";var e=c?";path="+c:"";var j;if(g<0){j=""}else{if(g===0){var h=new Date(1970,1,1);j=";expires="+h.toUTCString()}else{var d=new Date((new Date).getTime()+g*1000);j=";expires="+d.toUTCString()}}document.cookie=b+"="+f+i+e+j};shindig.cookies.get=function(h,c){var d=h+"=";var f=String(document.cookie);for(var b=-1;(b=f.indexOf(d,b+1))>=0;){var g=b;while(--g>=0){var e=f.charAt(g);if(e==";"){g=-1;break}}if(g==-1){var a=f.indexOf(";",b);if(a<0){a=f.length}return f.substring(b+d.length,a)}}return c};shindig.cookies.remove=function(d,a,c){var b=shindig.cookies.containsKey(d);shindig.cookies.set(d,"",0,a,c);return b};shindig.cookies.getKeyValues_=function(){var d=String(document.cookie);var b=d.split(/\s*;\s*/);var c=[],a=[],f,g;for(var e=0;g=b[e];e++){f=g.indexOf("=");if(f==-1){c.push("");a.push(g)}else{c.push(g.substring(0,f));a.push(g.substring(f+1))}}return{keys:c,values:a}};shindig.cookies.getKeys=function(){return shindig.cookies.getKeyValues_().keys};shindig.cookies.getValues=function(){return shindig.cookies.getKeyValues_().values};shindig.cookies.isEmpty=function(){return document.cookie===""};shindig.cookies.getCount=function(){var a=String(document.cookie);if(a===""){return 0}var b=a.split(/\s*;\s*/);return b.length};shindig.cookies.containsKey=function(b){var a={};return shindig.cookies.get(b,a)!==a};shindig.cookies.containsValue=function(b){var a=shindig.cookies.getKeyValues_().values;for(var c=0;c<a.length;c++){if(a[c]==b){return true}}return false};shindig.cookies.clear=function(){var b=shindig.cookies.getKeyValues_().keys;for(var a=b.length-1;a>=0;a--){shindig.cookies.remove(b[a])}};shindig.cookies.MAX_COOKIE_LENGTH=3950;shindig.errors={};shindig.errors.SUBCLASS_RESPONSIBILITY="subclass responsibility";shindig.errors.TO_BE_DONE="to be done";shindig.callAsyncAndJoin=function(d,a,e){var c=d.length;var f=[];for(var g=0;g<d.length;g++){var b=function(i){var h=d[i];if(typeof h==="string"){h=e[h]}h.call(e,function(j){f[i]=j;if(--c===0){a(f)}})};b(g)}};shindig.Extensible=function(){};shindig.Extensible.prototype.setDependencies=function(a){for(var b in a){this[b]=a[b]}};shindig.Extensible.prototype.getDependencies=function(a){return this[a]};shindig.UserPrefStore=function(){};shindig.UserPrefStore.prototype.getPrefs=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.UserPrefStore.prototype.savePrefs=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.DefaultUserPrefStore=function(){shindig.UserPrefStore.call(this)};shindig.DefaultUserPrefStore.inherits(shindig.UserPrefStore);shindig.DefaultUserPrefStore.prototype.getPrefs=function(a){};shindig.DefaultUserPrefStore.prototype.savePrefs=function(a){};shindig.GadgetService=function(){};shindig.GadgetService.prototype.setHeight=function(b,a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.GadgetService.prototype.setTitle=function(a,b){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.GadgetService.prototype.setUserPref=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.IfrGadgetService=function(){shindig.GadgetService.call(this);gadgets.rpc.register("resize_iframe",this.setHeight);gadgets.rpc.register("set_pref",this.setUserPref);gadgets.rpc.register("set_title",this.setTitle);gadgets.rpc.register("requestNavigateTo",this.requestNavigateTo);gadgets.rpc.register("requestSendMessage",this.requestSendMessage)};shindig.IfrGadgetService.inherits(shindig.GadgetService);shindig.IfrGadgetService.prototype.setHeight=function(a){if(a>shindig.container.maxheight_){a=shindig.container.maxheight_}var b=document.getElementById(this.f);if(b){b.style.height=a+"px"}};shindig.IfrGadgetService.prototype.setTitle=function(b){var a=document.getElementById(this.f+"_title");if(a){a.innerHTML=b.replace(/&/g,"&amp;").replace(/</g,"&lt;")}};shindig.IfrGadgetService.prototype.setUserPref=function(b,g,e){var c=shindig.container.gadgetService.getGadgetIdFromModuleId(this.f);var d=shindig.container.getGadget(c);for(var f=1,a=arguments.length;f<a;f+=2){this.userPrefs[arguments[f]].value=arguments[f+1]}d.saveUserPrefs()};shindig.IfrGadgetService.prototype.requestSendMessage=function(a,b,d,c){if(d){window.setTimeout(function(){d(new opensocial.ResponseItem(null,null,opensocial.ResponseItem.Error.NOT_IMPLEMENTED,null))},0)}};shindig.IfrGadgetService.prototype.requestNavigateTo=function(a,c){var b=shindig.container.gadgetService.getGadgetIdFromModuleId(this.f);var e=shindig.container.gadgetService.getUrlForView(a);if(c){var d=gadgets.json.stringify(c);if(d.length>0){e+="&appParams="+encodeURIComponent(d)}}if(e&&document.location.href.indexOf(e)==-1){document.location.href=e}};shindig.IfrGadgetService.prototype.getUrlForView=function(a){if(a==="canvas"){return"/canvas"}else{if(a==="profile"){return"/profile"}else{return null}}};shindig.IfrGadgetService.prototype.getGadgetIdFromModuleId=function(a){return parseInt(a.match(/_([0-9]+)$/)[1],10)};shindig.LayoutManager=function(){};shindig.LayoutManager.prototype.getGadgetChrome=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.StaticLayoutManager=function(){shindig.LayoutManager.call(this)};shindig.StaticLayoutManager.inherits(shindig.LayoutManager);shindig.StaticLayoutManager.prototype.setGadgetChromeIds=function(a){this.gadgetChromeIds_=a};shindig.StaticLayoutManager.prototype.getGadgetChrome=function(b){var a=this.gadgetChromeIds_[b.id];return a?document.getElementById(a):null};shindig.FloatLeftLayoutManager=function(a){shindig.LayoutManager.call(this);this.layoutRootId_=a};shindig.FloatLeftLayoutManager.inherits(shindig.LayoutManager);shindig.FloatLeftLayoutManager.prototype.getGadgetChrome=function(b){var c=document.getElementById(this.layoutRootId_);if(c){var a=document.createElement("div");a.className="gadgets-gadget-chrome";a.style.cssFloat="left";c.appendChild(a);return a}else{return null}};shindig.Gadget=function(b){this.userPrefs={};if(b){for(var a in b){if(b.hasOwnProperty(a)){this[a]=b[a]}}}if(!this.secureToken){this.secureToken="john.doe:john.doe:appid:cont:url:0:default"}};shindig.Gadget.prototype.getUserPrefs=function(){return this.userPrefs};shindig.Gadget.prototype.saveUserPrefs=function(){shindig.container.userPrefStore.savePrefs(this)};shindig.Gadget.prototype.getUserPrefValue=function(b){var a=this.userPrefs[b];return typeof(a.value)!="undefined"&&a.value!=null?a.value:a["default"]};shindig.Gadget.prototype.render=function(a){if(a){var b=this;this.getContent(function(c){a.innerHTML=c;b.finishRender(a)})}};shindig.Gadget.prototype.getContent=function(a){shindig.callAsyncAndJoin(["getTitleBarContent","getUserPrefsDialogContent","getMainContent"],function(b){a(b.join(""))},this)};shindig.Gadget.prototype.getTitleBarContent=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.Gadget.prototype.getUserPrefsDialogContent=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.Gadget.prototype.getMainContent=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.Gadget.prototype.finishRender=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.Gadget.prototype.getAdditionalParams=function(){return""};shindig.BaseIfrGadget=function(a){shindig.Gadget.call(this,a);this.serverBase_="/gadgets/";this.queryIfrGadgetType_()};shindig.BaseIfrGadget.inherits(shindig.Gadget);shindig.BaseIfrGadget.prototype.GADGET_IFRAME_PREFIX_="remote_iframe_";shindig.BaseIfrGadget.prototype.CONTAINER="default";shindig.BaseIfrGadget.prototype.cssClassGadget="gadgets-gadget";shindig.BaseIfrGadget.prototype.cssClassTitleBar="gadgets-gadget-title-bar";shindig.BaseIfrGadget.prototype.cssClassTitle="gadgets-gadget-title";shindig.BaseIfrGadget.prototype.cssClassTitleButtonBar="gadgets-gadget-title-button-bar";shindig.BaseIfrGadget.prototype.cssClassGadgetUserPrefsDialog="gadgets-gadget-user-prefs-dialog";shindig.BaseIfrGadget.prototype.cssClassGadgetUserPrefsDialogActionBar="gadgets-gadget-user-prefs-dialog-action-bar";shindig.BaseIfrGadget.prototype.cssClassTitleButton="gadgets-gadget-title-button";shindig.BaseIfrGadget.prototype.cssClassGadgetContent="gadgets-gadget-content";shindig.BaseIfrGadget.prototype.rpcToken=(2147483647*Math.random())|0;shindig.BaseIfrGadget.prototype.rpcRelay="../container/rpc_relay.html";shindig.BaseIfrGadget.prototype.getTitleBarContent=function(a){var b=this.hasViewablePrefs_()?'<a href="#" onclick="shindig.container.getGadget('+this.id+').handleOpenUserPrefsDialog();return false;" class="'+this.cssClassTitleButton+'">settings</a> ':"";a('<div id="'+this.cssClassTitleBar+"-"+this.id+'" class="'+this.cssClassTitleBar+'"><span id="'+this.getIframeId()+'_title" class="'+this.cssClassTitle+'">'+(this.title?this.title:"Title")+'</span> | <span class="'+this.cssClassTitleButtonBar+'">'+b+'<a href="#" onclick="shindig.container.getGadget('+this.id+').handleToggle();return false;" class="'+this.cssClassTitleButton+'">toggle</a></span></div>')};shindig.BaseIfrGadget.prototype.getUserPrefsDialogContent=function(a){a('<div id="'+this.getUserPrefsDialogId()+'" class="'+this.cssClassGadgetUserPrefsDialog+'"></div>')};shindig.BaseIfrGadget.prototype.setServerBase=function(a){this.serverBase_=a};shindig.BaseIfrGadget.prototype.getServerBase=function(){return this.serverBase_};shindig.BaseIfrGadget.prototype.getMainContent=function(a){var b=this;window.setTimeout(function(){b.getMainContent(a)},0)};shindig.BaseIfrGadget.prototype.getIframeId=function(){return this.GADGET_IFRAME_PREFIX_+this.id};shindig.BaseIfrGadget.prototype.getUserPrefsDialogId=function(){return this.getIframeId()+"_userPrefsDialog"};shindig.BaseIfrGadget.prototype.getUserPrefsParams=function(){var b="";for(var a in this.getUserPrefs()){b+="&up_"+encodeURIComponent(a)+"="+encodeURIComponent(this.getUserPrefValue(a))}return b};shindig.BaseIfrGadget.prototype.handleToggle=function(){var c=document.getElementById(this.getIframeId());if(c){var a=c.parentNode;var b=a.style.display;a.style.display=b?"":"none"}};shindig.BaseIfrGadget.prototype.hasViewablePrefs_=function(){for(var b in this.getUserPrefs()){var a=this.userPrefs[b];if(a.type!="hidden"){return true}}return false};shindig.BaseIfrGadget.prototype.handleOpenUserPrefsDialog=function(){if(this.userPrefsDialogContentLoaded){this.showUserPrefsDialog()}else{var b=this;var c="ig_callback_"+this.id;window[c]=function(d){b.userPrefsDialogContentLoaded=true;b.buildUserPrefsDialog(d);b.showUserPrefsDialog()};var a=document.createElement("script");a.src="http://www.gmodules.com/ig/gadgetsettings?mid="+this.id+"&output=js"+this.getUserPrefsParams()+"&url="+this.specUrl;document.body.appendChild(a)}};shindig.BaseIfrGadget.prototype.buildUserPrefsDialog=function(a){var b=document.getElementById(this.getUserPrefsDialogId());b.innerHTML=a+'<div class="'+this.cssClassGadgetUserPrefsDialogActionBar+'"><input type="button" value="Save" onclick="shindig.container.getGadget('+this.id+').handleSaveUserPrefs()"> <input type="button" value="Cancel" onclick="shindig.container.getGadget('+this.id+').handleCancelUserPrefs()"></div>';b.childNodes[0].style.display=""};shindig.BaseIfrGadget.prototype.showUserPrefsDialog=function(a){var b=document.getElementById(this.getUserPrefsDialogId());b.style.display=(a||a===undefined)?"":"none"};shindig.BaseIfrGadget.prototype.hideUserPrefsDialog=function(){this.showUserPrefsDialog(false)};shindig.BaseIfrGadget.prototype.handleSaveUserPrefs=function(){this.hideUserPrefsDialog();var a=document.getElementById("m_"+this.id+"_numfields").value;for(var d=0;d<a;d++){var f=document.getElementById("m_"+this.id+"_"+d);var b="m_"+this.id+"_up_";var e=f.name.substring(b.length);var c=f.value;this.userPrefs[e].value=c}this.saveUserPrefs();this.refresh()};shindig.BaseIfrGadget.prototype.handleCancelUserPrefs=function(){this.hideUserPrefsDialog()};shindig.BaseIfrGadget.prototype.refresh=function(){var a=this.getIframeId();document.getElementById(a).src=this.getIframeUrl()};shindig.BaseIfrGadget.prototype.queryIfrGadgetType_=function(){var d={context:{country:"default",language:"default",view:"default",container:"default"},gadgets:[{url:this.specUrl,moduleId:1}]};var e={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(d)};var a=this.serverBase_+"metadata?st="+this.secureToken;gadgets.io.makeNonProxiedRequest(a,c,e,"application/javascript");var b=this;function c(g){var f=false;var k=g.data.gadgets[0].features;for(var i=0;i<k.length;i++){if(k[i]==="pubsub-2"){f=true;break}}var h=f?shindig.OAAIfrGadget:shindig.IfrGadget;for(var j in h){if(h.hasOwnProperty(j)){b[j]=h[j]}}}};shindig.IfrGadget={getMainContent:function(a){var b=this.getIframeId();gadgets.rpc.setRelayUrl(b,this.serverBase_+this.rpcRelay);gadgets.rpc.setAuthToken(b,this.rpcToken);a('<div class="'+this.cssClassGadgetContent+'"><iframe id="'+b+'" name="'+b+'" class="'+this.cssClassGadget+'" src="about:blank" frameborder="no" scrolling="no"'+(this.height?' height="'+this.height+'"':"")+(this.width?' width="'+this.width+'"':"")+"></iframe></div>")},finishRender:function(a){window.frames[this.getIframeId()].location=this.getIframeUrl()},getIframeUrl:function(){return this.serverBase_+"ifr?container="+this.CONTAINER+"&mid="+this.id+"&nocache="+shindig.container.nocache_+"&country="+shindig.container.country_+"&lang="+shindig.container.language_+"&view="+shindig.container.view_+(this.specVersion?"&v="+this.specVersion:"")+(shindig.container.parentUrl_?"&parent="+encodeURIComponent(shindig.container.parentUrl_):"")+(this.debug?"&debug=1":"")+this.getAdditionalParams()+this.getUserPrefsParams()+(this.secureToken?"&st="+this.secureToken:"")+"&url="+encodeURIComponent(this.specUrl)+"#rpctoken="+this.rpcToken+(this.viewParams?"&view-params="+encodeURIComponent(gadgets.json.stringify(this.viewParams)):"")+(this.hashData?"&"+this.hashData:"")}};shindig.OAAIfrGadget={getMainContent:function(a){a('<div id="'+this.cssClassGadgetContent+"-"+this.id+'" class="'+this.cssClassGadgetContent+'"></div>')},finishRender:function(a){var b={className:this.cssClassGadget,frameborder:"no",scrolling:"no"};if(this.height){b.height=this.height}if(this.width){b.width=this.width}new OpenAjax.hub.IframeContainer(gadgets.pubsub2router.hub,this.getIframeId(),{Container:{onSecurityAlert:function(c,d){gadgets.error("Security error for container "+c.getClientID()+" : "+d);c.getIframe().src="about:blank"}},IframeContainer:{parent:document.getElementById(this.cssClassGadgetContent+"-"+this.id),uri:this.getIframeUrl(),tunnelURI:shindig.uri(this.serverBase_+this.rpcRelay).resolve(shindig.uri(window.location.href)),iframeAttrs:b}})},getIframeUrl:function(){return this.serverBase_+"ifr?container="+this.CONTAINER+"&mid="+this.id+"&nocache="+shindig.container.nocache_+"&country="+shindig.container.country_+"&lang="+shindig.container.language_+"&view="+shindig.container.view_+(this.specVersion?"&v="+this.specVersion:"")+(this.debug?"&debug=1":"")+this.getAdditionalParams()+this.getUserPrefsParams()+(this.secureToken?"&st="+this.secureToken:"")+"&url="+encodeURIComponent(this.specUrl)+(this.viewParams?"&view-params="+encodeURIComponent(gadgets.json.stringify(this.viewParams)):"")+(this.hashData?"#"+this.hashData:"")}};shindig.Container=function(){this.gadgets_={};this.parentUrl_=document.location.href+"://"+document.location.host;this.country_="ALL";this.language_="ALL";this.view_="default";this.nocache_=1;this.maxheight_=2147483647};shindig.Container.inherits(shindig.Extensible);shindig.Container.prototype.gadgetClass=shindig.Gadget;shindig.Container.prototype.userPrefStore=new shindig.DefaultUserPrefStore();shindig.Container.prototype.gadgetService=new shindig.GadgetService();shindig.Container.prototype.layoutManager=new shindig.StaticLayoutManager();shindig.Container.prototype.setParentUrl=function(a){this.parentUrl_=a};shindig.Container.prototype.setCountry=function(a){this.country_=a};shindig.Container.prototype.setNoCache=function(a){this.nocache_=a};shindig.Container.prototype.setLanguage=function(a){this.language_=a};shindig.Container.prototype.setView=function(a){this.view_=a};shindig.Container.prototype.setMaxHeight=function(a){this.maxheight_=a};shindig.Container.prototype.getGadgetKey_=function(a){return"gadget_"+a};shindig.Container.prototype.getGadget=function(a){return this.gadgets_[this.getGadgetKey_(a)]};shindig.Container.prototype.createGadget=function(a){return new this.gadgetClass(a)};shindig.Container.prototype.addGadget=function(a){a.id=this.getNextGadgetInstanceId();this.gadgets_[this.getGadgetKey_(a.id)]=a};shindig.Container.prototype.addGadgets=function(a){for(var b=0;b<a.length;b++){this.addGadget(a[b])}};shindig.Container.prototype.renderGadgets=function(){for(var a in this.gadgets_){this.renderGadget(this.gadgets_[a])}};shindig.Container.prototype.renderGadget=function(a){throw Error(shindig.errors.SUBCLASS_RESPONSIBILITY)};shindig.Container.prototype.nextGadgetInstanceId_=0;shindig.Container.prototype.getNextGadgetInstanceId=function(){return this.nextGadgetInstanceId_++};shindig.Container.prototype.refreshGadgets=function(){for(var a in this.gadgets_){this.gadgets_[a].refresh()}};shindig.IfrContainer=function(){shindig.Container.call(this)};shindig.IfrContainer.inherits(shindig.Container);shindig.IfrContainer.prototype.gadgetClass=shindig.BaseIfrGadget;shindig.IfrContainer.prototype.gadgetService=new shindig.IfrGadgetService();shindig.IfrContainer.prototype.setParentUrl=function(a){if(!a.match(/^http[s]?:\/\//)){a=document.location.href.match(/^[^?#]+\//)[0]+a}this.parentUrl_=a};shindig.IfrContainer.prototype.renderGadget=function(b){var a=this.layoutManager.getGadgetChrome(b);b.render(a)};shindig.container=new shindig.IfrContainer();if(gadgets&&gadgets.rpc){osapi._handleGadgetRpcMethod=function(d){var h=new Array(d.length);var i=0;var f=this.callback;var c=function(j,k){k({})};for(var a=0;a<d.length;a++){var g=osapi;if(d[a].method.indexOf("_")==-1){var e=d[a].method.split(".");for(var b=0;b<e.length;b++){if(g.hasOwnProperty(e[b])){g=g[e[b]]}else{g=c;break}}}else{g=c}g(d[a].params,function(j){return function(k){h[j]={id:d[j].id,data:k};i++;if(i==d.length){f(h)}}}(a))}};osapi.container={};osapi.container.listMethods=function(a,b){var c=[];recurseNames(osapi,"",5,c);b(c)};function recurseNames(e,d,c,f){if(c==0){return}for(var b in e){if(e.hasOwnProperty(b)){if(b.indexOf("_")==-1){var a=typeof(e[b]);if(a=="function"){f.push(d+b)}else{if(a=="object"){recurseNames(e[b],d+b+".",c-1,f)}}}}}}gadgets.rpc.register("osapi._handleGadgetRpcMethod",osapi._handleGadgetRpcMethod)}gadgets.config.init({"shindig.auth":{},osapi:{endPoints:["https://%host%/rpc"]},"osapi.services":{"gadgets.rpc":["container.listMethods"],"https://%host%/rpc":["activities.supportedFields","activities.update","gadgets.metadata","activities.delete","activities.get","appdata.update","http.put","http.post","gadgets.tokenSupportedFields","appdata.get","activities.create","system.listMethods","cache.invalidate","groups.get","people.supportedFields","http.get","http.head","appdata.delete","http.delete","aipo.version","gadgets.token","appdata.create","people.get","gadgets.supportedFields"]},rpc:{parentRelayUrl:"/gadgets/files/container/rpc_relay.html",useLegacyProtocol:false},"core.io":{proxyUrl:"//%host%/gadgets/proxy?container=default&refresh=%refresh%&url=%url%%rewriteMime%",jsonProxyUrl:"//%host%/gadgets/makeRequest"}});
aipo.PortletLayoutManager=function(){shindig.LayoutManager.call(this)};aipo.PortletLayoutManager.inherits(shindig.LayoutManager);aipo.PortletLayoutManager.prototype.getGadgetChrome=function(b){var a="gadget-chrome-"+b.portletId;return a?document.getElementById(a):null};aipo.PsmlUserPrefStore=function(){shindig.UserPrefStore.call(this)};aipo.PsmlUserPrefStore.inherits(shindig.UserPrefStore);aipo.PsmlUserPrefStore.prototype.getPrefs=function(a){};aipo.PsmlUserPrefStore.prototype.savePrefs=function(a){};aipo.IfrGadget={getMainContent:function(a){var b=this.getIframeId();gadgets.rpc.setRelayUrl(b,this.serverBase_+this.rpcRelay);gadgets.rpc.setAuthToken(b,this.rpcToken);a('<div class="'+this.cssClassGadgetContent+'"><iframe id="'+b+'" name="'+b+'" class="'+this.cssClassGadget+'" src="about:blank" frameborder="no"'+(this.scrolling?' scrolling="'+this.scrolling+'"':"no")+(this.height?' height="'+this.height+'"':"")+(this.width?' width="'+this.width+'"':"")+"></iframe></div>")},finishRender:function(a){window.frames[this.getIframeId()].location=this.getIframeUrl()},getIframeUrl:function(){return this.serverBase_+"ifr?container="+this.CONTAINER+"&mid="+this.id+"&nocache="+aipo.container.nocache_+"&country="+aipo.container.country_+"&lang="+aipo.container.language_+"&view="+aipo.container.view_+(this.specVersion?"&v="+this.specVersion:"")+(shindig.container.parentUrl_?"&parent="+encodeURIComponent(shindig.container.parentUrl_):"")+(this.debug?"&debug=1":"")+this.getAdditionalParams()+this.getUserPrefsParams()+(this.secureToken?"&st="+this.secureToken:"")+"&url="+encodeURIComponent(this.specUrl)+"#rpctoken="+this.rpcToken+(this.viewParams?"&view-params="+encodeURIComponent(gadgets.json.stringify(this.viewParams)):"")+(this.hashData?"&"+this.hashData:"")}};aipo.IfrGadgetService=function(){shindig.IfrGadgetService.call(this);gadgets.rpc.register("set_pref",this.setUserPref);gadgets.rpc.register("set_title",this.setTitle);gadgets.rpc.register("requestNavigateTo",this.requestNavigateTo);gadgets.rpc.register("requestCheckActivity",this.requestCheckActivity);gadgets.rpc.register("requestCheckTimeline",this.requestCheckTimeline);gadgets.rpc.register("requestCheckMessage",this.requestCheckMessage);gadgets.rpc.register("requestCheckMessageRead",this.requestCheckMessageRead);gadgets.rpc.register("requestCheckMessageDelete",this.requestCheckMessageDelete)};aipo.IfrGadgetService.inherits(shindig.IfrGadgetService);aipo.IfrGadgetService.prototype.setUserPref=function(h,b,n){var l=this.f.replace("remote_iframe_","").split("_NN_")[0].replace("-popup","");var m=null;for(key in aipo.container.gadgets_){var c=aipo.container.gadgets_[key];if(l==c.portletId){m=key;break}}var e={};for(var g=1,d=arguments.length;g<d;g+=2){e[arguments[g]]=arguments[g+1];if(m){aipo.container.gadgets_[m].userPrefs[arguments[g]]={};aipo.container.gadgets_[m].userPrefs[arguments[g]]["value"]=arguments[g+1]}}var f={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(e)};var a="?template=UserPrefUpdateJSONScreen&js_peid="+encodeURIComponent(l);gadgets.io.makeNonProxiedRequest(a,k,f,"application/javascript");function k(i){if(i.rc==200){}}};aipo.IfrGadgetService.prototype.setTitle=function(a){};aipo.IfrGadgetService.prototype.requestNavigateTo=function(a,e){var c=this.f.replace("remote_iframe_","").split("_NN_")[0].replace("-popup","");var b="?js_peid="+encodeURIComponent(c);if(a=="canvas"){b+="&action=controls.Maximize"}else{if(a=="home"){b+="&action=controls.Restore"}}if(e){var d=gadgets.json.stringify(e);if(d.length>0){b+="&appParams="+encodeURIComponent(d)}}document.location.href=b};aipo.activityDesktopNotifyEnable=null;aipo.IfrGadgetService.prototype.requestDesktopNotifyEnable=function(b){function e(g){if(g.rc==200){var f=g.data;if(f){aipo.activityDesktopNotifyEnable=f.enable;aipo.menu.activity.isLoad=false}}}var d={};var c={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(d)};var a="?template=ActivityNotifyEnableJSONScreen";if(aipo.activityDesktopNotifyEnable!=null){if(window.webkitNotifications&&(!aipo.activityDesktopNotifyEnable||window.webkitNotifications.checkPermission()!=0)){if(window.webkitNotifications.checkPermission()==0){a+="&enable=T";gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}else{window.webkitNotifications.requestPermission(function(){if(window.webkitNotifications.checkPermission()==0){a+="&enable=T";gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}})}}else{if(window.Notification&&(!aipo.activityDesktopNotifyEnable||window.Notification.permission!="granted")){if(window.Notification.permission=="granted"){a+="&enable=T";gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}else{window.Notification.requestPermission(function(){if(window.Notification.permission=="granted"){a+="&enable=T";gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}})}}else{a+="&enable=F";gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}}}else{gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}};aipo.activityMax=null;aipo.IfrGadgetService.prototype.requestCheckActivity=function(a){var d={};var c={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(d)};var b="?template=CheckActivityJSONScreen&isRead="+a;if(aipo.activityMax){b+="&max="+aipo.activityMax}gadgets.io.makeNonProxiedRequest(b,e,c,"application/javascript");function e(j){if(j.rc==200){var k=j.data;var i=k.unreadCount;var h={Workflow:"workflow",todo:"todo",Report:"report",Note:"note"};aipo.activityMax=k.max;aipo.menu.activity.count(i);aipo.menu.updateTitle();for(key in k.activities){var m=k.activities[key];var n=m.appId;var l=h[n];if(l=="workflow"||l=="todo"||l=="report"||l=="note"){aipo.portletReload(l)}}if(aipo.activityDesktopNotifyEnable){if(window.webkitNotifications&&window.webkitNotifications.checkPermission()==0){var o=new Array();for(key in k.activities){var g=k.activities[key];var f=window.webkitNotifications.createNotification("images/favicon48.png",g.displayName,g.text);f.show();f.ondisplay=function(p){setTimeout(function(){p.currentTarget.cancel()},7*1000)};o.push(f)}}else{if(window.Notification&&window.Notification.permission=="granted"){var o=new Array();for(key in k.activities){var g=k.activities[key];var f=new window.Notification(g.displayName,{icon:"images/favicon48.png",body:g.text});f.onshow=function(p){setTimeout(function(){if(p.currentTarget){p.currentTarget.close()}},7*1000)};o.push(f)}}}}aipo.menu.activity.isLoad=false}}};aipo.IfrGadgetService.prototype.requestCheckTimeline=function(){var a=0;var b=dojo.byId("getTimelineOnClick").innerHTML;if(b!="true"){dojo.query("#timelineOuter .elastic").forEach(function(c){if(c.value!=c.defaultValue){a++}});if(dojo.byId("modalDialog")!=undefined&&dojo.byId("modalDialog").style.display!="none"){a++}}if(a==0){aipo.portletReload("timeline")}else{dojo.query(".newMessage").style("display","")}};aipo.IfrGadgetService.prototype.requestCheckMessage=function(f){if(typeof(f.transactionId)!=="undefined"&&aipo.message.removeTransactionId(f.transactionId)){return}var b=true;if(typeof(aipo.message.loginUserId)!=="undefined"&&aipo.message.loginUserId==f.userId){b=false}if(aipo.message.isActive&&aipo.message.isOpenWindow()&&aipo.message.currentRoomId&&!aipo.message.moreMessageLock){aipo.message.latestMessageList();b=!(f.roomId==aipo.message.currentRoomId)}else{if(aipo.message.isInit){aipo.message.reloadRoomList()}else{aipo.message.updateUnreadCount()}}if(b){var d={};var c={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(d)};var a="?template=MessageCheckJSONScreen&messageId="+f.messageId;var e=function(h){if(h.rc==200){var i=h.data;if(aipo.activityDesktopNotifyEnable&&i.displayName){if(window.webkitNotifications&&window.webkitNotifications.checkPermission()==0){var o=new Array();var l=i.displayName;var j=i.userId;var n=i.text;var m=i.photoModified;var k="themes/default/images/common/icon_user100.png";if(i.hasPhoto){k="?template=FileuploadFacePhotoScreen&uid="+j+"&t="+m}var g=window.webkitNotifications.createNotification(k,l,n);g.show();g.ondisplay=function(p){setTimeout(function(){p.currentTarget.cancel()},7*1000)};o.push(g)}else{if(window.Notification&&window.Notification.permission=="granted"){var o=new Array();var l=i.displayName;var j=i.userId;var n=i.text;var m=i.photoModified;var k="themes/default/images/common/icon_user100.png";if(i.hasPhoto){k="?template=FileuploadFacePhotoScreen&uid="+j+"&t="+m}var g=new window.Notification(l,{icon:k,body:n});g.onshow=function(p){setTimeout(function(){if(p.currentTarget){p.currentTarget.close()}},7*1000)};o.push(g)}}}}};gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")}};aipo.IfrGadgetService.prototype.requestCheckMessageRead=function(a){if(a.roomId){aipo.message.updateReadCount(a.roomId)}};aipo.IfrGadgetService.prototype.requestCheckMessageDelete=function(a){if(a.roomId){if(aipo.message.isInit){aipo.message.reloadRoomList()}else{aipo.message.updateUnreadCount()}aipo.message.removeNode(a.messageId)}};aipo.IfrContainer=function(){shindig.Container.call(this);this.context=new Array()};aipo.IfrContainer.inherits(shindig.Container);aipo.IfrContainer.prototype.gadgetClass=shindig.BaseIfrGadget;aipo.IfrContainer.prototype.gadgetService=new aipo.IfrGadgetService();aipo.IfrContainer.prototype.setParentUrl=function(a){if(!a.match(/^http[s]?:\/\//)){a=document.location.href.match(/^[^?#]+\//)[0]+a}this.parentUrl_=a};aipo.IfrContainer.prototype.assign=function(a){this.context.push(a)};aipo.IfrContainer.prototype.getContext=function(){return this.context};aipo.IfrContainer.prototype.addGadget=function(a){this.gadgets_[this.getGadgetKey_(a.id)]=a};aipo.IfrContainer.prototype.renderGadget=function(b){var a=this.layoutManager.getGadgetChrome(b);if(!b.count){b.count=0}b.count++;b.render(a)};aipo.IfrContainer.prototype.renderGadgets=function(){var b=this.context;for(var a=0;a<b.length;a++){var e=b[a];var d=this.createGadget(e);d.setServerBase(e.serverBase);this.addGadget(d)}aipo.cron.start()};var tmpGadget;aipo.IfrContainer.prototype.renderGadgetFromContext=function(c){var d=this.createGadget(c);d.setServerBase(c.serverBase);d.id=this.getNextGadgetInstanceId();d.portletId+="-popup";var b="gadget-chrome-"+d.portletId;var a=b?document.getElementById(b):null;if(!d.count){d.count=0}d.count++;d.render(a);tmpGadget=d};shindig.BaseIfrGadget.prototype.getIframeId=function(){return this.GADGET_IFRAME_PREFIX_+this.portletId+"_NN_"+this.count};shindig.BaseIfrGadget.prototype.queryIfrGadgetType_=function(){var c=this;var b=aipo.IfrGadget;for(var a in b){if(b.hasOwnProperty(a)){c[a]=b[a]}}};shindig.Gadget.prototype.getContent=function(a){shindig.callAsyncAndJoin(["getMainContent"],function(b){a(b.join(""))},this)};aipo.container=new aipo.IfrContainer();aipo.container.layoutManager=new aipo.PortletLayoutManager();aipo.container.userPrefStore=new aipo.PsmlUserPrefStore();aipo.cron=new CronTask(function(d){var a=aipo.container.context;var c={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(aipo.container.context)};var b="?template=GadgetsSecurityTokenUpdateJSONScreen&view="+aipo.container.view_;if(!aipo.cron.isFirst){b+="&update=1"}function e(j){if(j.rc==200){var k=j.data;for(var l=0;l<k.length;l++){var g=k[l];var h=aipo.container.gadgets_["gadget_"+g.id];if(!aipo.cron.isFirst){gadgets.rpc.call("remote_iframe_"+g.portletId+"_NN_"+h.count,"update_security_token",null,g.secureToken);h.secureToken=g.secureToken}var o=g.height;var n=null;if(g.views){n=g.views[aipo.container.view_];var f=0;if(n){f=n.preferredHeight}else{var m=g.views["default"];if(m){f=m.preferredHeight}}}if(o>0){h.height=o}if(f>0){h.height=f}h.scrolling=g.scrolling?"true":"no";if(aipo.cron.isFirst){aipo.container.renderGadget(h)}}aipo.cron.isFirst=false}}gadgets.io.makeNonProxiedRequest(b,e,c,"application/javascript");d()},30*60*1000,true);aipo.cron.isFirst=true;aipo.container.onPopupGadgets=function(){var a=document.getElementById("gadgets-popup-action");if(a){location.href=a.href}};
dojo.provide("aipo.menu");aipo.menu.list=[];aipo.menu.register=function(a){aipo.menu.list.push(a)};aipo.menu.toggleDropdown=function(b){var c=dojo.byId("mb_"+b);var d=dojo.byId("dd_"+b);if(c){dojo.toggleClass(c,"active")}if(d){dojo.toggleClass(d,"open");if(dojo.hasClass(d,"open")){if(aipo.menu[b]&&aipo.menu[b].reload&&!aipo.menu[b].isLoad){aipo.menu[b].reload();aipo.menu[b].isLoad=true}}}for(var a in aipo.menu.list){if(aipo.menu.list[a]!=b){aipo.menu.hideDropdown(aipo.menu.list[a])}}aipo.message.swapView()};aipo.menu.hideDropdown=function(a){var b=dojo.byId("mb_"+a);var c=dojo.byId("dd_"+a);if(b){dojo.removeClass(b,"active")}if(c){dojo.removeClass(c,"open")}};aipo.menu.closeDropdown=function(a){if(dijit.byId(a+"checkerContainer")){dijit.byId(a+"checkerContainer")._closeDropDown()}};aipo.menu.hideDropdownAll=function(b){for(var a in aipo.menu.list){aipo.menu.hideDropdown(aipo.menu.list[a])}aipo.message.swapView()};aipo.menu.updateTitle=function(){var a=0;for(var b in aipo.menu.list){if(dojo.byId(aipo.menu.list[b]+"Checker")!=undefined){var c=parseInt(dojo.byId(aipo.menu.list[b]+"Checker").innerHTML);if(c){a+=c}}}if(!a){document.title=djConfig.siteTitle}else{if(a>99){document.title="(99+) "+djConfig.siteTitle}else{document.title="("+a+") "+djConfig.siteTitle}}};var bodyHandle=bodyHandle||{};dojo.addOnLoad(function(){var a=dojo.query("body")[0];if(aipo.userAgent.isIphone8_4_1()){a=dojo.byId("wrapper")}bodyHandle=dojo.connect(a,"onmousedown",null,function(j){if(dojo.query("a.customizeMenuIconMouseenter").length==0){var b;if(document.all){b=j.srcElement}else{b=j.target}var g=new Array();g[0]={nodeName:b.nodeName,className:b.className};var f=b.parentNode;var d="";for(var c=1;f;c++){g[c]={nodeName:f.nodeName,className:f.className};f=f.parentNode}var h=true;for(var c=0;c<g.length;c++){if(g[c].className){if(g[c].className.indexOf("open")>=0){var h=false;break}if(g[c].className.indexOf("hdNavigation")>=0){var h=false;break}if(g[c].className.indexOf("modalDialogUnderlayWrapper")>0){var h=false;break}if(g[c].className.indexOf("modalDialog")>=0){var h=false;break}if(g[c].className.indexOf("imgPopup")>=0){var h=false;break}if(g[c].className.indexOf("profilePopup")>=0){var h=false;break}}}if(h){aipo.menu.hideDropdownAll()}}})});
dojo.provide("aipo.menu.activity");aipo.menu.activity.reload=function(){var a=dijit.byId("activityListPane");if(!a){a=new aimluck.widget.Contentpane({},"activityListPane")}if(window.webkitNotifications){a.viewPage("?template=ActivityListScreen&s=1&p="+window.webkitNotifications.checkPermission())}else{if(window.Notification){a.viewPage("?template=ActivityListScreen&s=1&p="+window.Notification.permission)}else{a.viewPage("?template=ActivityListScreen&s=0")}}};aipo.menu.activity.count=function(b){var a=dojo.byId("activityChecker");if(a>99){a.innerHTML="99+";dojo.addClass("activityChecker","num")}else{if(b==0){a.innerHTML="";dojo.removeClass("activityChecker","num")}else{a.innerHTML=b;dojo.addClass("activityChecker","num")}}};
dojo.provide("aipo.menu.message");aipo.menu.message.reload=function(){};aipo.menu.message.count=function(b){var a=dojo.byId("messageChecker");if(a>99){a.innerHTML="99+";dojo.addClass("messageChecker","num")}else{if(b==0){a.innerHTML="";dojo.removeClass("messageChecker","num")}else{a.innerHTML=b;dojo.addClass("messageChecker","num")}}};
dojo.provide("aipo.message");aipo.message.currentRoomId=null;aipo.message.tmpMessageId=null;aipo.message.tmpRoomId=null;aipo.message.tmpPortletTitle=null;aipo.message.currentUserId=null;aipo.message.currentGroupName="all";aipo.message.currentRoomSearchKeyword=null;aipo.message.currentUserSearchKeyword=null;aipo.message.currentMessageSearchKeyword=null;aipo.message.moreMessageLock=false;aipo.message.isActive=true;aipo.message.portletId=null;aipo.message.jslink=null;aipo.message.isMobile=false;aipo.message.isInit=false;aipo.message.isDirect=false;aipo.message.jumpCursor=null;aipo.message.isSearched=false;aipo.message.transactionIdList=[];aipo.message.setup=function(b,c,a){aipo.message.portletId=b;aipo.message.jslink=c;aipo.message.isMobile=a};aipo.message.init=function(c,e,a){aipo.message.portletId=c;aipo.message.jslink=e;aipo.message.isMobile=a;if(!aipo.message.isMobile){dojo.connect(window,"onresize",null,function(f){aipo.message.fixMessageWindow()})}dojo.connect(window,"onfocus",null,function(f){aipo.message.isActive=true;if(aipo.message.isOpenWindow()&&aipo.message.currentRoomId&&!aipo.message.moreMessageLock){aipo.message.latestMessageList()}});dojo.connect(window,"onblur",null,function(f){aipo.message.isActive=false});var d=dojo.byId("messagePane");if(d){dojo.connect(aipo.message.isMobile?window:d,"onscroll",null,function(f){if(aipo.message.isMobile&&window.scrollY+document.documentElement.clientHeight+50+44>=document.body.scrollHeight&&!aipo.message.moreMessageLock){aipo.message.moreMessageList()}else{if(f.target.scrollTop+d.clientHeight+100>=f.target.scrollHeight&&!aipo.message.moreMessageLock){aipo.message.moreMessageList()}}})}var b=dojo.byId("messageRightPane");if(b){dojo.connect(aipo.message.isMobile?window:b,"onscroll",null,function(f){if(aipo.message.isMobile&&window.scrollY+document.documentElement.clientHeight+50+44>=document.body.scrollHeight&&!aipo.message.moreMessageLock){aipo.message.moreMessageRightList()}else{if(f.target.scrollTop+b.clientHeight+100>=f.target.scrollHeight&&!aipo.message.moreMessageLock){aipo.message.moreMessageRightList()}}})}if(""!=aipo.message.getCookieIsLastRoomOrUser()){if("User"==aipo.message.getCookieIsLastRoomOrUser()){aipo.message.currentUserId=aipo.message.getCookieRoomId("targetUserId=");aipo.message.reloadRoomList(null,aipo.message.currentUserId);aipo.message.selectTab("user");aipo.message.selectUser(aipo.message.currentUserId);currentRoomId=aipo.message.getCookieRoomId("targetUserId=")}else{if("Room"==aipo.message.getCookieIsLastRoomOrUser()){aipo.message.currentRoomId=aipo.message.getCookieRoomId("lastRoomId=");aipo.message.reloadRoomList(null,aipo.message.currentRoomId);aipo.message.selectTab("room");aipo.message.selectRoom(aipo.message.currentRoomId);currentRoomId=aipo.message.getCookieRoomId("lastRoomId=")}}}else{aipo.message.reloadRoomList()}aipo.message.isInit=true};aipo.message.messagePane=null;aipo.message.reloadMessageList=function(){if(!aipo.message.messagePane){aipo.message.messagePane=dijit.byId("messagePane");aipo.message.messagePane=new aimluck.widget.Contentpane({},"messagePane");aipo.message.messagePane.onLoad=function(){if(aipo.message.jumpCursor){var d=dojo.byId("messagePane");var c=dojo.byId("message"+aipo.message.jumpCursor);if(d&&c){if(aipo.message.isMobile){window.scrollTo(0,c.offsetTop)}else{var b=d.scrollHeight-d.clientHeight;aipo.message.scrollTo(d,b<c.offsetTop-50?b:c.offsetTop-50,100)}dojo.addClass(c,"active")}aipo.message.jumpCursor=null}else{aipo.message.read(aipo.message.currentRoomId)}aipo.message.fixDateLine()}}dojo.byId("messagePane").innerHTML='<div class="loader"><i class="indicator"></i></div>';var a=aipo.message.jslink+"?template=MessageListScreen";if(aipo.message.currentRoomId){a+="&r="+aipo.message.currentRoomId}else{if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}}if(aipo.message.jumpCursor){a+="&c="+aipo.message.jumpCursor;a+="&jump=1"}aipo.message.moreMessageLock=false;aipo.message.messagePane.viewPage(a)};aipo.message.roomMemberPane=null;aipo.message.reloadRoomMemberList=function(){if(!aipo.message.roomMemberPane){aipo.message.roomMemberPane=dijit.byId("roomMemberPane");aipo.message.roomMemberPane=new aimluck.widget.Contentpane({},"roomMemberPane");aipo.message.roomMemberPane.onLoad=function(){}}dojo.byId("roomMemberPane").innerHTML="";var a=aipo.message.jslink+"?template=MessageRoomMemberListScreen";if(aipo.message.currentRoomId){a+="&r="+aipo.message.currentRoomId}else{if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}}aipo.message.roomMemberPane.viewPage(a)};aipo.message.moreMessageList=function(){var a=aipo.message.jslink+"?template=MessageListScreen";if(aipo.message.currentRoomId){a+="&r="+aipo.message.currentRoomId}else{if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}}var b=aipo.message.getLastMessageId();if(b){aipo.message.moreMessageLock=true;a+="&c="+b;a+="&js_peid="+aipo.message.portletId;dojo.xhrGet({url:a,timeout:30000,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(e,d){var f=dojo.byId("messagePane");if(f){f.innerHTML+=e;if(f.children.length>1){var c=dojo.query("#messagePane .emptyMessage");if(c.length==1){c[0].parentNode.removeChild(c[0])}}aipo.message.fixDateLine()}aipo.message.moreMessageLock=false},error:function(c){aipo.message.moreMessageLock=false}})}};aipo.message.latestMessageList=function(){var a=aipo.message.jslink+"?template=MessageListScreen";if(aipo.message.currentRoomId){a+="&r="+aipo.message.currentRoomId}else{if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}}var b=aipo.message.getFirstMessageId();if(!b){b=0}aipo.message.moreMessageLock=true;a+="&c="+b;a+="&latest=1";a+="&js_peid="+aipo.message.portletId;dojo.xhrGet({url:a,timeout:30000,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(e,d){var f=dojo.byId("messagePane");if(f){f.innerHTML=e+f.innerHTML;if(f.children.length>1){var c=dojo.query("#messagePane .emptyMessage");if(c.length==1){c[0].parentNode.removeChild(c[0])}}aipo.message.fixDateLine()}aipo.message.moreMessageLock=false;aipo.message.reloadRoomList()},error:function(c){aipo.message.moreMessageLock=false}})};aipo.message.moreMessageRightList=function(){var a=aipo.message.jslink+"?template=MessageSearchListScreen";var b=aipo.message.getLastMessageRightId();if(b){aipo.message.moreMessageLock=true;a+="&c="+b;a+="&js_peid="+aipo.message.portletId;a+="&k="+encodeURIComponent(aipo.message.currentMessageSearchKeyword);dojo.xhrGet({url:a,timeout:30000,encoding:"utf-8",handleAs:"text",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(f,e){var d=dojo.byId("messageRightPane");if(d){d.innerHTML+=f;if(d.children.length>1){var c=dojo.query("#messageRightPane .emptyMessage");if(c.length==1){c[0].parentNode.removeChild(c[0])}}}aipo.message.moreMessageLock=false},error:function(c){aipo.message.moreMessageLock=false}})}};aipo.message.messageRoomListPane=null;aipo.message.reloadRoomList=function(c,b){if(!aipo.message.messageRoomListPane){aipo.message.messageRoomListPane=dijit.byId("messageRoomListPane");aipo.message.messageRoomListPane=new aimluck.widget.Contentpane({},"messageRoomListPane");aipo.message.messageRoomListPane.onLoad=function(){aipo.message.fixMessageWindow();var g=dojo.byId("messageTotalUnreadCountValue");var f=parseInt(g.innerHTML);if(f!=NaN){aipo.menu.message.count(f);aipo.menu.updateTitle()}if(aipo.message.messageRoomListPane.roomId){aipo.message.selectRoom(aipo.message.messageRoomListPane.roomId);aipo.message.messageRoomListPane.roomId=null}if(aipo.message.messageRoomListPane.userId){var d=dojo.byId("messageCurrentRoomValue");var e=parseInt(d.innerHTML);if(e!=NaN){aipo.message.selectRoom(e)}else{aipo.message.selectRoom(0)}aipo.message.messageRoomListPane.userId=null}if(aipo.message.isDirect){aipo.message.reloadUserList()}}}if(c){aipo.message.messageRoomListPane.roomId=c}if(b){aipo.message.messageRoomListPane.userId=b}var a=aipo.message.jslink+"?template=MessageRoomListScreen";if(aipo.message.currentRoomId){a+="&r="+aipo.message.currentRoomId}else{if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}}if(aipo.message.currentRoomSearchKeyword){aipo.message.messageRoomListPane.setParam("k",aipo.message.currentRoomSearchKeyword)}aipo.message.messageRoomListPane.viewPage(a)};aipo.message.messageRightPane=null;aipo.message.reloadSearchMessageList=function(c,b){if(!aipo.message.messageRightPane){aipo.message.messageRightPane=dijit.byId("messageRightPane");aipo.message.messageRightPane=new aimluck.widget.Contentpane({},"messageRightPane");aipo.message.messageRightPane.onLoad=function(){aipo.message.fixMessageWindow()}}var a=aipo.message.jslink+"?template=MessageSearchListScreen";if(aipo.message.currentMessageSearchKeyword){aipo.message.messageRightPane.setParam("k",aipo.message.currentMessageSearchKeyword)}aipo.message.messageRightPane.viewPage(a)};aipo.message.searchRoomList=function(a){aipo.message.currentRoomSearchKeyword=a.keyword.value;aipo.message.reloadRoomList()};aipo.message.searchMessageList=function(a){if(!a.keyword.value){return}aipo.message.currentMessageSearchKeyword=a.keyword.value;dojo.byId("messageRightPane").innerHTML='<div class="loader"><i class="indicator"></i></div>';aipo.message.openRightBlock();aipo.message.reloadSearchMessageList();if(aipo.message.isMobile){a.keyword.blur()}};aipo.message.openRightBlock=function(){var b=dojo.byId("messageSideBlock");var c=dojo.byId("messageMainBlock");var d=dojo.byId("messageMainBlockEmpty");var a=dojo.byId("messageRightPane");if(c&&!aipo.message.isMobile){c.style.margin="0 360px 0 280px"}if(d&&!aipo.message.isMobile){d.style.margin="0 360px 0 280px"}if(a){a.style.display=""}if(b&&aipo.message.isMobile){b.style.display="none"}aipo.message.isSearched=true};aipo.message.swapRightRoom=function(){var a=dojo.byId("messageRightRoomSwapIcon");if(dojo.hasClass(a,"icon-chevron-down")){dojo.removeClass(a,"icon-chevron-down");dojo.addClass(a,"icon-chevron-up");dojo.forEach(dojo.query(".messageRightRoom"),function(b){b.style.display="none"})}else{dojo.removeClass(a,"icon-chevron-up");dojo.addClass(a,"icon-chevron-down");dojo.forEach(dojo.query(".messageRightRoom"),function(b){b.style.display=""})}};aipo.message.swapRightUser=function(){var a=dojo.byId("messageRightUserSwapIcon");if(dojo.hasClass(a,"icon-chevron-down")){dojo.removeClass(a,"icon-chevron-down");dojo.addClass(a,"icon-chevron-up");dojo.forEach(dojo.query(".messageRightUser"),function(b){b.style.display="none"})}else{dojo.removeClass(a,"icon-chevron-up");dojo.addClass(a,"icon-chevron-down");dojo.forEach(dojo.query(".messageRightUser"),function(b){b.style.display=""})}};aipo.message.swapRightMessage=function(){var a=dojo.byId("messageRightMessageSwapIcon");if(dojo.hasClass(a,"icon-chevron-down")){dojo.removeClass(a,"icon-chevron-down");dojo.addClass(a,"icon-chevron-up");dojo.forEach(dojo.query(".messageRightMessage"),function(b){b.style.display="none"})}else{dojo.removeClass(a,"icon-chevron-up");dojo.addClass(a,"icon-chevron-down");dojo.forEach(dojo.query(".messageRightMessage"),function(b){b.style.display=""})}};aipo.message.closeRightBlock=function(){var b=dojo.byId("messageSideBlock");var c=dojo.byId("messageMainBlock");var d=dojo.byId("messageMainBlockEmpty");var a=dojo.byId("messageRightPane");if(c&&!aipo.message.isMobile){c.style.margin="0px 0px 0px 280px"}if(d&&!aipo.message.isMobile){d.style.margin="0px 0px 0px 280px"}if(a){a.style.display="none"}if(b&&aipo.message.isMobile){b.style.display=""}aipo.message.isSearched=false};aipo.message.clearSearchMessageList=function(){var a=dojo.byId("messageSearchForm");if(a){a.keyword.value="";aipo.message.currentMessageSearchKeyword=null;aipo.message.closeRightBlock();aipo.message.onBlurSearch()}};aipo.message.clearSearchRoomList=function(){var a=dojo.byId("messageRoomSearchForm");if(a){a.keyword.value="";aipo.message.searchRoomList(a)}};aipo.message.messageUserListPane=null;aipo.message.reloadUserList=function(b){if(!aipo.message.messageUserListPane){aipo.message.messageUserListPane=dijit.byId("messageUserListPane");aipo.message.messageUserListPane=new aimluck.widget.Contentpane({},"messageUserListPane");aipo.message.messageUserListPane.onLoad=function(){aipo.message.fixMessageWindow();if(aipo.message.isDirect){aipo.message.isDirect=false;aipo.message.selectUser(aipo.message.currentUserId);dojo.byId("messageUserlist").scrollTop=dojo.byId("messageUser"+aipo.message.currentUserId).offsetTop-dojo.byId("messageUserlist").offsetTop}}}if(b){aipo.message.currentGroupName=b}var a=aipo.message.jslink+"?template=MessageUserListScreen&target_group_name="+aipo.message.currentGroupName;if(aipo.message.currentUserSearchKeyword){aipo.message.messageUserListPane.setParam("k",aipo.message.currentUserSearchKeyword)}if(aipo.message.currentUserId){a+="&u="+aipo.message.currentUserId}aipo.message.messageUserListPane.viewPage(a)};aipo.message.searchUserList=function(){var b=dojo.byId("messageUserGroupSelect");var a=dojo.byId("messageUserSearchForm");aipo.message.reloadUserList(b.options[b.selectedIndex].value)};aipo.message.clearSearchUserList=function(){var a=dojo.byId("messageUserSearchForm");if(a){a.keyword.value="";aipo.message.searchUserList()}};aipo.message.updateReadCount=function(b){if(b==aipo.message.currentRoomId){var a=aipo.message.jslink+"?template=MessageReadCountListJSONScreen";a+="&r="+b;a+="&max="+aipo.message.getFirstMessageId();a+="&min="+aipo.message.getLastMessageId();a+="&js_peid="+aipo.message.portletId;dojo.xhrGet({url:a,timeout:30000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(d,c){for(read in d){var e=dojo.byId("messageReadCount"+read);if(e){if(d[read]==-1||d[read]=="-1"){e.innerHTML=aimluck.io.escapeText("message_val_all_read")}else{e.innerHTML=d[read]+aimluck.io.escapeText("message_val_read")}}}},error:function(c){}})}};aipo.message.updateUnreadCount=function(){var a=aipo.message.jslink+"?template=MessageUnreadCountJSONScreen";dojo.xhrGet({url:a,timeout:30000,encoding:"utf-8",handleAs:"json-comment-filtered",headers:{X_REQUESTED_WITH:"XMLHttpRequest"},load:function(d,c){var b=d.unreadCount;if(!isNaN(b)){aipo.menu.message.count(b);aipo.menu.updateTitle()}},error:function(b){}})};aipo.message.swapView=function(){if(dojo.byId("portletsBody")&&dojo.byId("dd_message")){if(dojo.hasClass("dd_message","open")){for(var b in aipo.schedule.scrollPositions){aipo.schedule.scrollPositions[b]=parseInt(dojo.byId("weeklyScrollPane_"+b)["scrollTop"])}dojo.byId("portletsBody").style.display="none";var a=dojo.byId("copyright");if(a){a.style.display="none"}aipo.message.fixMessageWindow();aipo.message.focusInput();if(aipo.message.isOpenWindow()&&aipo.message.currentRoomId&&!aipo.message.moreMessageLock){aipo.message.latestMessageList()}}else{dojo.byId("portletsBody").style.display="";var a=dojo.byId("copyright");if(a){a.style.display=""}for(var b in aipo.schedule.scrollPositions){if(aipo.schedule.scrollPositions[b]!=null){dojo.byId("weeklyScrollPane_"+b).scrollTop=aipo.schedule.scrollPositions[b]}}for(var b in aipo.schedule.scrollNeeds){aipo.calendar.populateWeeklySchedule(aipo.schedule.scrollNeeds[b])}while(aipo.schedule.scrollNeeds.length>0){aipo.schedule.scrollNeeds.pop()}}}};aipo.message.selectTab=function(d){var c=dojo.byId("messageRoomTab");var a=dojo.byId("messageUserTab");var b=dojo.byId("messageRoomContents");var e=dojo.byId("messageUserContents");if("room"==d){if(aipo.message.currentUserId&&!aipo.message.tmpRoomId){aipo.message.unselectRoom()}aipo.message.currentUserId=null;if(aipo.message.tmpRoomId){aipo.message.selectRoom(aipo.message.tmpRoomId);aipo.message.tmpRoomId=null}dojo.query(".messageUserlist li").forEach(function(f){dojo.removeClass(f,"active")});dojo.addClass(c,"active");dojo.removeClass(a,"active");dojo.addClass(b,"active");dojo.removeClass(e,"active");dojo.byId("messageRoomSetting").style.display=""}if("user"==d){dojo.query(".messageUserlist li").forEach(function(f){dojo.removeClass(f,"active")});dojo.addClass(a,"active");dojo.removeClass(c,"active");dojo.addClass(e,"active");dojo.removeClass(b,"active");aipo.message.reloadUserList()}};aipo.message.inputHistory={};aipo.message.selectRoom=function(g,n){var a=dojo.byId("messageSideBlock");var f=dojo.byId("messageMainBlock");var l=dojo.byId("messageMainBlockEmpty");var k=dojo.byId("messageRightPane");var q=dojo.byId("messageForm");var p=dojo.byId("messageRoom"+g);var c=dojo.byId("messageRoomType"+g);var e=dojo.byId("messageRoomAuthority"+g);var d=dojo.byId("messageRoomAvatar");var j=dojo.byId("messageRoomName");var o=dojo.byId("messageSearchForm");if(q&&p){if(aipo.message.isMobile){dojo.removeClass(document.body,"messageRoomList")}f.style.display="";if(l){l.style.display="none"}else{a.style.display="none"}aipo.message.inputHistory[aipo.message.currentRoomId]=q.message.value;aipo.message.currentRoomId=g;dojo.query(".messageSummary li").forEach(function(r){dojo.removeClass(r,"active")});if(!aipo.message.isMobile){dojo.addClass(p,"active")}if(aipo.message.inputHistory[aipo.message.currentRoomId]){aipo.message.changeInput(aipo.message.inputHistory[aipo.message.currentRoomId])}else{aipo.message.clearInput()}if(aipo.message.isMobile){var h=dojo.query("#messageRoom"+g+" .name");if(h&&h[0]){if(!aipo.message.tmpPortletTitle){aipo.message.tmpPortletTitle=dojo.byId("portletTitle").innerHTML}dojo.byId("portletTitle").innerHTML=h[0].innerHTML}if(k){k.style.display="none"}if(o){o.style.display="none"}}dojo.style(dojo.byId("messageInputAttachment"),"display","none");dojo.byId("attachments_global-"+aipo.message.portletId).innerHTML="";if(g==0&&aipo.message.currentUserId){q.roomId.value=0;q.userId.value=aipo.message.currentUserId;dojo.byId("messageRoomSetting").style.display="none"}else{q.userId.value=0;q.roomId.value=aipo.message.currentRoomId;dojo.byId("messageRoomSetting").style.display=""}var b=dojo.byId("messageSummary");if(n&&b){var m=b.scrollHeight-b.clientHeight;aipo.message.scrollTo(b,m<p.offsetTop?m:p.offsetTop,100)}aipo.message.fixMessageWindow();aipo.message.reloadRoomMemberList();aipo.message.reloadMessageList();if(dojo.hasClass("messageRoomTab","active")){aipo.message.saveCookieIsLastRoomOrUser("Room")}else{if(dojo.hasClass("messageUserTab","active")){aipo.message.saveCookieIsLastRoomOrUser("User")}}aipo.message.saveCookieTargetId("lastRoomId",aipo.message.currentRoomId)}};aipo.message.unselectRoom=function(){var c=dojo.byId("messageMainBlock");var d=dojo.byId("messageMainBlockEmpty");var a=dojo.byId("messageRightPane");var e=dojo.byId("messageForm");var b=dojo.byId("messageSearchForm");if(e){if(aipo.message.isMobile){dojo.addClass(document.body,"messageRoomList");if(b){b.style.display=""}}dojo.query(".messageSummary li").forEach(function(f){dojo.removeClass(f,"active")});dojo.query(".messageUserlist li").forEach(function(f){dojo.removeClass(f,"active")});aipo.message.clearInput();c.style.display="none";if(aipo.message.isMobile){if(aipo.message.tmpPortletTitle){dojo.byId("portletTitle").innerHTML=aipo.message.tmpPortletTitle}if(d){d.style.display=aipo.message.isSearched?"none":""}else{messageSideBlock.style.display=aipo.message.isSearched?"none":""}if(a){a.style.display=aipo.message.isSearched?"":"none"}}else{if(d){d.style.display=""}}aipo.message.currentRoomId=null;aipo.message.currentUserId=null}};aipo.message.selectUser=function(b){var c=dojo.byId("messageForm");var a=dojo.byId("messageUser"+b);if(c&&a){if(aipo.message.currentRoomId){aipo.message.tmpRoomId=aipo.message.currentRoomId}aipo.message.currentRoomId=0;aipo.message.currentUserId=b;aipo.message.inputHistory[aipo.message.currentRoomId]=c.message.value;aipo.message.inputHistory[0]="";dojo.query(".messageUserlist li").forEach(function(d){dojo.removeClass(d,"active")});if(!aipo.message.isMobile){dojo.addClass(a,"active")}aipo.message.reloadRoomList(null,b);aipo.message.saveCookieTargetId("targetUserId",b)}};aipo.message.changeInput=function(b){var a=dojo.byId("messageForm");if(a){a.message.value=b;aipo.message.resizeInput(a.message);aipo.message.focusInput()}};aipo.message.clearInput=function(){var a=dojo.byId("messageForm");if(a){a.message.value="";aipo.message.resizeInput(a.message);aipo.message.focusInput();dojo.byId("messageFormDiv").innerHTML=""}};aipo.message.focusInput=function(){var a=dojo.byId("messageForm");if(a&&!aipo.message.isMobile){try{a.message.focus()}catch(b){}}};aipo.message.fixMessageWindow=function(){if(aipo.message.isMobile){return}var e=dojo.byId("messageForm");if(dojo.byId("dd_message")!=null){var b=55+40+35+10+12;var a=dojo.byId("wrapper").clientWidth-20;var d=document.documentElement.clientHeight-b;var c=document.documentElement.clientHeight-(b+55);dojo.byId("dd_message").style.width=a+"px";if(dojo.byId("messageSideBlock1")!=null){dojo.byId("messageSideBlock1").style.height=d+"px"}if(dojo.byId("messageSideBlock2")!=null){dojo.byId("messageSideBlock2").style.height=d+"px"}if(dojo.byId("messageSummary")!=null){dojo.byId("messageSummary").style.height=c+"px"}if(dojo.byId("messageUserlist")!=null){dojo.byId("messageUserlist").style.height=c+"px"}}if(dojo.byId("messagePane")!=null){var b=173;if(e){b+=e.clientHeight}var d=document.documentElement.clientHeight-b;dojo.byId("messagePane").style.height=d+"px"}};aipo.message.onLoadMessageRoomDialog=function(){aipo.widget.MemberFilterList.setup("memberfilterlist","init_memberlist","member_to","member_authority_to");aipo.message.changeMember()};aipo.message.changeMember=function(){var b=dojo.byId("memberFieldDisplay");if(b){var d="";var a=dojo.byId("member_to");if(a){var e=a.options;to_size=e.length;for(i=0;i<to_size;i++){var c=e[i].text.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");d+="<span>"+c+"</span>";if(i<to_size-1){d+=",<wbr/>"}}}b.innerHTML=d}aipo.message.setWrapperHeight()};aipo.message.toggleMemberSelect=function(a){var c=dojo.byId("memberField");var d=dojo.byId("memberSelectButtonOn");var b=dojo.byId("memberSelectButtonOff");if(a){dojo.style(d,"display","none");dojo.style(b,"display","block");dojo.style(c,"display","block")}else{dojo.style(d,"display","block");dojo.style(b,"display","none");dojo.style(c,"display","none")}aipo.message.setWrapperHeight()};aipo.message.onReceiveMessage=function(b){if(!b.error){aimluck.io.disableForm(dojo.byId("messageForm"),false);if(!aipo.message.moreMessageLock){aipo.message.latestMessageList()}aipo.message.clearInput();dojo.byId("messagePane").scrollTop=0;dojo.style(dojo.byId("messageInputAttachment"),"display","none");dojo.byId("attachments_global-"+aipo.message.portletId).innerHTML="";if(dojo.hasClass("messageUserTab","active")){var a=parseInt(b.params);if(a!=NaN){aipo.message.currentRoomId=a;aipo.message.currentUserId=null;aipo.message.tmpRoomId=null;aipo.message.reloadRoomList()}aipo.message.selectTab("room");aipo.message.getCookieIsLastRoomOrUser("Room");aipo.message.saveCookieIsLastRoomOrUser("Room");aipo.message.saveCookieTargetId("lastRoomId",aipo.message.currentRoomId)}}else{if(dojo.byId("messageFormDiv")){dojo.byId("messageFormDiv").innerHTML=b.error}}};aipo.message.onReceiveMessageRoom=function(c){if(!c.error){var b=dijit.byId("modalDialog");if(b){b.hide();aipo.message.currentUserId=null;var a=parseInt(c.params);if(a!=NaN){aipo.message.reloadRoomList(a)}else{aipo.message.reloadRoomList()}}}if(dojo.byId("messageDiv")){dojo.byId("messageDiv").innerHTML=c.error}};aipo.message.onReceiveMessageRoomDelete=function(b){if(!b){var a=dijit.byId("modalDialog");if(a){a.hide();aipo.message.unselectRoom();aipo.message.reloadRoomList()}}if(dojo.byId("messageDiv")){dojo.byId("messageDiv").innerHTML=b}};aipo.message.removeNode=function(b){var a=dojo.byId("message"+b);if(a){a.parentNode.removeChild(a)}};aipo.message.onReceiveMessageDelete=function(a){if(!a){if(aipo.message.tmpMessageId){aipo.message.removeNode(aipo.message.tmpMessageId);aipo.message.tmpMessageId=null}else{aipo.message.reloadMessageList()}}if(dojo.byId("messageListDiv")){dojo.byId("messageListDiv").innerHTML=a}};aipo.message.setWrapperHeight=function(){var a=document.getElementById("modalDialog");if(a){var b=document.getElementById("wrapper");b.style.minHeight=a.clientHeight+"px"}};aipo.message.resizeInput=function(c){var g=c.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(k){var h="";var j=0;while(j<k.length){h+="&nbsp;";j++}return h});var a=document.createElement("div");a.id="shadow-message";a.style.position="absolute";a.style.top="-1000";a.style.left="-1000";a.style.border="0";a.style.outline="0";a.style.fontSize="14px";a.style.lineHeight="1.38";a.style.height="auto";a.style.resize="none";a.cols="10";a.innerHTML=g+"";var d=document.getElementsByTagName("body").item(0);d.appendChild(a);var f=dojo.byId("shadow-message");f.style.width=c.offsetWidth+"px";var b=f.offsetHeight;if(b<20){b=20}c.style.overflow="hidden";if(b>20*10){b=20*10;c.style.overflow="auto";c.style.overflowX="hidden"}var e=c.style.height!=b*1+23+"px";c.style.height=b*1+23+"px";d.removeChild(a);if(e){aipo.message.fixMessageWindow()}};aipo.message.onPaste=function(a){setTimeout(function(){aipo.message.resizeInput(a)},100)};aipo.message.inputHandle={};aipo.message.onFocus=function(a){if(!aipo.message.inputHandle[a.form.id]){aipo.message.inputHandle[a.form.id]=dojo.connect(a,"onkeydown",null,function(b){if((b.metaKey||b.ctrlKey)&&b.keyCode==13){this.form.onsubmit()}})}};aipo.message.read=function(b){var a=dojo.byId("messageRoomUnreadCount"+b);if(a){a.parentNode.removeChild(a)}aipo.message.refreshUnreadCount()};aipo.message.refreshUnreadCount=function(){var a=0;dojo.query(".messageSummary .nrCount").forEach(function(b){var c=parseInt(b.innerHTML);if(c!=NaN){a+=c}});aipo.menu.message.count(a);aipo.menu.updateTitle()};aipo.message.onFocusPlaceholder=function(a){a.nextSibling.style.display="none"};aipo.message.onBlurPlaceholder=function(a){if(!a.value){a.nextSibling.style.display=""}};aipo.message.getFirstMessageId=function(){var a=dojo.byId("messagePane");if(a){if(a.children.length>0){var b=a.children[0].id;if(b){return b.replace("message","")}}}return null};aipo.message.getLastMessageId=function(){var a=dojo.byId("messagePane");if(a){if(a.children.length>0){var b=a.children[a.children.length-1].id;if(b){return b.replace("message","").replace("Line","")}}}return null};aipo.message.getLastMessageRightId=function(){var a=dojo.byId("messageRightPane");if(a){if(a.children.length>3){var b=a.children[a.children.length-1];if(b.children.length>0){var c=b.children[b.children.length-1].id;if(c){return c.replace("messageRight","").replace("Line","")}}}}return null};aipo.message.isOpenWindow=function(){return aipo.message.isMobile?true:dojo.hasClass("dd_message","open")};aipo.message.onLoadMessageReadUserList=function(){};aipo.message.openDirect=function(a){aipo.message.hideProfile();if(aipo.message.isMobile?aipo.message.isInit:dojo.hasClass("dd_message","open")){aipo.message.openDirectMessage(a);return}if(aipo.message.isMobile){location.href=aipo.message.jslink+"?action=controls.Maximize&u="+a}else{if(aipo.message.isDirect){return}var b=dijit.byId("modalDialog");if(b){b.hide()}aipo.message.isDirect=true;if(aipo.message.currentRoomId){aipo.message.tmpRoomId=aipo.message.currentRoomId}aipo.message.currentRoomId=null;aipo.message.currentRoomSearchKeyword=null;aipo.message.currentUserSearchKeyword=null;aipo.message.currentGroupName="all";aipo.message.currentUserId=a;aipo.menu.toggleDropdown("message");aipo.message.selectTab("user");aipo.message.getCookieIsLastRoomOrUser("User")}};aipo.message.openDirectMessage=function(a){if(aipo.message.isDirect){return}var b=dijit.byId("modalDialog");if(b){b.hide()}aipo.message.isDirect=true;if(aipo.message.currentRoomId){aipo.message.tmpRoomId=aipo.message.currentRoomId}aipo.message.currentRoomId=null;aipo.message.currentRoomSearchKeyword=null;aipo.message.currentUserSearchKeyword=null;aipo.message.currentGroupName="all";aipo.message.currentUserId=a;if(aipo.message.isMobile){aipo.message.reloadUserList()}else{aipo.message.selectTab("user");aipo.message.getCookieIsLastRoomOrUser("User")}};aipo.message.hideProfile=function(){dojo.query(".profilePopup").style("display","none");if(aipo.message.mobileUnderlay){aipo.message.mobileUnderlay.hide()}};var profileHandle={};profileHandle.body=null;profileHandle.linkEnter=null;profileHandle.linkLeave=null;profileHandle.profileEnter=null;profileHandle.profileLeave=null;aipo.message.profileCurrentUserId=null;aipo.message.mobileUnderlay=null;aipo.message.popupProfile=function(d,f){if(aipo.message.isMobile&&!aipo.message.mobileUnderlay){aipo.message.mobileUnderlay=new aimluck.widget.DialogUnderlay();dojo.byId(aipo.message.mobileUnderlay.domNode.id).style["z-index"]=999;dojo.connect(aipo.message.mobileUnderlay.domNode,"onmousedown",aipo.message.mobileUnderlay.domNode,function(){aipo.message.hideProfile();if(aipo.userAgent.isAndroid2()){var j=dojo.byId("wrapper");dojo.style(j,"display","block")}})}if(aipo.message.isMobile){aipo.message.mobileUnderlay.show()}if(!profileHandle.body){var b=dojo.query("body")[0];if(aipo.userAgent.isIphone8_4_1()){b=dojo.byId("wrapper")}profileHandle.body=dojo.connect(b,"onmousedown",null,function(){if(dojo.query(".profileMouseenter").length==0){aipo.message.hideProfile()}})}var c=dojo.byId("popupProfile_"+d);if(!c){var h=document.createElement("div");h.id="popupProfile_"+d;h.className="profilePopupWrap";h.style.display="block";document.body.appendChild(h);dojo.byId("popupProfile_"+d).innerHTML='<div id="popupProfileInner_'+d+'" class="profilePopup" style="display: none;">'}f=f||window.event;var g=f.srcElement||f.target;var a=dojo.byId("popupProfileInner_"+d);dojo.disconnect(profileHandle.linkEnter);profileHandle.linkEnter=dojo.connect(g,"onmouseenter",null,function(){dojo.addClass(this,"profileMouseenter")});dojo.disconnect(profileHandle.linkLeave);profileHandle.linkLeave=dojo.connect(g,"onmouseleave",null,function(){dojo.removeClass(this,"profileMouseenter")});dojo.disconnect(profileHandle.profileEnter);profileHandle.profileEnter=dojo.connect(a,"onmouseenter",null,function(){dojo.addClass(this,"profileMouseenter")});dojo.disconnect(profileHandle.profileLeave);profileHandle.profileLeave=dojo.connect(a,"onmouseleave",null,function(){dojo.removeClass(this,"profileMouseenter")});dojo.addClass(g,"profileMouseenter");var e=dijit.byId("popupProfileInner_"+d);if(!e){e=dijit.byId("popupProfileInner_"+d);e=new aimluck.widget.Contentpane({},"popupProfileInner_"+d);e.eventTarget=g}e.onLoad=function(){var p=g.getBoundingClientRect();var n=document.documentElement.getBoundingClientRect();var t=document.getElementsByTagName("body").item(0);var m=dojo.query("#popupProfileInner_"+d);var s=dojo.query("#popupProfile_"+d);var k=dojo.byId("wrapper");if(m.style("display")=="none"||e.eventTarget!==g){dojo.query(".profilePopup").style("display","none");var q={left:document.documentElement.scrollLeft||document.body.scrollLeft,top:document.documentElement.scrollTop||document.body.scrollTop};m.style("display","block");s.style("position","absolute");m.style("opacity","0");var l=q.left+n.right;var j=m[0].clientWidth+p.right;if(aipo.message.isMobile){s.style("left","0px")}else{if(j<l){s.style("left",10+p.right+q.left+"px")}else{s.style("left",-10+p.left-m[0].clientWidth+q.left+"px")}}var r=q.top+n.bottom;var o=m[0].clientHeight+p.bottom;if(o<r){s.style("top",p.top+q.top+"px")}else{s.style("top",p.bottom-m[0].clientHeight+q.top+"px")}if(aipo.userAgent.isAndroid2()){dojo.style(k,"display","none");s.style("top","0px");s.style("margin","0")}m.style("opacity","1")}else{m.style("display","none")}e.eventTarget=g;e.currentUserId=d;aipo.message.profileCurrentUserId=d};if(d==e.currentUserId){e.onLoad()}else{e.viewPage("?template=UserPopupScreen&entityid="+d)}};aipo.message.onReceiveProfileMessage=function(b){if(!b.error){aipo.message.openDirect(aipo.message.profileCurrentUserId);var a=dojo.byId("messageForm"+aipo.message.profileCurrentUserId);if(a){a.message.value=""}aipo.message.closeProifleTextarea(aipo.message.profileCurrentUserId)}};aipo.message.focusProfileInput=function(a){var b=dojo.byId("messageForm"+a);if(b){try{b.message.focus()}catch(c){}}};aipo.message.openProfileTextarea=function(c){var b=dojo.byId("profile_card_"+c);var a=dojo.byId("profile_card_dummy_"+c);b.style.display="block";a.style.display="none";aipo.message.focusProfileInput(c)};aipo.message.closeProifleTextarea=function(c){var b=dojo.byId("profile_card_"+c);var a=dojo.byId("profile_card_dummy_"+c);a.style.display="block";b.style.display="none"};aipo.message.jumpMessage=function(b,a){aipo.message.jumpCursor=a;aipo.message.selectTab("room");aipo.message.selectRoom(b,true);aipo.message.getCookieIsLastRoomOrUser("Room")};aipo.message.onFocusSearch=function(){var a=dojo.byId("messageSearchForm");if(a){dojo.addClass(a,"focus")}};aipo.message.onBlurSearch=function(){var a=dojo.byId("messageSearchForm");if(a){if(!a.keyword.value){dojo.removeClass(a,"focus")}}};aipo.message.fixDateLine=function(){var e=dojo.byId("messagePane");var d=dojo.query(".messageLineLast",e);if(d.length>0){var c=d[0];var b=c.className.replace("date_line","").replace("messageLineLast","").replace("  ","");var f=dojo.query("."+b,e);for(var a=0;a<f.length;a++){if(a==f.length-1){f[a].style.display=""}else{dojo.removeClass(f[a],"messageLineLast");f[a].style.display="none"}}}};aipo.message.scrollTo=function(b,e,c){if(c<0){return}var d=e-b.scrollTop;var a=d/c*10;setTimeout(function(){b.scrollTop=b.scrollTop+a;if(b.scrollTop==e){return}aipo.message.scrollTo(b,e,c-10)},10)};aipo.message.insertTransactionId=function(b){function a(){function d(){return Math.floor((1+Math.random())*65536).toString(16).substring(1).toUpperCase()}return d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}var c=a();dojo.query("#messageForm"+b+" [name='transactionId']")[0].setAttribute("value",c);aipo.message.transactionIdList.push(c)};aipo.message.removeTransactionId=function(b){var a=aipo.message.transactionIdList.indexOf(b);if(a==-1){return false}else{aipo.message.transactionIdList.splice(a,1);return true}};aipo.message.saveCookieTargetId=function(c,a){var b=c+"="+a+";path=/;";document.cookie=b};aipo.message.saveCookieIsLastRoomOrUser=function(a){var b="lastIsRoomOrUser="+a+";path=/;";document.cookie=b};aipo.message.getCookieIsLastRoomOrUser=function(){var b=document.cookie;var e="lastIsRoomOrUser=";var d="";if(b.indexOf(e)!=-1){var c=b.indexOf(e)+e.length;var a=b.indexOf(";",c);if(a==-1){a=b.length}d=decodeURIComponent(b.substring(c,a))}return d};aipo.message.getCookieRoomId=function(e){var b=document.cookie;if(b.indexOf(e)!=-1){var d=b.indexOf(e)+e.length;var a=b.indexOf(";",d);if(a==-1){a=b.length}var c=decodeURIComponent(b.substring(d,a))}return c};
dojo.provide("aipo.notification");aipo.notification.setUp=function(){var d=dojo.query(".notificationRequestField");var b=dojo.query(".notificationConfirmField");var c=dojo.query(".notificationSuccessField");var a=dojo.query(".notificationRecommendField");if(!aipo.getCookie("block_notification")){if(aipo.notification.isDefault()){dojo.forEach(d,function(e){e.style.display=""})}}};aipo.notification.hasFeature=function(){return window.Notification||window.webkitNotifications};aipo.notification.isGranted=function(){return(window.Notification&&window.Notification.permission=="granted")||(window.webkitNotifications&&window.webkitNotifications.checkPermission()==0)};aipo.notification.isDefault=function(){return(window.Notification&&window.Notification.permission=="default")||(window.webkitNotifications&&window.webkitNotifications.checkPermission()==1)};aipo.notification.requestPermission=function(a){if(window.Notification){window.Notification.requestPermission(a)}else{if(window.webkitNotifications){window.webkitNotifications.requestPermission(a)}}};aipo.notification.enableDesktopNotification=function(b){var e=function(g){if(g.rc==200){var f=g.data;if(f){aipo.activityDesktopNotifyEnable=f.enable}}};var d={};var c={CONTENT_TYPE:"JSON",METHOD:"POST",POST_DATA:gadgets.json.stringify(d)};var a="?template=ActivityNotifyEnableJSONScreen&enable="+b;gadgets.io.makeNonProxiedRequest(a,e,c,"application/javascript")};aipo.notification.requestDesktopNotification=function(d){var f=dojo.query(".notificationRequestField");var b=dojo.query(".notificationConfirmField");var c=dojo.query(".notificationSuccessField");var a=dojo.query(".notificationRecommendField");var e=function(){if(aipo.notification.isGranted()){dojo.forEach(f,function(g){g.style.display="none"});dojo.forEach(b,function(g){g.style.display="none"});dojo.forEach(c,function(g){g.style.display=""});dojo.forEach(a,function(g){g.style.display="none"});aipo.notification.enableDesktopNotification("T");if(d){dojo.byId("desktopNotification"+d+"_T").checked=true}setTimeout(function(){aipo.notification.closeRequest()},3000)}else{if(aipo.notification.isDefault()){dojo.forEach(c,function(g){g.style.display="none"});dojo.forEach(b,function(g){g.style.display="none"});dojo.forEach(f,function(g){g.style.display=""});dojo.forEach(a,function(g){g.style.display="none"})}else{dojo.forEach(c,function(g){g.style.display="none"});dojo.forEach(b,function(g){g.style.display="none"});dojo.forEach(f,function(g){g.style.display="none"});dojo.forEach(a,function(g){g.style.display="none"});dojo.forEach(dojo.query(".notificationBlockField"),function(g){g.style.display=""})}}};aipo.notification.requestPermission(e);dojo.forEach(f,function(g){g.style.display="none"});dojo.forEach(c,function(g){g.style.display="none"});dojo.forEach(b,function(g){g.style.display=""});dojo.forEach(a,function(g){g.style.display="none"})};aipo.notification.closeRequest=function(){var a=dojo.byId("notificationField");if(a){a.style.display="none"}};aipo.notification.recommendRequest=function(){var d=dojo.query(".notificationRequestField");var b=dojo.query(".notificationConfirmField");var c=dojo.query(".notificationSuccessField");var a=dojo.query(".notificationRecommendField");dojo.forEach(d,function(e){e.style.display="none"});dojo.forEach(c,function(e){e.style.display="none"});dojo.forEach(b,function(e){e.style.display="none"});dojo.forEach(a,function(e){e.style.display=""})};aipo.notification.blockRequest=function(){aipo.setCookie("block_notification",true,"/",365*24*60*60*1000);aipo.notification.closeRequest()};aipo.notification.openDialog=function(a){aipo.menu.hideDropdownAll();aipo.notification.closeRequest();if(window.Notification){aipo.common.showDialog("?template=ActivityNotificationFormScreen&s=1&p="+window.Notification.permission+"&r="+a)}else{if(window.webkitNotifications){aipo.common.showDialog("?template=ActivityNotificationFormScreen&s=1&p="+window.webkitNotifications.checkPermission()+"&r="+a)}else{aipo.common.showDialog("?template=ActivityNotificationFormScreen&s=0")}}};aipo.notification.onReceiveMessage=function(b){if(!b){if(window.webkitNotifications||window.Notification){aipo.activityDesktopNotifyEnable=null;aipo.container.gadgetService.requestDesktopNotifyEnable()}var a=dijit.byId("modalDialog");if(a){a.hide()}}if(dojo.byId("messageDiv")){dojo.byId("messageDiv").innerHTML=b}};
